
/* cytoscape.min.js */

/**
 * This file is part of cytoscape.js 2.0.0beta3-github-snapshot-2013.04.24-16.30.38.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
 
var cytoscape;(function(){var a=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};a.init=function(b){if(b===undefined){b={}}if(a.is.plainObject(b)){return new a.Core(b)}else{if(a.is.string(b)){return a.extension.apply(a.extension,arguments)}}};a.fn={};if(typeof exports!=="undefined"){exports=module.exports=cytoscape}window.cytoscape=cytoscape})();(function(a){a.is={string:function(b){return b!=null&&typeof b==typeof""},fn:function(b){return b!=null&&typeof b===typeof function(){}
},array:function(b){return b!=null&&b instanceof Array},plainObject:function(b){return b!=null&&typeof b===typeof{}&&!a.is.array(b)&&b.constructor===Object},number:function(b){return b!=null&&typeof b===typeof 1&&!isNaN(b)},integer:function(b){return a.is.number(b)&&Math.floor(b)===b},color:function(b){return b!=null&&typeof b===typeof""&&$.Color(b).toString()!==""},bool:function(b){return b!=null&&typeof b===typeof true},elementOrCollection:function(b){return a.is.element(b)||a.is.collection(b)},element:function(b){return b instanceof a.Element&&b._private.single
},collection:function(b){return b instanceof a.Collection&&!b._private.single},core:function(b){return b instanceof a.Core},style:function(b){return b instanceof a.Style},stylesheet:function(b){return b instanceof a.Stylesheet},event:function(b){return b instanceof a.Event},emptyString:function(b){if(!b){return true}else{if(a.is.string(b)){if(b===""||b.match(/^\s+$/)){return true}}}return false},nonemptyString:function(b){if(b&&a.is.string(b)&&b!==""&&!b.match(/^\s+$/)){return true}return false},domElement:function(b){if(typeof HTMLElement==="undefined"){return false
}else{return b instanceof HTMLElement}}}})(cytoscape);(function(a){a.util={extend:function(){var l,d,b,c,h,j,g=arguments[0]||{},f=1,e=arguments.length,k=false;if(typeof g==="boolean"){k=g;g=arguments[1]||{};f=2}if(typeof g!=="object"&&!a.is.fn(g)){g={}}if(e===f){g=this;--f}for(;f<e;f++){if((l=arguments[f])!=null){for(d in l){b=g[d];c=l[d];if(g===c){continue}if(k&&c&&(a.is.plainObject(c)||(h=a.is.array(c)))){if(h){h=false;j=b&&a.is.array(b)?b:[]}else{j=b&&a.is.plainObject(b)?b:{}}g[d]=a.util.extend(k,j,c)
}else{if(c!==undefined){g[d]=c}}}}}return g},error:function(b){if(console){if(console.error){console.error(b)}else{if(console.log){console.log(b)}else{throw b}}}else{throw b}},clone:function(d){var c={};for(var b in d){if(d.hasOwnProperty(b)){c[b]=d[b]}}return c},copy:function(b){if(b==null){return b}if(a.is.array(b)){return b.slice()}else{if(a.is.plainObject(b)){return a.util.clone(b)}else{return b}}},mapEmpty:function(d){var c=true;if(d!=null){for(var b in d){c=false;break}}return c},pushMap:function(b){var c=a.util.getMap(b);
if(c==null){a.util.setMap($.extend({},b,{value:[b.value]}))}else{c.push(b.value)}},setMap:function(c){var g=c.map;var e;var f=c.keys;var b=f.length;for(var d=0;d<b;d++){var e=f[d];if(a.is.plainObject(e)){a.util.error("Tried to set map with object key")}if(d<f.length-1){if(g[e]==null){g[e]={}}g=g[e]}else{g[e]=c.value}}},getMap:function(c){var g=c.map;var f=c.keys;var b=f.length;for(var e=0;e<b;e++){var d=f[e];if(a.is.plainObject(d)){a.util.error("Tried to get map with object key")}g=g[d];if(g==null){return g
}}return g},deleteMap:function(k){var e=k.map;var j=k.keys;var d=j.length;var c=k.keepChildren;for(var f=0;f<d;f++){var g=j[f];if(a.is.plainObject(g)){a.util.error("Tried to delete map with object key")}var h=f===k.keys.length-1;if(h){if(c){for(var b in e){if(!c[b]){delete e[b]}}}else{delete e[g]}}else{e=e[g]}}},capitalize:function(b){if(a.is.emptyString(b)){return b}return b.charAt(0).toUpperCase()+b.substring(1)},camel2dash:function(h){var e=[];for(var f=0;f<h.length;f++){var g=h[f];var b=g.toLowerCase();
var d=g!==b;if(d){e.push("-");e.push(b)}else{e.push(g)}}var c=e.length===h.length;if(c){return h}return e.join("")},dash2camel:function(f){var b=[];var e=false;for(var c=0;c<f.length;c++){var d=f[c];var g=d==="-";if(g){e=true}else{if(e){b.push(d.toUpperCase())}else{b.push(d)}e=false}}return b.join("")},trim:function(d){var c,b;for(c=0;c<d.length&&d[c]===" ";c++){}for(b=d.length-1;b>c&&d[b]===" ";b--){}return d.substring(c,b+1)},hex2tuple:function(h){if(!(h.length===4||h.length===7)||h[0]!=="#"){return
}var f=h.length===4;var e,d,c;var i=16;if(f){e=parseInt(h[1]+h[1],i);d=parseInt(h[2]+h[2],i);c=parseInt(h[3]+h[3],i)}else{e=parseInt(h[1]+h[2],i);d=parseInt(h[3]+h[4],i);c=parseInt(h[5]+h[6],i)}return[e,d,c]},hsl2tuple:function(z){var u;var k=a.util.regex.number;var o,A,j,w,c,t,v;var i=new RegExp("^"+a.util.regex.hsla+"$").exec(z);if(i){o=parseInt(i[1]);if(o<0){o=(360-(-1*o%360))%360}else{if(o>360){o=o%360}}o/=360;A=parseFloat(i[2]);if(A<0||A>100){return}A=A/100;j=parseFloat(i[3]);if(j<0||j>100){return
}j=j/100;w=i[4];if(w!==undefined){w=parseFloat(w);if(w<0||w>1){return}}if(A===0){c=t=v=Math.round(j*255)}else{function f(h,g,b){if(b<0){b+=1}if(b>1){b-=1}if(b<1/6){return h+(g-h)*6*b}if(b<1/2){return g}if(b<2/3){return h+(g-h)*(2/3-b)*6}return h}var d=j<0.5?j*(1+A):j+A-j*A;var e=2*j-d;c=Math.round(255*f(e,d,o+1/3));t=Math.round(255*f(e,d,o));v=Math.round(255*f(e,d,o-1/3))}u=[c,t,v,w]}return u},rgb2tuple:function(k){var h;var d=a.util.regex.number;var b=new RegExp("^"+a.util.regex.rgba+"$").exec(k);
if(b){h=[];var l=[];for(var e=1;e<=3;e++){var g=b[e];if(g[g.length-1]==="%"){l[e]=true}g=parseFloat(g);if(l[e]){g=g/100*255}if(g<0||g>255){return}h.push(Math.floor(g))}var f=l[1]||l[2]||l[3];var j=l[1]&&l[2]&&l[3];if(f&&!j){return}var c=b[4];if(c!==undefined){c=parseFloat(c);if(c<0||c>1){return}h.push(c)}}return h},colorname2tuple:function(b){return a.util.colors[b.toLowerCase()]},color2tuple:function(b){return a.util.colorname2tuple(b)||a.util.hex2tuple(b)||a.util.rgb2tuple(b)||a.util.hsl2tuple(b)
},tuple2hex:function(d){var f=d[0];var e=d[1];var c=d[2];function h(b){var g=b.toString(16);if(g.length===1){g="0"+g}return g}return"#"+h(f)+h(e)+h(c)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}};
a.util.regex={};a.util.regex.number="(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)";a.util.regex.rgba="rgb[a]?\\(("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)(?:\\s*,\\s*("+a.util.regex.number+"))?\\)";a.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)";a.util.regex.hsla="hsl[a]?\\(("+a.util.regex.number+")\\s*,\\s*("+a.util.regex.number+"[%])\\s*,\\s*("+a.util.regex.number+"[%])(?:\\s*,\\s*("+a.util.regex.number+"))?\\)";
a.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+a.util.regex.number+")\\s*,\\s*(?:"+a.util.regex.number+"[%])\\s*,\\s*(?:"+a.util.regex.number+"[%])(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)";a.util.regex.hex3="\\#[0-9a-fA-F]{3}";a.util.regex.hex6="\\#[0-9a-fA-F]{6}"})(cytoscape);(function(b){b.math={};b.math.boxInBezierVicinity=function(o,j,w,k,s,i,p,h,l,f,m){var z=Math.min(o,w)-m;var u=Math.min(j,k)-m;var v=Math.max(o,w)+m;var t=Math.max(j,k)+m;if(s>=z&&s<=v&&i>=u&&i<=t){return 2}else{if(l>=z&&l<=v&&f>=u&&f<=t){return 2
}else{if(p>=z&&p<=v&&h>=u&&h<=t){return 1}}}var g=Math.min(s,p,l);var e=Math.min(i,h,f);var d=Math.max(s,p,l);var c=Math.max(i,h,f);if(g>v||d<z||e>t||c<u){return 0}return 1};b.math.checkStraightEdgeCrossesBox=function(t,k,C,o,v,g,u,d,s){var D=Math.min(t,C)-s;var A=Math.min(k,o)-s;var B=Math.max(t,C)+s;var z=Math.max(k,o)+s;var h=u-v;var m=v;var w;var e=d-g;var l=g;var p;if(Math.abs(h)<0.0001){return(v>=D&&v<=B&&Math.min(g,d)<=A&&Math.max(g,d)>=z)}var c=(D-m)/h;if(c>0&&c<=1){w=e*c+l;if(w>=A&&w<=z){return true
}}var j=(B-m)/h;if(j>0&&j<=1){w=e*j+l;if(w>=A&&w<=z){return true}}var f=(A-l)/e;if(f>0&&f<=1){p=h*f+m;if(p>=D&&p<=B){return true}}var i=(z-l)/e;if(i>0&&i<=1){p=h*i+m;if(p>=D&&p<=B){return true}}return false};b.math.checkBezierCrossesBox=function(A,h,N,C,s,W,l,T,j,Q,d){var u=Math.min(A,N)-d;var p=Math.min(h,C)-d;var V=Math.max(A,N)+d;var S=Math.max(h,C)+d;if(s>=u&&s<=V&&W>=p&&W<=S){return true}else{if(j>=u&&j<=V&&Q>=p&&Q<=S){return true}}var z=s-2*l+j;var g=-2*s+2*l;var J=s;var D=[];if(Math.abs(z)<0.0001){var O=(u-s)/g;
var B=(V-s)/g;D.push(O,B)}else{var G=g*g-4*z*(J-u);var v,t;if(G>0){var H=Math.sqrt(G);v=(-g+H)/(2*z);t=(-g-H)/(2*z);D.push(v,t)}var F=g*g-4*z*(J-V);var o,k;if(F>0){var H=Math.sqrt(F);o=(-g+H)/(2*z);k=(-g-H)/(2*z);D.push(o,k)}}D.sort(function(Y,X){return Y-X});var w=W-2*T+Q;var e=-2*W+2*T;var I=W;var M=[];if(Math.abs(w)<0.0001){var f=(p-W)/e;var K=(S-W)/e;M.push(f,K)}else{var m=e*e-4*w*(I-p);var c,U;if(m>0){var H=Math.sqrt(m);c=(-e+H)/(2*w);U=(-e-H)/(2*w);M.push(c,U)}var i=e*e-4*w*(I-S);var R,P;if(i>0){var H=Math.sqrt(i);
R=(-e+H)/(2*w);P=(-e-H)/(2*w);M.push(R,P)}}M.sort(function(Y,X){return Y-X});for(var E=0;E<D.length;E+=2){for(var L=1;L<M.length;L+=2){if(D[E]<M[L]&&M[L]>=0&&D[E]<=1&&D[E+1]>M[L-1]&&M[L-1]<=1&&D[E+1]>=0){return true}}}return false};b.math.inBezierVicinity=function(i,h,v,e,u,d,t,c,C){var k=0.25*v+0.5*u+0.25*t;var j=0.25*e+0.5*d+0.25*c;var o,m,A,w;var g,f,l;var B=function(E,K,F,D,J,I,G,H){g=(I-D)*(E-F)+(F-J)*(K-D);f=g*g;sideSquared=(I-D)*(I-D)+(F-J)*(F-J);if(H){if(g>0){return false}}else{if(g<0){return false
}}return(f/sideSquared>G)};var s=(k+u)/2;var p=(j+d)/2;var z=true;if(B(s,p,v,e,u,d,0,z)){z=!z}return(!B(i,h,v,e,u,d,C,z)&&!B(i,h,u,d,t,c,C,z)&&!B(i,h,t,c,v,e,C,z))};b.math.solveCubic=function(o,m,l,k,v){m/=o;l/=o;k/=o;var f,g,e,i,u,p,h,j;g=(3*l-(m*m))/9;e=-(27*k)+m*(9*l-2*(m*m));e/=54;f=g*g*g+e*e;v[1]=0;h=(m/3);if(f>0){u=e+Math.sqrt(f);u=((u<0)?-Math.pow(-u,(1/3)):Math.pow(u,(1/3)));p=e-Math.sqrt(f);p=((p<0)?-Math.pow(-p,(1/3)):Math.pow(p,(1/3)));v[0]=-h+u+p;h+=(u+p)/2;v[4]=v[2]=-h;h=Math.sqrt(3)*(-p+u)/2;
v[3]=h;v[5]=-h;return}v[5]=v[3]=0;if(f==0){j=((e<0)?-Math.pow(-e,(1/3)):Math.pow(e,(1/3)));v[0]=-h+2*j;v[4]=v[2]=-(j+h);return}g=-g;i=g*g*g;i=Math.acos(e/Math.sqrt(i));j=2*Math.sqrt(g);v[0]=-h+j*Math.cos(i/3);v[2]=-h+j*Math.cos((i+2*Math.PI)/3);v[4]=-h+j*Math.cos((i+4*Math.PI)/3);return};b.math.sqDistanceToQuadraticBezier=function(s,p,z,j,w,h,v,g){var F=1*z*z-4*z*w+2*z*v+4*w*w-4*w*v+v*v+j*j-4*j*h+2*j*g+4*h*h-4*h*g+g*g;var E=1*9*z*w-3*z*z-3*z*v-6*w*w+3*w*v+9*j*h-3*j*j-3*j*g-6*h*h+3*h*g;var C=1*3*z*z-6*z*w+z*v-z*s+2*w*w+2*w*s-v*s+3*j*j-6*j*h+j*g-j*p+2*h*h+2*h*p-g*p;
var B=1*z*w-z*z+z*s-w*s+j*h-j*j+j*p-h*p;a("coefficients: "+F/F+", "+E/F+", "+C/F+", "+B/F);var k=[];this.solveCubic(F,E,C,B,k);var e=1e-7;var D=[];for(var l=0;l<6;l+=2){if(Math.abs(k[l+1])<e&&k[l]>=0&&k[l]<=1){D.push(k[l])}}D.push(1);D.push(0);var f=-1;var A;var o,m,t;for(var u=0;u<D.length;u++){o=Math.pow(1-D[u],2)*z+2*(1-D[u])*D[u]*w+D[u]*D[u]*v;m=Math.pow(1-D[u],2)*j+2*(1-D[u])*D[u]*h+D[u]*D[u]*g;t=Math.pow(o-s,2)+Math.pow(m-p,2);a("distance for param "+D[u]+": "+Math.sqrt(t));if(f>=0){if(t<f){f=t;
A=D[u]}}else{f=t;A=D[u]}}a("given: ( "+s+", "+p+"), ( "+z+", "+j+"), ( "+w+", "+h+"), ( "+v+", "+g+")");a("roots: "+k);a("params: "+D);a("closest param: "+A);return f};var a=function(c){if(false){console.log(c)}}})(cytoscape);(function(a){a.instances=[];a.instanceCounter=0;a.lastInstanceTime;a.registerInstance=function(b,f){var h;if(a.is.core(b)){h=b}else{if(a.is.domElement(b)){f=b}}var e=+new Date;var d;if(!a.lastInstanceTime||a.lastInstanceTime===e){a.instanceCounter=0}else{++a.instanceCounter}a.lastInstanceTime=e;
d=a.instanceCounter;var g="cy-"+e+"-"+d;var c={id:g,cy:h,domElement:f,readies:[]};a.instances.push(c);a.instances[g]=c;return c};a.getRegistrationForInstance=function(b,e){var g;if(a.is.core(b)){if(b.registered()){g=b}}else{if(a.is.domElement(b)){e=b}}if(a.is.core(g)){var f=g.instanceId();return a.instances[f]}else{if(a.is.domElement(e)){for(var c=a.instances.length-1;c>=0;c--){var d=a.instances[c];if(d.domElement===e){return d}}}}}})(cytoscape);(function(c){var f={};c.extensions=f;var d={};c.modules=d;
function b(j,i,k){var h={};h[i]=k;switch(j){case"core":case"collection":c.fn[j](h)}return c.util.setMap({map:f,keys:[j,i],value:k})}function g(i,h){return c.util.getMap({map:f,keys:[i,h]})}function e(k,i,j,h,l){return c.util.setMap({map:d,keys:[k,i,j,h],value:l})}function a(k,i,j,h){return c.util.getMap({map:d,keys:[k,i,j,h]})}c.extension=function(){if(arguments.length==2){return g.apply(this,arguments)}else{if(arguments.length==3){return b.apply(this,arguments)}else{if(arguments.length==4){return a.apply(this,arguments)
}else{if(arguments.length==5){return e.apply(this,arguments)}else{$.error("Invalid extension access syntax")}}}}}})(cytoscape);(function(b,a){if(!b){return}b.fn.cytoscape=function(h){var k=b(this);if(h==="get"){var g=a.getRegistrationForInstance(k[0]);return g.cy}else{if(a.is.fn(h)){var f=h;var c=k[0];var g=a.getRegistrationForInstance(c);if(!g){g=a.registerInstance(c)}if(g&&g.cy&&g.cy.ready()){g.cy.trigger("ready",[],f)}else{g.readies.push(f)}}else{if(a.is.plainObject(h)){return k.each(function(){var i=b.extend({},h,{container:b(this)[0]});
cytoscape(i)})}else{var c=k[0];var j=[];var d=[];for(var e=1;e<arguments.length;e++){d[e-1]=arguments[e]}k.each(function(){var l=a.getRegistrationForInstance(c);var o=l.cy;var m=h;if(o&&a.is.fn(o[m])){var i=o[m].apply(o,d);j.push(i)}});if(j.length===1){j=j[0]}else{if(j.length==0){j=b(this)}}return j}}}};b.cytoscape=cytoscape;if(b.fn.cy==null&&b.cy==null){b.fn.cy=b.fn.cytoscape;b.cy=b.cytoscape}})(typeof jQuery!=="undefined"?jQuery:null,cytoscape);(function(a){a.Event=function(e,d){if(!(this instanceof a.Event)){return new a.Event(e,d)
}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=(e.defaultPrevented||e.returnValue===false||e.getPreventDefault&&e.getPreventDefault())?c:b}else{this.type=e}if(d){a.util.extend(this,d)}this.timeStamp=e&&e.timeStamp||+new Date};function b(){return false}function c(){return true}a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;var d=this.originalEvent;if(!d){return}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=c;
var d=this.originalEvent;if(!d){return}if(d.stopPropagation){d.stopPropagation()}d.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c;this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b}})(cytoscape);(function(a){a.define={data:function(c){var b={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
c=a.util.extend({},b,c);return function(e,u){var g=c;var B=this;var f=B.length!==undefined;var w=f?B:[B];var A=f?B[0]:B;if(a.is.string(e)){if(g.allowGetting&&u===undefined){var s;if(A){s=A._private[g.field][e]}return s}else{if(g.allowSetting&&u!==undefined){var d=!g.immutableKeys[e];if(d){for(var o=0,h=w.length;o<h;o++){w[o]._private[g.field][e]=u}if(g.updateMappers){B.updateMappers()}if(g.settingTriggersEvent){B[g.triggerFnName](g.settingEvent)}}}}}else{if(g.allowSetting&&a.is.plainObject(e)){var m=e;
var j,z;for(j in m){z=m[j];var d=!g.immutableKeys[j];if(d){for(var o=0,h=w.length;o<h;o++){w[o]._private[g.field][j]=z}}}if(g.updateMappers){B.updateMappers()}if(g.settingTriggersEvent){B[g.triggerFnName](g.settingEvent)}}else{if(g.allowBinding&&a.is.fn(e)){var t=e;B.bind(g.bindingEvent,t)}else{if(g.allowGetting&&e===undefined){var s;if(A){s=A._private[g.field]}return s}}}}return B}},batchData:function(d){var c={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
var b=d=a.util.extend({},c,d);return function(f){var u=this;var h=u.length!==undefined;var z=h?u:u._private.elements;if(z.length===0){return u}var j=h?z[0]._private.cy:u;for(var o=0;o<z.length;o++){var w=z[o];var g=w._private.data.id;var t=f[g];if(t!==undefined&&t!==null){var m=t;var l,p;for(l in m){p=m[l];var e=!b.immutableKeys[l];if(e){w._private[b.field][l]=p}}}}var s=new a.Collection(j,z);if(b.updateMappers){s.updateMappers()}s[b.triggerFnName](b.event);return u}},removeData:function(c){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};
c=a.util.extend({},b,c);return function(s){var g=c;var z=this;var f=z.length!==undefined;var t=f?z:[z];var v=f?z[0]:z;if(a.is.string(s)){var w=s.split(/\s+/);var j=w.length;for(var k=0;k<j;k++){var u=w[k];if(a.is.emptyString(u)){continue}var e=!g.immutableKeys[u];if(e){for(var o=0,h=t.length;o<h;o++){delete t[o]._private[g.field][u]}}}if(g.triggerEvent){z[g.triggerFnName](g.event)}}else{if(s===undefined){for(var o=0,h=t.length;o<h;o++){var m=t[o]._private[g.field];for(var u in m){var d=!g.immutableKeys[u];
if(d){delete m[u]}}}if(g.triggerEvent){z[g.triggerFnName](g.event)}}}return z}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(e){var b=a.define.event.aliases;
for(var d=0;d<b.length;d++){var c=b[d];e[c]=function(f,g){if(a.is.fn(g)){this.on(c,f,g)}else{if(a.is.fn(f)){g=f;this.on(c,g)}else{this.trigger(c)}}return this}}},falseCallback:function(){return false}},on:function(c){var b={unbindSelfOnTrigger:false,unbindAllBindersOnTrigger:false};c=a.util.extend({},b,c);return function(e,w,D,k){var t=this;var d=t.length!==undefined;var f=d?t:[t];var B=d?t[0]:t;var A=a.is.string(e);var u=c;if(a.is.plainObject(w)){k=D;D=w;w=undefined}else{if(a.is.fn(w)||w===false){k=w;
D=undefined;w=undefined}}if(a.is.fn(D)||D===false){k=D;D=undefined}if(!(a.is.fn(k)||k===false)&&A){return t}if(A){var C={};C[e]=k;e=C}for(var l in e){k=e[l];if(k===false){k=a.define.event.falseCallback}if(!a.is.fn(k)){continue}l=l.split(/\s+/);for(var z=0;z<l.length;z++){var s=l[z];if(a.is.emptyString(s)){continue}var m=s.match(a.define.event.regex);if(m){var g=m[1];var o=m[2]?m[2]:undefined;var h={callback:k,data:D,delegated:w?true:false,selector:w,type:g,namespace:o,unbindSelfOnTrigger:u.unbindSelfOnTrigger,unbindAllBindersOnTrigger:u.unbindAllBindersOnTrigger,binders:f};
for(var v=0;v<f.length;v++){f[v]._private.listeners.push(h)}}}}return t}},off:function(c){var b={};c=a.util.extend({},b,c);return function(e,D,l){var v=this;var d=v.length!==undefined;var f=d?v:[v];var H=d?v[0]:v;var G=a.is.string(e);var w=c;if(arguments.length===0){for(var E=0;E<f.length;E++){f[E]._private.listeners=[]}return v}if(a.is.fn(D)||D===false){l=D;D=undefined}if(G){var J={};J[e]=l;e=J}for(var m in e){l=e[m];if(l===false){l=a.define.event.falseCallback}m=m.split(/\s+/);for(var F=0;F<m.length;
F++){var u=m[F];if(a.is.emptyString(u)){continue}var o=u.match(a.define.event.optionalTypeRegex);if(o){var g=o[1]?o[1]:undefined;var t=o[2]?o[2]:undefined;for(var E=0;E<f.length;E++){var z=f[E]._private.listeners;for(var C=0;C<z.length;C++){var k=z[C];var s=!t||t===k.namespace;var A=!g||k.type===g;var B=!l||l===k.callback;var I=s&&A&&B;if(I){z.splice(C,1);C--}}}}}}return v}},trigger:function(c){var b={};c=a.util.extend({},b,c);return function(H,g,C){var s=this;var z=s.length!==undefined;var D=z?s:[s];
var I=z?s[0]:s;var N=a.is.string(H);var h=a.is.plainObject(H);var f=a.is.event(H);var V=c;var E=this._private.cy||this;if(N){var P=H.split(/\s+/);H=[];for(var aa=0;aa<P.length;aa++){var K=P[aa];if(a.is.emptyString(K)){continue}var o=K.match(a.define.event.regex);var af=o[1];var Q=o[2]?o[2]:undefined;H.push({type:af,namespace:Q})}}else{if(h){var ac=H;H=[ac]}}if(g){if(!a.is.array(g)){g=[g]}}else{g=[]}for(var aa=0;aa<H.length;aa++){var t=H[aa];for(var Z=0;Z<D.length;Z++){var O=D[Z];var T=O._private.listeners;
var d=a.is.element(O);var G=d;var K;if(f){K=t;K.cyTarget=K.cyTarget||O;K.cy=K.cy||E;K.namespace=K.namespace||t.namespace}else{K=new a.Event(t,{cyTarget:O,cy:E,namespace:t.namespace});var J=a.define.event.props;for(var Y=0;Y<J.length;Y++){var B=J[Y];K[B]=t[B]}}if(C){T=[{namespace:K.namespace,type:K.type,callback:C}]}for(var Y=0;Y<T.length;Y++){var e=T[Y];var R=!e.namespace||e.namespace===K.namespace;var A=e.type===K.type;var S=e.delegated?(O!==K.cyTarget&&a.is.element(K.cyTarget)&&K.cyTarget.is(e.selector)):(true);
var L=R&&A&&S;if(L){var U=[K];U=U.concat(g);if(e.data){K.data=e.data}else{K.data=undefined}if(e.unbindSelfOnTrigger||e.unbindAllBindersOnTrigger){T.splice(Y,1);Y--}if(e.unbindAllBindersOnTrigger){var w=e.binders;for(var X=0;X<w.length;X++){var v=w[X];if(!v||v===O){continue}var F=v._private.listeners;for(var W=0;W<F.length;W++){var ad=F[W];if(ad===e){F.splice(W,1);W--}}}}var ae=e.delegated?K.cyTarget:O;var M=e.callback.apply(ae,U);if(M===false||K.isPropagationStopped()){G=false;if(M===false){K.stopPropagation();
K.preventDefault()}}}}if(G){var u=O.parent();var ab=u.length!==0;if(ab){u=u[0];u.trigger(K)}else{E.trigger(K)}}}}return s}}}})(cytoscape);(function(b,c){var a=("ontouchstart" in c)||c.DocumentTouch&&document instanceof DocumentTouch;b.Style=function(d){if(!(this instanceof b.Style)){return new b.Style(d)}if(!b.is.core(d)){b.util.error("A style must have a core reference");return}this._private={cy:d,coreStyle:{}};this.length=0;this.addDefaultStylesheet()};b.style=b.Style;b.styfn=b.Style.prototype;
b.fn.style=function(d,e){for(var g in d){var f=d[g];b.Style.prototype=f}};b.stylesheet=b.Stylesheet=function(){if(!(this instanceof b.Stylesheet)){return new b.Stylesheet()}this.length=0};b.Stylesheet.prototype.selector=function(d){var e=this.length++;this[e]={selector:d,properties:[]};return this};b.Stylesheet.prototype.css=function(f,h){var g=this.length-1;if(b.is.string(f)){this[g].properties.push({name:f,value:h})}else{if(b.is.plainObject(f)){map=f;for(var e=0;e<b.style.properties.length;e++){var k=b.style.properties[e];
var d=map[k.name];if(d===undefined){d=map[b.util.dash2camel(k.name)]}if(d!==undefined){var f=k.name;var h=d;this[g].properties.push({name:f,value:h})}}}}return this};b.Stylesheet.prototype.generateStyle=function(m){var k=new b.Style(m);for(var g=0;g<this.length;g++){var f=this[g];var d=f.selector;var h=f.properties;k.selector(d);for(var e=0;e<h.length;e++){var l=h[e];k.css(l.name,l.value)}}return k};b.Stylesheet.prototype.assignToStyle=function(k){k.clear();for(var g=0;g<this.length;g++){var f=this[g];
var d=f.selector;var h=f.properties;k.selector(d);for(var e=0;e<h.length;e++){var l=h[e];k.css(l.name,l.value)}}};(function(){var f=b.util.regex.number;var g=b.util.regex.rgbaNoBackRefs;var e=b.util.regex.hslaNoBackRefs;var l=b.util.regex.hex3;var k=b.util.regex.hex6;b.style.types={zeroOneNumber:{number:true,min:0,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},size:{number:true,min:0,enums:["auto"]},bgSize:{number:true,min:0,allowPercent:true},color:{color:true},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:true,allowPercent:true},positiony:{enums:["top","center","bottom"],number:true,allowPercent:true},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:true},data:{mapping:true,regex:"^data\\s*\\(\\s*(\\w+)\\s*\\)$"},mapData:{mapping:true,regex:"^mapData\\((\\w+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*("+f+"|\\w+|"+g+"|"+e+"|"+l+"|"+k+")\\s*\\,\\s*("+f+"|\\w+|"+g+"|"+e+"|"+l+"|"+k+")\\)$"},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};
var m=b.style.types;b.style.properties=[{name:"cursor",type:m.cursor},{name:"text-valign",type:m.valign},{name:"text-halign",type:m.halign},{name:"color",type:m.color},{name:"content",type:m.text},{name:"text-outline-color",type:m.color},{name:"text-outline-width",type:m.size},{name:"text-outline-opacity",type:m.zeroOneNumber},{name:"text-opacity",type:m.zeroOneNumber},{name:"text-decoration",type:m.textDecoration},{name:"text-transform",type:m.textTransform},{name:"font-family",type:m.fontFamily},{name:"font-style",type:m.fontStyle},{name:"font-variant",type:m.fontVariant},{name:"font-weight",type:m.fontWeight},{name:"font-size",type:m.size},{name:"visibility",type:m.visibility},{name:"opacity",type:m.zeroOneNumber},{name:"z-index",type:m.nonNegativeInt},{name:"overlay-padding",type:m.size},{name:"overlay-color",type:m.color},{name:"overlay-opacity",type:m.zeroOneNumber},{name:"background-color",type:m.color},{name:"background-opacity",type:m.zeroOneNumber},{name:"background-image",type:m.url},{name:"background-position-x",type:m.positionx},{name:"background-position-y",type:m.positiony},{name:"background-repeat",type:m.bgRepeat},{name:"background-size-x",type:m.bgSize},{name:"background-size-y",type:m.bgSize},{name:"border-color",type:m.color},{name:"border-opacity",type:m.zeroOneNumber},{name:"border-width",type:m.size},{name:"border-style",type:m.lineStyle},{name:"height",type:m.size},{name:"width",type:m.size},{name:"padding-left",type:m.size},{name:"padding-right",type:m.size},{name:"padding-top",type:m.size},{name:"padding-bottom",type:m.size},{name:"shape",type:m.nodeShape},{name:"source-arrow-shape",type:m.arrowShape},{name:"target-arrow-shape",type:m.arrowShape},{name:"source-arrow-color",type:m.color},{name:"target-arrow-color",type:m.color},{name:"line-style",type:m.lineStyle},{name:"line-color",type:m.color},{name:"control-point-step-size",type:m.size},{name:"curve-style",type:m.curveStyle},{name:"selection-box-color",type:m.color},{name:"selection-box-opacity",type:m.zeroOneNumber},{name:"selection-box-border-color",type:m.color},{name:"selection-box-border-width",type:m.size},{name:"panning-cursor",type:m.cursor},{name:"active-bg-color",type:m.color},{name:"active-bg-opacity",type:m.zeroOneNumber},{name:"active-bg-size",type:m.size}];
var j=b.style.properties;for(var h=0;h<j.length;h++){var d=j[h];j[d.name]=d}})();b.styfn.addDefaultStylesheet=function(){var d=this.containerPropertyAsString("font-family")||"sans-serif";var j=this.containerPropertyAsString("font-style")||"normal";var g=this.containerPropertyAsString("font-variant")||"normal";var f=this.containerPropertyAsString("font-weight")||"normal";var e=this.containerPropertyAsString("color")||"#000";var k=this.containerPropertyAsString("text-transform")||"none";var i=this.containerPropertyAsString("text-decoration")||"none";
var h=this.containerPropertyAsString("font-size")||12;this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:e,content:undefined,"text-outline-color":"transparent","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":k,"font-family":d,"font-style":j,"font-variant":g,"font-weight":f,"font-size":h,visibility:"visible",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10}).selector("node").css({"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle"}).selector("edge").css({"source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb",width:1,"control-point-step-size":40,"curve-style":"bezier"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":0.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":0.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":0.15,"active-bg-size":a?40:15})
};b.styfn.clear=function(){for(var d=0;d<this.length;d++){delete this[d]}this.length=0;return this};b.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};b.styfn.core=function(){return this._private.coreStyle};b.styfn.parse=function(F,z,o){F=b.util.camel2dash(F);var j=b.style.properties[F];var p=z;if(!j){return null}if(z===undefined||z===null){return null}var k=b.is.string(z);if(k){z=b.util.trim(z)}var h=j.type;if(!h){return null}if(o&&(z===""||z===null)){return{name:F,value:z,bypass:true,deleteBypass:true}
}var E,t;if(!k){}else{if(E=new RegExp(b.style.types.data.regex).exec(z)){return{name:F,value:E,strValue:z,mapped:b.style.types.data,field:E[1],bypass:o}}else{if(t=new RegExp(b.style.types.mapData.regex).exec(z)){if(!(h.color||h.number)){return false}var e=this.parse(F,t[4]);if(!e||e.mapped){return false}var g=this.parse(F,t[5]);if(!g||g.mapped){return false}if(e.value===g.value){return false}else{if(h.color){var v=e.value;var u=g.value;var B=v[0]===u[0]&&v[1]===u[1]&&v[2]===u[2]&&(v[3]===u[3]||((v[3]==null||v[3]===1)&&(u[3]==null||u[3]===1)));
if(B){return false}}}return{name:F,value:t,strValue:z,mapped:b.style.types.mapData,field:t[1],fieldMin:parseFloat(t[2]),fieldMax:parseFloat(t[3]),valueMin:e.value,valueMax:g.value,bypass:o}}}}if(h.number){var A;if(!h.unitless){if(k){var l=z.match("^("+b.util.regex.number+")(px|em"+(h.allowPercent?"|\\%":"")+")?$");if(!h.enums){if(!l){return null}z=l[1];A=l[2]||"px"}}else{A="px"}}z=parseFloat(z);if(isNaN(z)&&h.enums!==undefined){z=p;for(var C=0;C<h.enums.length;C++){var d=h.enums[C];if(d===z){return{name:F,value:z,strValue:z,bypass:o}
}}return null}if(h.integer&&!b.is.integer(z)){return null}if((h.min!==undefined&&z<h.min)||(h.max!==undefined&&z>h.max)){return null}var D={name:F,value:z,strValue:""+z+(A?A:""),units:A,bypass:o,pxValue:h.unitless||A==="%"?undefined:(A==="px"||!A?(z):(this.getEmSizeInPixels()*z))};return D}else{if(h.color){var s=b.util.color2tuple(z);return{name:F,value:s,strValue:z,bypass:o}}else{if(h.enums){for(var C=0;C<h.enums.length;C++){var d=h.enums[C];if(d===z){return{name:F,value:z,strValue:z,bypass:o}}}}else{if(h.regex){var f=new RegExp(h.regex);
var w=f.exec(z);if(w){return{name:F,value:w,strValue:z,bypass:o}}else{return null}}else{if(h.string){return{name:F,value:z,strValue:z,bypass:o}}else{return null}}}}}};b.styfn.getEmSizeInPixels=function(){var g=this._private.cy;var f=g.container();if(c&&f){var e=c.getComputedStyle(f).getPropertyValue("font-size");var d=parseFloat(e);return d}else{return 1}};b.styfn.containerCss=function(d){var f=this._private.cy;var e=f.container();if(c&&e){return c.getComputedStyle(e).getPropertyValue(d)}};b.styfn.containerProperty=function(e){var d=this.containerCss(e);
var f=this.parse(e,d);return f};b.styfn.containerPropertyAsString=function(d){var e=this.containerProperty(d);if(e){return e.strValue}};b.styfn.selector=function(e){var d=e==="core"?null:new b.Selector(e);var f=this.length++;this[f]={selector:d,properties:[]};return this};b.styfn.css=function(){var e=arguments;switch(e.length){case 1:var g=e[0];for(var f=0;f<b.style.properties.length;f++){var h=b.style.properties[f];var d=g[h.name];if(d===undefined){d=g[b.util.dash2camel(h.name)]}if(d!==undefined){this.cssRule(h.name,d)
}}break;case 2:this.cssRule(e[0],e[1]);break;default:break}return this};b.styfn.cssRule=function(d,h){var g=this.parse(d,h);if(g){var e=this.length-1;this[e].properties.push(g);var f=!this[e].selector;if(f){this._private.coreStyle[g.name]=g}}return this};b.styfn.applyParsedProperty=function(p,A){var h=A;var w=p._private.style;var m,j;var i=b.style.properties[h.name].type;var o=h.bypass;var z=w[h.name];var t=z&&z.bypass;if((A.name==="height"||A.name==="width")&&A.value==="auto"&&p.isNode()&&!p.isParent()){return false
}if(o&&h.deleteBypass){var s=w[h.name];if(!s){return true}else{if(s.bypass&&s.bypassed){w[h.name]=s.bypassed;return true}else{return false}}}switch(h.mapped){case b.style.types.mapData:m=p._private.data[h.field];if(!b.is.number(m)){return false}var e=(m-h.fieldMin)/(h.fieldMax-h.fieldMin);if(i.color){var v=h.valueMin[0];var u=h.valueMax[0];var d=h.valueMin[1];var D=h.valueMax[1];var l=h.valueMin[2];var k=h.valueMax[2];var C=h.valueMin[3]==null?1:h.valueMin[3];var B=h.valueMax[3]==null?1:h.valueMax[3];
var g=[Math.round(v+(u-v)*e),Math.round(d+(D-d)*e),Math.round(l+(k-l)*e),Math.round(C+(B-C)*e)];j={bypass:h.bypass,name:h.name,value:g,strValue:["rgba(",g[0],", ",g[1],", ",g[2],", ",g[3],")"].join("")}}else{if(i.number){var f=h.valueMin+(h.valueMax-h.valueMin)*e;j=this.parse(h.name,f,h.bypass)}else{return false}}if(!j){j=this.parse(h.name,z.strValue,h.bypass)}j.mapping=h;h=j;break;case b.style.types.data:m=p._private.data[h.field];j=this.parse(h.name,m,h.bypass);if(!j){j=this.parse(h.name,z.strValue,h.bypass)
}j.mapping=h;h=j;break;case undefined:break;default:return false}if(o){if(t){h.bypassed=z.bypassed}else{h.bypassed=z}w[h.name]=h}else{if(t){z.bypassed=h}else{w[h.name]=h}}return true};b.styfn.applyProperty=function(g,e,f){var d=this.parse(e,f);if(!d){return false}return this.applyParsedProperty(g,d)};b.styfn.apply=function(o){for(var e=0;e<o.length;e++){var m=o[e];for(var h=0;h<this.length;h++){var f=this[h];var k=f.selector&&f.selector.filter(m).length>0;var l=f.properties;if(k){for(var g=0;g<l.length;
g++){var d=l[g];this.applyParsedProperty(m,d)}}}}};b.styfn.update=function(){var e=this._private.cy;var d=e.elements();d.updateStyle()};b.styfn.getRenderedStyle=function(m){var m=m[0];if(m){var d={};var f=m._private.style;var j=this._private.cy;var l=j.zoom();for(var k=0;k<b.style.properties.length;k++){var e=b.style.properties[k];var h=f[e.name];if(h){var g=h.unitless?h.strValue:(h.pxValue*l)+"px";d[e.name]=g;d[b.util.dash2camel(e.name)]=g}}return d}};b.styfn.getRawStyle=function(h){var h=h[0];if(h){var e={};
var g=h._private.style;for(var f=0;f<b.style.properties.length;f++){var j=b.style.properties[f];var d=g[j.name];if(d){e[j.name]=d.strValue;e[b.util.dash2camel(j.name)]=d.strValue}}return e}};b.styfn.getValueStyle=function(h){var e,g;if(b.is.element(h)){e={};g=h._private.style}else{e={};g=h}if(g){for(var f=0;f<b.style.properties.length;f++){var k=b.style.properties[f];var d=g[k.name]||g[b.util.dash2camel(k.name)];if(d!==undefined&&!b.is.plainObject(d)){d=this.parse(k.name,d)}if(d){var j=d.value===undefined?d:d.value;
e[k.name]=j;e[b.util.dash2camel(k.name)]=j}}}return e};b.styfn.updateFunctionalProperties=function(d){for(var g=0;g<d.length;g++){var l=d[g];var k=l._private.style;for(var f=0;f<b.style.properties.length;f++){var m=b.style.properties[f];var h=k[m.name];if(h&&h.mapping){var e=h.mapping;this.applyParsedProperty(l,e)}}}};b.styfn.applyBypass=function(s,e,o){var m=[];if(e==="*"||e==="**"){if(o!==undefined){for(var h=0;h<b.style.properties.length;h++){var d=b.style.properties[h];var e=d.name;var l=this.parse(e,o,true);
if(l){m.push(l)}}}}else{if(b.is.string(e)){var l=this.parse(e,o,true);if(l){m.push(l)}}else{if(b.is.plainObject(e)){var f=e;for(var h=0;h<b.style.properties.length;h++){var d=b.style.properties[h];var e=d.name;var o=f[e];if(o===undefined){o=f[b.util.dash2camel(e)]}if(o!==undefined){var l=this.parse(e,o,true);if(l){m.push(l)}}}}else{return false}}}if(m.length===0){return false}var k=false;for(var h=0;h<s.length;h++){var p=s[h];for(var g=0;g<m.length;g++){var d=m[g];k=this.applyParsedProperty(p,d)||k
}}return k};b.styfn.removeAllBypasses=function(d){for(var h=0;h<b.style.properties.length;h++){var m=b.style.properties[h];var g=m.name;var l="";var e=this.parse(g,l,true);for(var f=0;f<d.length;f++){var k=d[f];this.applyParsedProperty(k,e)}}};b.styfn.calculateControlPoints=function(d){var t={};var z=false;var k=d.length;for(var p=0;p<d.length;p++){var A=d[p];var w=A._private.style["curve-style"].strValue==="bundled";if(w){z=true;break}}var v=k%2!==0&&!z;for(var p=0;p<d.length;p++){var h=d[p];var l=h._private.data.id;
var j=h.source();var s=h.target();var u=j.position();var m=s.position();var B={x:(u.x+m.x)/2,y:(u.y+m.y)/2};var f=h._private.style["control-point-step-size"].pxValue;var g=(k-1)*-f/2;if(j.id()==s.id()){d[p]._private.rscratch.isSelfEdge=true;h._private.rscratch.cp2ax=u.x;h._private.rscratch.cp2ay=u.y-1.3*f*(p/3+1);h._private.rscratch.cp2cx=u.x-1.3*f*(p/3+1);h._private.rscratch.cp2cy=u.y;h._private.rscratch.selfEdgeMidX=(h._private.rscratch.cp2ax+h._private.rscratch.cp2cx)/2;h._private.rscratch.selfEdgeMidY=(h._private.rscratch.cp2ay+h._private.rscratch.cp2cy)/2;
continue}var o=g+f*p;if(k%2==1&&p==Math.floor(k/2)){d[p]._private.rscratch.isStraightEdge=true;continue}d[p]._private.rscratch.isBezierEdge=true;var D={x:m.y-u.y,y:u.x-m.x};var C=Math.sqrt(D.x*D.x+D.y*D.y);if(j.id()>s.id()){C*=-1}D.x/=C;D.y/=C;d[p]._private.rscratch.cp2x=B.x+D.x*o;d[p]._private.rscratch.cp2y=B.y+D.y*o}}})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core=function(b,d){for(var c in b){var e=b[c];a.Core.prototype[c]=e}};a.Core=function(f){if(!(this instanceof a.Core)){return new a.Core(f)
}var g=this;var b=f.container;var d=a.getRegistrationForInstance(g,b);if(d){d.cy=this;d.domElement=b}else{d=a.registerInstance(g,b)}var e=d.readies;var c=f;c.layout=a.util.extend({name:typeof window==="undefined"?"null":"grid"},c.layout);c.renderer=a.util.extend({name:typeof window==="undefined"?"null":"canvas"},c.renderer);this._private={ready:false,instanceId:null,options:c,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e+50,zoomEnabled:c.zoomEnabled===undefined?true:c.zoomEnabled,panEnabled:c.panEnabled===undefined?true:c.panEnabled,boxSelectionEnabled:c.boxSelectionEnabled===undefined?true:c.boxSelectionEnabled,zoom:a.is.number(c.zoom)?c.zoom:1,pan:{x:a.is.plainObject(c.pan)&&a.is.number(c.pan.x)?c.pan.x:0,y:a.is.plainObject(c.pan)&&a.is.number(c.pan.y)?c.pan.y:0,}};
if(a.is.number(c.minZoom)&&a.is.number(c.maxZoom)&&c.minZoom<c.maxZoom){this._private.minZoom=c.minZoom;this._private.maxZoom=c.maxZoom}else{if(a.is.number(c.minZoom)&&c.maxZoom===undefined){this._private.minZoom=c.minZoom}else{if(a.is.number(c.maxZoom)&&c.minZoom===undefined){this._private.maxZoom=c.maxZoom}}}this._private.style=a.is.stylesheet(c.style)?c.style.generateStyle(this):new a.Style(g);g.initRenderer(c.renderer);g.load(c.elements,function(){g.startAnimationLoop();g._private.ready=true;
if(a.is.fn(c.ready)){g.bind("ready",c.ready)}for(var h=0;h<e.length;h++){var j=e[h];g.bind("ready",j)}d.readies=[];g.trigger("ready")},c.done)};a.corefn=a.Core.prototype;a.fn.core({ready:function(){return this._private.ready},registered:function(){if(this._private&&this._private.instanceId!=null){return true}else{return false}},registeredId:function(){return this._private.instanceId},getElementById:function(c){var b=this._private.id2index[c];if(b!==undefined){return this._private.elements[b]}return new a.Collection(this)
},addToPool:function(c){var g=this._private.elements;var j=this._private.id2index;for(var e=0;e<c.length;e++){var f=c[e];var h=f._private.data.id;var d=j[h];var b=d!==undefined;if(!b){d=g.length;g.push(f);j[h]=d}}return this},removeFromPool:function(m){var b=this._private.elements;var e=this._private.id2index;for(var g=0;g<m.length;g++){var l=m[g];var c=l._private.data.id;var h=e[c];var k=h!==undefined;if(k){delete this._private.id2index[c];b.splice(h,1);for(var f=h;f<b.length;f++){var d=b[f]._private.data.id;
e[d]--}}}},container:function(){return this._private.options.container},options:function(){return a.util.copy(this._private.options)},json:function(c){var b={};var d=this;b.elements={};d.elements().each(function(e,f){var g=f.group();if(!b.elements[g]){b.elements[g]=[]}b.elements[g].push(f.json())});b.style=d.style();b.scratch=d.scratch();b.zoomEnabled=d._private.zoomEnabled;b.panEnabled=d._private.panEnabled;b.layout=d._private.options.layout;b.renderer=d._private.options.renderer;return b}})})(cytoscape);
(function(a,b){a.fn.core({add:function(d){var c;var e=this;if(a.is.elementOrCollection(d)){var w=d;var o=[];for(var h=0;h<w.length;h++){var v=w[h];o.push(v.json())}c=new a.Collection(e,o)}else{if(a.is.array(d)){var o=d;c=new a.Collection(e,o)}else{if(a.is.plainObject(d)&&(a.is.array(d.nodes)||a.is.array(d.edges))){var l=d;var o=[];var p=["nodes","edges"];for(var h=0,s=p.length;h<s;h++){var t=p[h];var m=l[t];if(a.is.array(m)){for(var f=0,g=m.length;f<g;f++){var u=m[f];var k=a.util.extend({},u,{group:t});
o.push(k)}}}c=new a.Collection(e,o)}else{var u=d;c=(new a.Element(e,u)).collection()}}}return c.filter(function(){return !this.removed()})},remove:function(d){if(!a.is.elementOrCollection(d)){d=d}else{if(a.is.string(d)){var c=d;d=this.$(c)}}return d.remove()},load:function(f,g,e){var i=this;var d=i.elements();if(d.length>0){d.remove()}i.notifications(false);var c=[];if(f!=null){if(a.is.plainObject(f)||a.is.array(f)){i.add(f)}}function h(){i.one("layoutready",function(j){i.notifications(true);i.trigger(j);
i.notify({type:"load",collection:i.elements(),style:i._private.style});i.one("load",g);i.trigger("load")}).one("layoutstop",function(){i.one("done",e);i.trigger("done")});i.layout(i._private.options.layout)}if(true||b&&b.chrome){setTimeout(function(){h()},30)}else{h()}return this}})})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core({addToAnimationPool:function(b){var h=this;var c=h._private.aniEles;var e=[];for(var d=0;d<c.length;d++){var g=c[d]._private.data.id;e[g]=true
}for(var d=0;d<b.length;d++){var f=b[d];var g=f._private.data.id;if(!e[g]){c.push(f)}}},startAnimationLoop:function(){var g=this;var f=1000/60;var l=false;var i=true;g._private.aniEles=[];var j=typeof window==="undefined"?function(){}:(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);if(j==null||!i){j=function(m){window.setTimeout(function(){m(+new Date)},f)}}var c=g.container();function k(){function m(){j(function(o){d(o);
k()},c)}if(l){setTimeout(function(){m()},f)}else{m()}}k();function d(s){var D=g._private.aniEles;for(var z=0;z<D.length;z++){var C=D[z];var A=C._private.animation.current;var w=C._private.animation.queue;if(A.length===0){var o=w;var v=o.length>0?o.shift():null;if(v!=null){v.callTime=+new Date;A.push(v)}}var B=[];for(var u=0;u<A.length;u++){var t=A[u];e(C,t,s);if(A[u].done){B.push(t);A.splice(u,1);u--}}for(var u=0;u<B.length;u++){var t=B[u];var p=t.params.complete;if(a.is.fn(p)){p.apply(C,[s])}}}if(D.length>0){g.notify({type:"draw",collection:D})
}for(var u=0;u<D.length;u++){var C=D[u];var w=C._private.animation.queue;var A=C._private.animation.current;var m=A.length>0||w.length>0;if(!m){D.splice(u,1);u--}}}function e(H,A,u){var o=g.style();var E=A.properties;var z=A.params;var v=A.callTime;var D;if(A.duration===0){D=1}else{D=Math.min(1,(u-v)/A.duration)}if(E.delay==null){var C=A.startPosition;var t=E.position;var G=H._private.position;if(t){if(b(C.x,t.x)){G.x=h(C.x,t.x,D)}if(b(C.y,t.y)){G.y=h(C.y,t.y,D)}}if(E.css){var F=a.style.properties;
for(var B=0;B<F.length;B++){var m=F[B].name;var w=E.css[m];if(w!==undefined){var s=A.startStyle[m];var p=h(s,w,D);o.applyBypass(H,m,p)}}}}if(a.is.fn(z.step)){z.step.apply(H,[u])}if(D>=1){A.done=true}return D}function b(o,m){if(o==null||m==null){return false}if(a.is.number(o)&&a.is.number(m)){return true}else{if((o)&&(m)){return true}}return false}function h(p,s,w){if(a.is.number(p)&&a.is.number(s)){return p+(s-p)*w}else{if(a.is.number(p[0])&&a.is.number(s[0])){var u=p;var t=s;function o(C,A){var D=A-C;
var B=C;return Math.round(w*D+B)}var m=o(u[0],t[0]);var v=o(u[1],t[1]);var z=o(u[2],t[2]);return a.util.tuple2hex([m,v,z])}}return undefined}}})})(cytoscape);(function(a){a.fn.core({data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),})
})(cytoscape);(function(a){a.fn.core({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),});a.corefn.bind=a.corefn.on;a.corefn.unbind=a.corefn.off;a.define.event.aliasesOn(a.corefn)})(cytoscape);(function(a){a.fn.core({png:function(){var c=this;var b=this._private.renderer;return b.png()}})})(cytoscape);(function(a){a.fn.core({layout:function(b){var c=this;if(this._private.layoutRunning){return this
}if(b==null){b=this._private.options.layout}this.initLayout(b);c.trigger("layoutstart");this._private.layoutRunning=true;this.one("layoutstop",function(){this._private.layoutRunning=false});this._private.layout.run();return this},initLayout:function(d){if(d==null){a.util.error("Layout options must be specified to run a layout");return}if(d.name==null){a.util.error("A `name` must be specified to run a layout");return}var c=d.name;var b=a.extension("layout",c);if(b==null){a.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",c);
return}this._private.layout=new b(a.util.extend({},d,{renderer:this._private.renderer,cy:this}));this._private.options.layout=d}})})(cytoscape);(function(a){a.fn.core({notify:function(e){if(!this._private.notificationsEnabled){return}var d=this.renderer();var f=this;if(a.is.element(e.collection)){var b=e.collection;e.collection=new a.Collection(f,[b])}else{if(a.is.array(e.collection)){var c=e.collection;e.collection=new a.Collection(f,c)}}d.notify(e)},notifications:function(b){var c=this._private;
if(b===undefined){return c.notificationsEnabled}else{c.notificationsEnabled=b?true:false}},noNotifications:function(b){this.notifications(false);b();this.notifications(true)}})})(cytoscape);(function(a){a.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(c){var d=this;var b=a.extension("renderer",c.name);if(b==null){a.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",c.name);return}this._private.renderer=new b(a.util.extend({},c,{cy:d,style:d._private.style}))
}})})(cytoscape);(function(a){a.fn.core({collection:function(b){if(a.is.string(b)){return this.$(b)}else{if(a.is.elementOrCollection(b)){return b.collection()}}return new a.Collection(this)},nodes:function(b){var c=this.$("node");if(b){return c.filter(b)}return c},edges:function(b){var c=this.$("edge");if(b){return c.filter(b)}return c},$:function(c){var b=new a.Collection(this,this._private.elements);if(c){return b.filter(c)}return b}});a.corefn.elements=a.corefn.filter=a.corefn.$})(cytoscape);(function(a){a.fn.core({style:function(b){return this._private.style
}})})(cytoscape);(function(a){a.fn.core({panningEnabled:function(b){if(b!==undefined){this._private.panEnabled=b?true:false}else{return this._private.panEnabled}return this},zoomingEnabled:function(b){if(b!==undefined){this._private.zoomEnabled=b?true:false}else{return this._private.zoomEnabled}return this},boxSelectionEnabled:function(b){if(b!==undefined){this._private.boxSelectionEnabled=b?true:false}else{return this._private.boxSelectionEnabled}return this},pan:function(){var c=arguments;var g=this._private.pan;
var d,f,e,b,h;switch(c.length){case 0:return g;case 1:if(!this._private.panEnabled){return this}else{if(a.is.string(c[0])){d=c[0];return g[d]}else{if(a.is.plainObject(c[0])){e=c[0];b=e.x;h=e.y;if(a.is.number(b)){g.x=b}if(a.is.number(h)){g.y=h}this.trigger("pan")}}}break;case 2:if(!this._private.panEnabled){return this}d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]=f}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},panBy:function(h){var c=arguments;var g=this._private.pan;
var d,f,e,b,i;if(!this._private.panEnabled){return this}switch(c.length){case 1:if(a.is.plainObject(c[0])){e=c[0];b=e.x;i=e.y;if(a.is.number(b)){g.x+=b}if(a.is.number(i)){g.y+=i}this.trigger("pan")}break;case 2:d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]+=f}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},fit:function(f,g){if(a.is.number(f)&&g===undefined){g=f;f=undefined}if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var i=this.boundingBox(f);
var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e;g=a.is.number(g)?g:0;if(!isNaN(b)&&!isNaN(c)){e=this._private.zoom=Math.min((b-2*g)/i.w,(c-2*g)/i.h);e=e>this._private.maxZoom?this._private.maxZoom:e;e=e<this._private.minZoom?this._private.minZoom:e;this._private.pan={x:(b-e*(i.x1+i.x2))/2,y:(c-e*(i.y1+i.y2))/2}}this.trigger("pan zoom");this.notify({type:"viewport"});return this},minZoom:function(b){if(b===undefined){return this._private.minZoom
}else{if(a.is.number(b)){this._private.minZoom=b}}return this},maxZoom:function(b){if(b===undefined){return this._private.maxZoom}else{if(a.is.number(b)){this._private.maxZoom=b}}return this},zoom:function(d){var j;var k;if(d===undefined){return this._private.zoom}else{if(a.is.number(d)){k=d;j={x:0,y:0}}else{if(a.is.plainObject(d)){k=d.level;if(d.renderedPosition){var l=d.renderedPosition;var b=this._private.pan;var i=this._private.zoom;j={x:(l.x-b.x)/i,y:(l.y-b.y)/i}}else{if(d.position){j=d.position
}}if(j&&!this._private.panEnabled){return this}}}}if(!this._private.zoomEnabled){return this}if(!a.is.number(k)||!a.is.number(j.x)||!a.is.number(j.y)){return this}k=k>this._private.maxZoom?this._private.maxZoom:k;k=k<this._private.minZoom?this._private.minZoom:k;var g=this._private.pan;var h=this._private.zoom;var f=k;var e={x:-f/h*(j.x-g.x)+j.x,y:-f/h*(j.y-g.y)+j.y};this._private.zoom=k;this._private.pan=e;var c=g.x!==e.x||g.y!==e.y;this.trigger("zoom"+(c?" pan":""));this.notify({type:"viewport"});
return this},boundingBox:function(c){var b=this.$(c);return b.boundingBox()},center:function(f){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var g=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e=this._private.zoom;this.pan({x:(b-e*(g.x1+g.x2))/2,y:(c-e*(g.y1+g.y2))/2});this.trigger("pan");this.notify({type:"viewport"});return this},reset:function(){if(!this._private.panEnabled||!this._private.zoomEnabled){return this
}this.pan({x:0,y:0});if(this._private.maxZoom>1&&this._private.minZoom<1){this.zoom(1)}this.notify({type:"viewport"});return this}})})(cytoscape);(function(b){b.fn.collection=b.fn.eles=function(c,e){for(var d in c){var f=c[d];b.Collection.prototype[d]=f}};var a={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(h,d,g){var c=b.is.element(d)?d._private:d;var e=c.group;var f=g!=null?g:this.prefix[e]+this.id[e];if(h.getElementById(f).empty()){this.id[e]++}else{while(!h.getElementById(f).empty()){f=this.prefix[e]+(++this.id[e])
}}return f}};b.Element=function(d,f,h){if(!(this instanceof b.Element)){return new b.Element(d,f,h)}var o=this;h=(h===undefined||h?true:false);if(d===undefined||f===undefined||!b.is.core(d)){b.util.error("An element must have a core reference and parameters set");return}if(f.group!=="nodes"&&f.group!=="edges"){b.util.error("An element must be of type `nodes` or `edges`; you specified `"+f.group+"`");return}this.length=1;this[0]=this;this._private={cy:d,single:true,data:f.data||{},position:f.position||{},autoWidth:undefined,autoHeight:undefined,listeners:[],group:f.group,style:{},rstyle:{},removed:true,selected:f.selected?true:false,selectable:f.selectable===undefined?true:(f.selectable?true:false),locked:f.locked?true:false,grabbed:false,grabbable:f.grabbable===undefined?true:(f.grabbable?true:false),active:false,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};
if(f.renderedPosition){var p=f.renderedPosition;var j=d.pan();var m=d.zoom();this._private.position={x:(p.x-j.x)/m,y:(p.y-j.y)/m}}if(b.is.string(f.classes)){var e=f.classes.split(/\s+/);for(var g=0,c=e.length;g<c;g++){var k=e[g];if(!k||k===""){continue}o._private.classes[k]=true}}if(h===undefined||h){this.restore()}};b.Collection=function(h,c){if(!(this instanceof b.Collection)){return new b.Collection(h,c)}if(h===undefined||!b.is.core(h)){b.util.error("A collection must have a reference to the core");
return}var d={};var f=[];var p=false;if(!c){c=[]}else{if(c.length>0&&b.is.plainObject(c[0])&&!b.is.element(c[0])){p=true;var u=[];var j={};for(var o=0,g=c.length;o<g;o++){var s=c[o];if(s.data==null){s.data={}}var m=s.data;if(m.id==null){m.id=a.generate(h,s)}else{if(h.getElementById(m.id).length!=0||j[m.id]){continue}}var t=new b.Element(h,s,false);u.push(t);j[m.id]=true}c=u}}for(var o=0,g=c.length;o<g;o++){var k=c[o];if(!k){continue}var e=k._private.data.id;if(!d[e]){d[e]=k;f.push(k)}}for(var o=0,g=f.length;
o<g;o++){this[o]=f[o]}this.length=f.length;this._private={cy:h,ids:d};if(p){this.restore()}};b.elefn=b.elesfn=b.Element.prototype=b.Collection.prototype;b.elesfn.cy=function(){return this._private.cy};b.elesfn.element=function(){return this[0]};b.elesfn.collection=function(){if(b.is.collection(this)){return this}else{return new b.Collection(this._private.cy,[this])}};b.elesfn.json=function(){var g=this.element();if(g==null){return undefined}var h=g._private;var f=b.util.copy({data:h.data,position:h.position,group:h.group,bypass:h.bypass,removed:h.removed,selected:h.selected,selectable:h.selectable,locked:h.locked,grabbed:h.grabbed,grabbable:h.grabbable,classes:"",scratch:h.scratch});
var e=[];for(var c in h.classes){e.push(c)}for(var d=0;d<e.length;d++){var c=e[d];f.classes+=c+(d<e.length-1?" ":"")}return f};b.elesfn.restore=function(t){var s=this;var I=[];var e=s.cy();if(t===undefined){t=true}var o=[];var w=0;var d=0;for(var F=0,B=s.length;F<B;F++){var m=s[F];if(m.isNode()){o.unshift(m);w++}else{o.push(m);d++}}for(var F=0,B=o.length;F<B;F++){var m=o[F];if(!m.removed()){continue}var p=m._private;var J=p.data;if(J.id===undefined){J.id=a.generate(e,m)}else{if(b.is.emptyString(J.id)||!b.is.string(J.id)){continue
}else{if(e.getElementById(J.id).length!=0){continue}}}var u=J.id;if(m.isEdge()){var g=m;var v=["source","target"];var z=v.length;for(var C=0;C<z;C++){var c=v[C];var K=J[c];if(K==null||K===""){continue}else{if(e.getElementById(K).empty()){continue}}}var h=e.getElementById(J.source);var E=e.getElementById(J.target);h._private.edges.push(g);E._private.edges.push(g)}p.ids={};p.ids[J.id]=m;p.removed=false;e.addToPool(m);I.push(m)}for(var F=0;F<w;F++){var A=o[F];var J=A._private.data;var u=J.id;var D=A._private.data.parent;
var f=D!=null;if(f){var k=e.getElementById(D);if(k.empty()){delete J.parent}else{var G=false;var H=k;while(!H.empty()){if(A.same(H)){G=true;delete J.parent;break}H=H.parent()}if(!G){k[0]._private.children.push(A)}}}}I=new b.Collection(e,I);if(I.length>0){I.updateStyle(false);I.connectedNodes().updateStyle(t);if(t){I.rtrigger("add")}else{I.trigger("add")}}return s};b.elesfn.removed=function(){var c=this[0];return c&&c._private.removed};b.elesfn.inside=function(){var c=this[0];return c&&!c._private.removed
};b.elesfn.remove=function(p){var o=this;var A=[];var C=[];var e={};var c=o._private.cy;if(p===undefined){p=true}function B(E){var l=E._private.edges;for(var D=0;D<l.length;D++){k(l[D])}}function h(E){var D=E._private.children;for(var l=0;l<D.length;l++){k(D[l])}}function k(i){var l=e[i.id()];if(l){return}else{e[i.id()]=true}if(i.isNode()){C.push(i);B(i);h(i)}else{C.unshift(i)}}for(var w=0,s=o.length;w<s;w++){var j=o[w];k(j)}function m(F,E){var i=F._private.edges;for(var l=0;l<i.length;l++){var D=i[l];
if(E===D){i.splice(l,1);break}}}for(var w=0;w<C.length;w++){var j=C[w];j._private.removed=true;c.removeFromPool(j);A.push(j);if(j.isEdge()){var f=j.source()[0];var z=j.target()[0];m(f,j);m(z,j)}}var v=new b.Collection(this.cy(),A);if(v.size()>0){if(p){this.cy().notify({type:"remove",collection:v})}v.trigger("remove")}var d={};for(var w=0;w<C.length;w++){var j=C[w];var t=j._private.group==="nodes";var u=j._private.data.parent;if(t&&u!==undefined&&!d[u]){d[u]=true;var g=c.getElementById(u);if(g&&g.length!==0&&!g._private.removed&&g.children().not(":removed").length===0){g.updateStyle()
}}}return this}})(cytoscape);(function(a){a.fn.eles({animated:function(){var b=this[0];if(b){return b._private.animation.current.length>0}},clearQueue:function(){for(var b=0;b<this.length;b++){var c=this[b];c._private.animation.queue=[]}return this},delay:function(c,b){this.animate({delay:c},{duration:c,complete:b});return this},animate:function(j,e){var c=+new Date;var d=this._private.cy;var b=d.style();if(e===undefined){e={}}if(e.duration===undefined){e.duration=400}switch(e.duration){case"slow":e.duration=600;
break;case"fast":e.duration=200;break}if(j==null||(j.position==null&&j.css==null&&j.delay==null)){return this}if(j.css){j.css=b.getValueStyle(j.css)}for(var h=0;h<this.length;h++){var l=this[h];var k=l._private.position;var g={x:k.x,y:k.y};var f=b.getValueStyle(l);if(l.animated()&&(e.queue===undefined||e.queue)){q=l._private.animation.queue}else{q=l._private.animation.current}q.push({properties:j,duration:e.duration,params:e,callTime:c,startPosition:g,startStyle:f})}d.addToAnimationPool(this);return this
},stop:function(f,h){for(var e=0;e<this.length;e++){var c=this[e];var b=c._private.animation.current;for(var d=0;d<b.length;d++){var g=b[d];if(h){g.duration=0}}if(f){c._private.animation.queue=[]}}this.cy().notify({collection:this,type:"draw"});return this}})})(cytoscape);(function(a){a.fn.eles({addClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<g.length;f++){var b=g[f];if(a.is.emptyString(b)){continue}for(var d=0;d<c.length;d++){var h=c[d];var e=h._private.classes[b];h._private.classes[b]=true;
if(!e){k.push(h)}}}if(k.length>0){new a.Collection(this._private.cy,k).updateStyle()}c.trigger("class");return c},hasClass:function(b){var c=this[0];return c!=null&&c._private.classes[b]},toggleClass:function(h,g){var b=h.split(/\s+/);var o=this;var e=[];for(var f=0,k=o.length;f<k;f++){var p=o[f];for(var c=0;c<b.length;c++){var m=b[c];if(a.is.emptyString(m)){continue}var d=p._private.classes[m];var l=g||(g===undefined&&!d);if(l){p._private.classes[m]=true;if(!d){e.push(p)}}else{p._private.classes[m]=false;
if(d){e.push(p)}}}}if(e.length>0){new a.Collection(this._private.cy,e).updateStyle()}o.trigger("class");return o},removeClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<c.length;f++){var h=c[f];for(var d=0;d<g.length;d++){var b=g[d];if(!b||b===""){continue}var e=h._private.classes[b];delete h._private.classes[b];if(e){k.push(h)}}}if(k.length>0){new a.Collection(c._private.cy,k).updateStyle()}c.trigger("class");return c}})})(cytoscape);(function(a){a.fn.eles({allAre:function(b){return this.filter(b).length===this.length
},is:function(b){return this.filter(b).length>0},same:function(b){b=this.cy().collection(b);if(this.length!==b.length){return false}return this.intersect(b).length===this.length},anySame:function(b){b=this.cy().collection(b);return this.intersect(b).length>0},allAreNeighbors:function(b){b=this.cy().collection(b);return this.neighborhood().intersect(b).length===b.length}})})(cytoscape);(function(b){var a=1.4;var c=1;b.fn.eles({updateStyle:function(d){var f=this._private.cy;var e=f.style();d=d||d===undefined?true:false;
e.apply(this);if(d){this.rtrigger("style")}else{this.trigger("style")}return this},updateMappers:function(d){var h=this._private.cy;var f=h.style();d=d||d===undefined?true:false;for(var e=0;e<this.length;e++){var g=this[e];f.apply(g)}if(d){this.rtrigger("style")}else{this.trigger("style")}return this},data:b.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),removeData:b.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),batchData:b.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:b.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:b.define.removeData({field:"scratch",triggerEvent:false}),rscratch:b.define.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:b.define.removeData({field:"rscratch",triggerEvent:false}),id:function(){var d=this[0];
if(d){return d._private.data.id}},position:b.define.data({field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"rtrigger",allowGetting:true,validKeys:["x","y"]}),positions:function(h){if(b.is.plainObject(h)){this.position(h)}else{if(b.is.fn(h)){var e=h;for(var d=0;d<this.length;d++){var f=this[d];var h=e.apply(f,[d,f]);if(h){var g=f._private.position;g.x=h.x;g.y=h.y}}this.rtrigger("position")}}return this},renderedPosition:function(f){var e=this[0];
var j=this.cy();var d=j.zoom();var h=j.pan();if(e&&e.isNode()){var i=e._private.position;var g={x:i.x*d+h.x,y:i.y*d+h.y};if(f===undefined){return g}else{return g[f]}}},renderedCss:function(f){var e=this[0];if(e){var d=e.cy().style().getRenderedStyle(e);if(f===undefined){return d}else{return d[f]}}},css:function(d,h){var f=this.cy().style();if(b.is.plainObject(d)){var e=d;f.applyBypass(this,e);this.rtrigger("style")}else{if(b.is.string(d)){if(h===undefined){var g=this[0];if(g){return g._private.style[d].strValue
}else{return}}else{f.applyBypass(this,d,h);this.rtrigger("style")}}else{if(d===undefined){var g=this[0];if(g){return f.getRawStyle(g)}else{return}}}}return this},removeCss:function(){var f=this.cy().style();var d=this;for(var e=0;e<d.length;e++){var g=d[e];f.removeAllBypasses(g)}this.rtrigger("style")},show:function(){this.css("visibility","visible");return this},hide:function(){this.css("visibility","hidden");return this},visible:function(){var h=this[0];if(h){if(h.css("visibility")!=="visible"){return false
}if(h.isNode()){var e=h.parents();for(var f=0;f<e.length;f++){var g=e[f];var d=g.css("visibility");if(d!=="visible"){return false}}return true}else{if(h.isEdge()){var j=h.source();var k=h.target();return j.visible()&&k.visible()}}}},hidden:function(){var d=this[0];if(d){return !this.visible()}},width:function(){var e=this[0];if(e){var d=this._private.style.width;return d.strValue==="auto"?e._private.autoWidth:d.pxValue}},outerWidth:function(){var g=this[0];if(g){var f=this._private.style;var e=f.width.strValue==="auto"?g._private.autoWidth:f.width.pxValue;
var d=f["border-width"]?f["border-width"].pxValue*a+c:0;return e+d}},renderedWidth:function(){var e=this[0];if(e){var d=this.width();return d*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var d=this.outerWidth();return d*this.cy().zoom()}},height:function(){var e=this[0];if(e&&e.isNode()){var d=this._private.style.height;return d.strValue==="auto"?e._private.autoHeight:d.pxValue}},outerHeight:function(){var g=this[0];if(g){var f=this._private.style;var d=f.height.strValue==="auto"?g._private.autoHeight:f.height.pxValue;
var e=f["border-width"]?f["border-width"].pxValue*a+c:0;return d+e}},renderedHeight:function(){var e=this[0];if(e){var d=this.height();return d*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e){var d=this.outerHeight();return d*this.cy().zoom()}},offset:function(){var g=this[0];if(g&&g.isNode()){var j={x:g._private.position.x,y:g._private.position.y};var d=g.parents();for(var e=0;e<d.length;e++){var f=d[e];var h=f._private.position;j.x+=h.x;j.y+=h.y}return j}},renderedOffset:function(){var e=this[0];
if(e&&e.isNode()){var g=this.offset();var h=this.cy();var d=h.zoom();var f=h.pan();return{x:g.x*d+f.x,y:g.y*d+f.y}}},boundingBox:function(e){var L=this;if(!e||(b.is.elementOrCollection(e)&&e.length===0)){L=this}else{if(b.is.string(e)){L=this.filter(e)}else{if(b.is.elementOrCollection(e)){L=e}}}var p=Infinity;var o=-Infinity;var X=Infinity;var V=-Infinity;for(var T=0;T<L.length;T++){var W=L[T];var D,C,m,l,I,H;if(W.isNode()){var A=W._private.position;I=A.x;H=A.y;var J=W.outerWidth();var E=J/2;var U=W.outerHeight();
var N=U/2;D=I-E;C=I+E;m=H-N;l=H+N;p=D<p?D:p;o=C>o?C:o;X=m<X?m:X;V=l>V?l:V}else{var B=W.source()[0]._private.position;var d=W.target()[0]._private.position;var F=W._private.rstyle;I=F.labelX;H=F.labelY;D=B.x;C=d.x;m=B.y;l=d.y;if(D>C){var f=D;D=C;C=f}if(m>l){var f=m;m=l;l=f}p=D<p?D:p;o=C>o?C:o;X=m<X?m:X;V=l>V?l:V;var k=F.bezierPts||[];var J=W._private.style.width.value;for(var S=0;S<k.length;S++){var R=k[S];p=R.x-J<p?R.x-J:p;o=R.x+J>o?R.x+J:o;X=R.y-J<X?R.y-J:X;V=R.y+J>V?R.y+J:V}}var Q=W._private.style;
var P=Q.content.value;var s=Q["font-size"];var z=Q["text-halign"];var K=Q["text-valign"];var g=W._private.rstyle.labelWidth;if(P&&s&&g!=undefined&&z&&K){var G=s.value;var v=g;var O,M,u,t;switch(z.value){case"left":O=D-v;M=D;break;case"center":O=I-v/2;M=I+v/2;break;case"right":O=C;M=C+v;break}if(W.isEdge()){O=I-v/2;M=I+v/2}switch(K.value){case"top":u=m-G;t=m;break;case"center":u=H-G/2;t=H+G/2;break;case"bottom":u=l;t=l+G;break}if(W.isEdge()){u=H-G/2;t=H+G/2}p=O<p?O:p;o=M>o?M:o;X=u<X?u:X;V=t>V?t:V}}return{x1:p,x2:o,y1:X,y2:V,w:o-p,h:V-X}
}})})(cytoscape);(function(b){function a(d){return function(){var f=this;if(f.length===0){return}if(f.isNode()&&!f.removed()){var k=0;var j=f[0];var e=j._private.edges;for(var g=0;g<e.length;g++){var h=e[g];k+=d(j,h)}return k}else{return}}}b.fn.eles({degree:a(function(e,d){if(d.source().same(d.target())){return 2}else{return 1}}),indegree:a(function(e,d){if(d.target().same(e)){return 1}else{return 0}}),outdegree:a(function(e,d){if(d.source().same(e)){return 1}else{return 0}})});function c(e,d){return function(){var g=undefined;
var f=this.nodes();for(var h=0;h<f.length;h++){var j=f[h];var k=j[e]();if(k!==undefined&&(g===undefined||d(k,g))){g=k}}return g}}b.fn.eles({minDegree:c("degree",function(e,d){return e<d}),maxDegree:c("degree",function(e,d){return e>d}),minIndegree:c("indegree",function(e,d){return e<d}),maxIndegree:c("indegree",function(e,d){return e>d}),minOutdegree:c("outdegree",function(e,d){return e<d}),maxOutdegree:c("outdegree",function(e,d){return e>d})});b.fn.eles({totalDegree:function(){var f=0;var d=this.nodes();
for(var e=0;e<d.length;e++){f+=d[e].degree()}return f}})})(cytoscape);(function(a){a.fn.eles({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),rtrigger:function(b,c){this.cy().notify({type:b,collection:this.filter(function(){return !this.removed()})});this.trigger(b,c);return this}});a.elesfn.bind=a.elesfn.on;a.elesfn.unbind=a.elesfn.off;a.define.event.aliasesOn(a.elesfn)})(cytoscape);(function(a){a.fn.eles({isNode:function(){return this.group()==="nodes"
},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var b=this[0];if(b){return b._private.group}}})})(cytoscape);(function(a){a.fn.eles({each:function(d){if(a.is.fn(d)){for(var c=0;c<this.length;c++){var e=this[c];var b=d.apply(e,[c,e]);if(b===false){break}}}return this},toArray:function(){var c=[];for(var b=0;b<this.length;b++){c.push(this[b])}return c},slice:function(f,b){var e=[];var c=this.length;
if(b==null){b=c}if(f<0){f=c+f}for(var d=f;d>=0&&d<b&&d<c;d++){e.push(this[d])}return new a.Collection(this.cy(),e)},size:function(){return this.length},eq:function(b){return this[b]},empty:function(){return this.length===0},nonempty:function(){return !this.empty()}})})(cytoscape);(function(b){function c(d){return function(){var e=arguments;if(e.length===2){var j=e[0];var g=e[1];this.bind(d.event,j,g)}else{if(e.length===1){var g=e[0];this.bind(d.event,g)}else{if(e.length===0){for(var f=0;f<this.length;
f++){var h=this[f];if(!d.ableField||h._private[d.ableField]){h._private[d.field]=d.value}}this.updateStyle();this.trigger(d.event)}}}return this}}function a(d){b.elesfn[d.field]=function(){var e=this[0];if(e){return e._private[d.field]}};b.elesfn[d.on]=c({event:d.on,field:d.field,ableField:d.ableField,value:true});b.elesfn[d.off]=c({event:d.off,field:d.field,ableField:d.ableField,value:false})}a({field:"locked",on:"lock",off:"unlock"});a({field:"grabbable",on:"grabify",off:"ungrabify"});a({field:"selected",ableField:"selectable",on:"select",off:"unselect"});
a({field:"selectable",on:"selectify",off:"unselectify"});b.elesfn.grabbed=function(){var d=this[0];if(d){return d._private.grabbed}};a({field:"active",on:"activate",off:"unactivate"});b.elesfn.inactive=function(){var d=this[0];if(d){return !d._private.active}}})(cytoscape);(function(b){b.fn.eles({nodes:function(e){return this.filter(function(g,f){return f.isNode()}).filter(e)},edges:function(e){return this.filter(function(g,f){return f.isEdge()}).filter(e)},filter:function(f){var j=this._private.cy;
if(b.is.fn(f)){var h=[];for(var e=0;e<this.length;e++){var g=this[e];if(f.apply(g,[e,g])){h.push(g)}}return new b.Collection(j,h)}else{if(b.is.string(f)||b.is.elementOrCollection(f)){return new b.Selector(f).filter(this)}else{if(f===undefined){return this}}}return new b.Collection(j)},not:function(h){var k=this._private.cy;if(!h){return this}else{if(b.is.string(h)){h=this.filter(h)}var j=[];for(var g=0;g<this.length;g++){var f=this[g];var e=h._private.ids[f.id()];if(!e){j.push(f)}}return new b.Collection(k,j)
}},intersect:function(m){var p=this;var i=this._private.cy;if(b.is.string(m)){var j=m;return this.filter(j)}var e=[];var l=this;var k=m;var o=this.length<m.length;var h=o?l._private.ids:k._private.ids;var g=o?k._private.ids:l._private.ids;for(var f in h){var s=g[f];if(s){e.push(s)}}return new b.Collection(i,e)},add:function(m){var o=this;var g=this._private.cy;if(!m){return this}if(b.is.string(m)){var h=m;m=g.elements(h)}var e=[];var f={};function l(i){if(!i){return}if(!f[i.id()]){e.push(i);f[i.id()]=true
}}for(var k=0;k<o.length;k++){var j=o[k];l(j)}for(var k=0;k<m.length;k++){var j=m[k];l(j)}return new b.Collection(g,e)}});b.fn.eles({neighborhood:function(m){var e=[];var l=this._private.cy;var f=this.nodes();for(var s=0;s<f.length;s++){var k=f[s];var h=k.connectedEdges();for(var p=0;p<h.length;p++){var g=h[p];var o=g.connectedNodes().not(k);if(o.length>0){e.push(o[0])}e.push(g[0])}}return(new b.Collection(l,e)).filter(m)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)
},openNeighborhood:function(e){return this.neighborhood(e)}});b.fn.eles({source:d({attr:"source"}),target:d({attr:"target"})});function d(e){return function(f){var h=[];var g=this.edges();var o=this._private.cy;for(var j=0;j<g.length;j++){var k=g[j];var m=k._private.data[e.attr];var l=o.getElementById(m);if(l.length>0){h.push(l)}}return new b.Collection(o,h).filter(f)}}b.fn.eles({edgesWith:a(),edgesTo:a({thisIs:"source"})});function a(e){return function(t){var f=[];var j=this._private.cy;var g=e||{};
if(b.is.string(t)){t=j.$(t)}var l=t.connectedEdges();var u=this._private.ids;for(var m=0;m<l.length;m++){var h=l[m];var o;var s=h._private.data;if(g.thisIs){var k=s[g.thisIs];o=u[k]}else{o=u[s.source]||u[s.target]}if(o){f.push(h)}}return new b.Collection(j,f)}}b.fn.eles({connectedEdges:function(l){var e=[];var k=this._private.cy;var f=this.nodes();for(var p=0;p<f.length;p++){var h=f[p];var o=h._private.edges;for(var m=0;m<o.length;m++){var g=o[m];e.push(g)}}return new b.Collection(k,e).filter(l)},connectedNodes:function(e){var j=[];
var k=this._private.cy;var f=this.edges();for(var g=0;g<f.length;g++){var h=f[g];j.push(h.source()[0]);j.push(h.target()[0])}return new b.Collection(k,j).filter(e)},parallelEdges:c(),codirectedEdges:c({codirected:true}),parallelIndex:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var l=0;for(var j=0;j<m.length;j++){var h=m[j];var p=h===g;if(p){return l}var o=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;
var k=o||f;if(k){l++}}}},parallelSize:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var j=0;for(var k=0;k<m.length;k++){var h=m[k];var o=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var l=o||f;if(l){j++}}return j}}});function c(f){var e={codirected:false};f=b.util.extend({},e,f);return function(E){var l=this._private.cy;
var w=[];var k=this.edges();var z=f;for(var F=0;F<k.length;F++){var v=k[F];var G=v.source()[0];var t=G.id();var C=v.target()[0];var o=C.id();var B=G._private.edges;for(var D=0;D<B.length;D++){var u=B[D];var g=u._private.data;var m=g.target;var s=g.source;var h=m===o&&s===t;var A=t===m&&o===s;if((z.codirected&&h)||(!z.codirected&&(h||A))){w.push(u)}}}return new b.Collection(l,w).filter(E)}}b.fn.eles({parent:function(e){var f=[];var k=this._private.cy;for(var g=0;g<this.length;g++){var j=this[g];var h=k.getElementById(j._private.data.parent);
if(h.size()>0){f.push(h)}}return new b.Collection(k,f).filter(e)},parents:function(f){var g=[];var e=this.parent();while(e.nonempty()){for(var h=0;h<e.length;h++){var j=e[h];g.push(j)}e=e.parent()}return new b.Collection(this.cy(),g).filter(f)},children:function(e){var g=[];for(var f=0;f<this.length;f++){var h=this[f];g=g.concat(h._private.children)}return new b.Collection(this.cy(),g).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];
if(e){return e._private.children.length!==0}},isChild:function(){var e=this[0];if(e){return e._private.data.parent!==undefined&&e.parent().length!==0}},descendants:function(e){var f=[];function g(h){for(var j=0;j<h.length;j++){var k=h[j];f.push(k);if(k.children().nonempty()){g(k.children())}}}g(this.children());return new b.Collection(this.cy(),f).filter(e)}})})(cytoscape);(function($$){$$.fn.selector=function(map,options){for(var name in map){var fn=map[name];$$.Selector.prototype[name]=fn}};$$.Selector=function(onlyThisGroup,selector){if(!(this instanceof $$.Selector)){return new $$.Selector(onlyThisGroup,selector)
}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;onlyThisGroup=undefined}var self=this;self._private={selectorText:null,invalid:true};function newQuery(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}if(!selector||($$.is.string(selector)&&selector.match(/^\s*$/))){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self[0].group=onlyThisGroup;
self.length=1}}else{if($$.is.element(selector)){var collection=new $$.Collection(self.cy(),[selector]);self[0]=newQuery();self[0].collection=collection;self.length=1}else{if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else{if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else{if($$.is.string(selector)){var metaChar="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";var variable="(?:[\\w-]|(?:\\\\"+metaChar+"))+";
var comparatorOp="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var boolOp="\\?|\\!|\\^";var string="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var number=$$.util.regex.number;var value=string+"|"+number;var meta="degree|indegree|outdegree";var separator="\\s*,\\s*";var className=variable;var descendant="\\s+";var child="\\s+>\\s+";var subject="\\$";var id=variable;function cleanMetaChars(str){return str.replace(new RegExp("\\\\("+metaChar+")","g"),"\1")}var ops=comparatorOp.split("|");for(var i=0;i<ops.length;
i++){var op=ops[i];comparatorOp+="|@"+op}var currentSubject=null;var exprs={group:{query:true,regex:"(node|edge|\\*)",populate:function(group){this.group=group=="*"?group:group+"s"}},state:{query:true,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:active|:inactive|:touch)",populate:function(state){this.colonSelectors.push(state)}},id:{query:true,regex:"\\#("+id+")",populate:function(id){this.ids.push(cleanMetaChars(id))
}},className:{query:true,regex:"\\.("+className+")",populate:function(className){this.classes.push(cleanMetaChars(className))}},dataExists:{query:true,regex:"\\[\\s*("+variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})}},dataCompare:{query:true,regex:"\\[\\s*("+variable+")\\s*("+comparatorOp+")\\s*("+value+")\\s*\\]",populate:function(variable,comparatorOp,value){this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{query:true,regex:"\\[\\s*("+boolOp+")\\s*("+variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})
}},metaCompare:{query:true,regex:"\\{\\s*("+meta+")\\s*("+comparatorOp+")\\s*("+number+")\\s*\\}",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:number})}},nextQuery:{separator:true,regex:separator,populate:function(){self[++i]=newQuery();currentSubject=null}},child:{separator:true,regex:child,populate:function(){var childQuery=newQuery();childQuery.parent=this;childQuery.subject=currentSubject;self[i]=childQuery}},descendant:{separator:true,regex:descendant,populate:function(){var descendantQuery=newQuery();
descendantQuery.ancestor=this;descendantQuery.subject=currentSubject;self[i]=descendantQuery}},subject:{modifier:true,regex:subject,populate:function(){if(currentSubject!=null&&this.subject!=this){$$.util.error("Redefinition of subject in selector `%s`",selector);return false}currentSubject=this;this.subject=this},}};var j=0;for(var name in exprs){exprs[j]=exprs[name];exprs[j].name=name;j++}exprs.length=j;self._private.selectorText=selector;var remaining=selector;var i=0;function consumeExpr(expectation){var expr;
var match;var name;for(var j=0;j<exprs.length;j++){var e=exprs[j];var n=e.name;if($$.is.fn(expectation)&&!expectation(n,e)){continue}var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);break}}return{expr:expr,match:match,name:name}}function consumeWhitespace(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}}self[0]=newQuery();consumeWhitespace();
for(;;){var check=consumeExpr();if(check.expr==null){$$.util.error("The selector `%s` is invalid",selector);return}else{var args=[];for(var j=1;j<check.match.length;j++){args.push(check.match[j])}var ret=check.expr.populate.apply(self[i],args);if(ret===false){return}}if(remaining.match(/^\s*$/)){break}}self.length=i+1;for(j=0;j<self.length;j++){var query=self[j];if(query.subject!=null){for(;;){if(query.subject==query){break}if(query.parent!=null){var parent=query.parent;var child=query;child.parent=null;
parent.child=child;query=parent}else{if(query.ancestor!=null){var ancestor=query.ancestor;var descendant=query;descendant.ancestor=null;ancestor.descendant=descendant;query=ancestor}else{$.error("When adjusting references for the selector `%s`, neither parent nor ancestor was found");break}}}self[j]=query.subject}}if(onlyThisGroup!=null){for(var j=0;j<self.length;j++){if(self[j].group!=null&&self[j].group!=onlyThisGroup){$.error("Group `%s` conflicts with implicit group `%s` in selector `%s`",self[j].group,onlyThisGroup,selector);
return}self[j].group=onlyThisGroup}}}else{$.error("A selector must be created from a string; found %o",selector);return}}}}}self._private.invalid=false};$$.selfn=$$.Selector.prototype;$$.selfn.size=function(){return this.length};$$.selfn.eq=function(i){return this[i]};$$.selfn.find=function(){};$$.selfn.filter=function(collection,addLiveFunction){var self=this;var cy=collection.cy();if(self._private.invalid){return new $$.Collection(cy)}var queryMatches=function(query,element){if(query.group!=null&&query.group!="*"&&query.group!=element._private.group){return false
}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();
break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();
break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch);
break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){return false}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;allIdsMatch=allIdsMatch&&(id==actualId);if(!allIdsMatch){break}}if(!allIdsMatch){return false}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){return false}function operandsMatch(params){var allDataMatches=true;
for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;
break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)
}}if(!matches){allDataMatches=false;break}}return allDataMatches}var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){return false}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()
},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true}return false}});if(!allMetaMatches){return false}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){return false}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){return false}function confirmRelations(query,elements){if(query!=null){var matches=false;
elements=elements();for(var i=0;i<elements.size();i++){if(queryMatches(query,elements.eq(i))){matches=true;break}}return matches}else{return true}}if(!confirmRelations(query.parent,function(){return element.parent()})){return false}if(!confirmRelations(query.ancestor,function(){return element.parents()})){return false}if(!confirmRelations(query.child,function(){return element.children()})){return false}if(!confirmRelations(query.descendant,function(){return element.descendants()})){return false}return true
};var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(queryMatches(query,element)){return true}}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);return filteredCollection};$$.selfn.toString=$$.selfn.selector=function(){var str="";function clean(obj){if($$.is.string(obj)){return obj}return""}function queryToString(query){var str="";var group=clean(query.group);
str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}for(var j=0;j<query.meta.length;j++){var meta=query.meta[j];str+="{"+meta.field+clean(meta.operator)+clean(meta.value)+"}"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];
str+=sel}if(query.parent!=null){str=queryToString(query.parent)+" > "+str}if(query.ancestor!=null){str=queryToString(query.ancestor)+" "+str}if(query.child!=null){str+=" > "+queryToString(query.child)}if(query.descendant!=null){str+=" "+queryToString(query.descendant)}return str}for(var i=0;i<this.length;i++){var query=this[i];str+=queryToString(query);if(this.length>1&&i<this.length-1){str+=", "}}return str}})(cytoscape);(function(a){function b(c){}b.prototype.notify=function(c){};a("renderer","null",b)
})(cytoscape);(function(w){var v=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch;var l=function(){return Date.now()};var b={};var p={};var c=z.prototype;var o=400;var e=5,C=0,d=2,F=4,a=2;function z(G){this.data={select:[undefined,undefined,undefined,undefined,0],renderer:this,cy:G.cy,container:G.cy.container(),canvases:new Array(e),canvasRedrawReason:new Array(e),canvasNeedsRedraw:new Array(e),bufferCanvases:new Array(a)};this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:false,initialPan:[null,null],capture:false};
this.timeoutData={panTimeout:null};this.dragData={possibleDragElements:[]};this.touchData={start:null,capture:false,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:true,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};this.zoomData={freeToZoom:false,lastPointerX:null};this.redraws=0;this.init();for(var H=0;H<e;H++){this.data.canvases[H]=document.createElement("canvas");this.data.canvases[H].style.position="absolute";this.data.canvases[H].setAttribute("data-id","layer"+H);
this.data.canvases[H].style.zIndex=String(e-H);this.data.container.appendChild(this.data.canvases[H]);this.data.canvasRedrawReason[H]=new Array();this.data.canvasNeedsRedraw[H]=false}this.data.canvases[F].setAttribute("data-id","layer"+F+"-node");this.data.canvases[C].setAttribute("data-id","layer"+C+"-selectbox");this.data.canvases[d].setAttribute("data-id","layer"+d+"-drag");for(var H=0;H<a;H++){this.data.bufferCanvases[H]=document.createElement("canvas");this.data.bufferCanvases[H].style.position="absolute";
this.data.bufferCanvases[H].setAttribute("data-id","buffer"+H);this.data.bufferCanvases[H].style.zIndex=String(-H-1);this.data.bufferCanvases[H].style.visibility="visible";this.data.container.appendChild(this.data.bufferCanvases[H])}this.load()}z.prototype.notify=function(i){if(i.type=="add"||i.type=="remove"||i.type=="load"){this.updateNodesCache();this.updateEdgesCache()}if(i.type=="viewport"){this.data.canvasNeedsRedraw[C]=true;this.data.canvasRedrawReason[C].push("viewchange")}this.data.canvasNeedsRedraw[d]=true;
this.data.canvasRedrawReason[d].push("notify");this.data.canvasNeedsRedraw[F]=true;this.data.canvasRedrawReason[F].push("notify");this.redraws++;this.redraw()};z.prototype.png=function(){var G=this.data;if(this.data.container.clientHeight>0&&this.data.container.clientWidth>0){context=G.bufferCanvases[1].getContext("2d");context.globalCompositeOperation="copy";context.drawImage(G.canvases[4],0,0);context.globalCompositeOperation="source-over";context.drawImage(G.canvases[2],0,0);context.drawImage(G.canvases[0],0,0);
context=G.bufferCanvases[0].getContext("2d");context.globalCompositeOperation="copy";context.drawImage(G.bufferCanvases[1],0,0)}var i=this.data.bufferCanvases[0];return i.toDataURL("image/png")};z.prototype.load=function(){var Q=this;var O=function(ab,X,ac){if(!X){var Z=ab.parents();for(var aa=0;aa<Z.size();aa++){if(Z[aa]._private.selected){return}}}var ad=ab.descendants();for(var aa=0;aa<ad.size();aa++){if(X||!ad[aa]._private.selected){ad[aa]._private.rscratch.inDragLayer=true;ac.push(ad[aa]);for(var Y=0;
Y<ad[aa]._private.edges.length;Y++){ad[aa]._private.edges[Y]._private.rscratch.inDragLayer=true}}}};var R=function(Y,Z){Y._private.grabbed=true;Y._private.rscratch.inDragLayer=true;Z.push(Y);for(var X=0;X<Y._private.edges.length;X++){Y._private.edges[X]._private.rscratch.inDragLayer=true}};var V=function(ac,aa){var ab=ac;while(ab.parent().nonempty()){ab=ab.parent()[0]}if(ab==ac&&aa){return}var X=ab.descendants().add(ab);for(var Z=0;Z<X.size();Z++){X[Z]._private.rscratch.inDragLayer=aa;for(var Y=0;
Y<X[Z]._private.edges.length;Y++){X[Z]._private.edges[Y]._private.rscratch.inDragLayer=aa}}};z.prototype.nodeIsDraggable=function(X){if(X._private.style.opacity.value!=0&&X._private.style.visibility.value=="visible"&&!X._private.locked&&X._private.grabbable){return true}return false};Q.data.container.addEventListener("contextmenu",function(X){X.preventDefault()});Q.data.container.addEventListener("mousedown",function(aa){aa.preventDefault();Q.hoverData.capture=true;Q.hoverData.which=aa.which;var X=Q.data.cy;
var ad=Q.projectIntoViewport(aa.pageX,aa.pageY);var ae=Q.data.select;var Z=Q.findNearestElement(ad[0],ad[1],true);var ag=Q.hoverData.down;var ab=Q.dragData.possibleDragElements;var ac=new w.Event(aa,{type:"grab"});if(aa.which==3){if(Z){Z.activate();Z.trigger(new w.Event(aa,{type:"cxttapstart"}));Q.hoverData.down=Z;Q.hoverData.downTime=(new Date()).getTime();Q.hoverData.cxtDragged=false}}else{if(aa.which==1){if(Z){Z.activate()}if(Z!=null&&Q.nodeIsDraggable(Z)){if(Z._private.group=="nodes"&&Z._private.selected==false){ab=Q.dragData.possibleDragElements=[];
R(Z,ab);Z.trigger(ac);if(Z._private.style.width.value=="auto"||Z._private.style.height.value=="auto"){O(Z,true,ab)}V(Z,true)}if(Z._private.group=="nodes"&&Z._private.selected==true){ab=Q.dragData.possibleDragElements=[];var ah=false;var af=X.$("node:selected");for(var Y=0;Y<af.length;Y++){if(Q.nodeIsDraggable(af[Y])){R(af[Y],ab);if(!ah){Z.trigger(ac);ah=true}if(af[Y]._private.style.width.value=="auto"||af[Y]._private.style.height.value=="auto"){O(af[Y],false,ab)}V(af[Y],true)}}}Z.trigger(new w.Event(aa,{type:"mousedown"})).trigger(new w.Event(aa,{type:"tapstart"})).trigger(new w.Event(aa,{type:"vmousedown"}))
}else{if(Z==null){X.trigger(new w.Event(aa,{type:"mousedown"})).trigger(new w.Event(aa,{type:"tapstart"})).trigger(new w.Event(aa,{type:"vmousedown"}))}}Q.hoverData.down=Z;Q.hoverData.downTime=(new Date()).getTime();if(Z==null||Z.isEdge()){ae[4]=1;var ai=Math.max(0,o-(+new Date-Q.hoverData.downTime));clearTimeout(Q.bgActiveTimeout);Q.bgActiveTimeout=setTimeout(function(){if(Z){Z.unactivate()}Q.data.bgActivePosistion={x:ad[0],y:ad[1]};Q.data.canvasNeedsRedraw[C]=true;Q.data.canvasRedrawReason[C].push("bgactive");
Q.redraw()},ai)}}}ae[0]=ae[2]=ad[0];ae[1]=ae[3]=ad[1];Q.redraw()},false);window.addEventListener("mousemove",function(ao){var ae=false;var Z=Q.data.cy;var ad=Q.projectIntoViewport(ao.pageX,ao.pageY);var ai=Q.data.select;var ap=Q.findNearestElement(ad[0],ad[1],true);var ag=Q.hoverData.last;var ah=Q.hoverData.down;var al=[ad[0]-ai[2],ad[1]-ai[3]];var aj=Q.getCachedNodes();var Y=Q.getCachedEdges();var ab=Q.dragData.possibleDragElements;var ak=Q.hoverData.capture;var aa=ao.shiftKey;if(!ak){var af=Q.findContainerPageCoords();
if(ao.pageX>af[0]&&ao.pageX<af[0]+Q.data.container.clientWidth&&ao.pageY>af[1]&&ao.pageY<af[1]+Q.data.container.clientHeight){}else{return}}ae=true;var am=new w.Event(ao,{type:"mousemove"});if(ap!=null){ap.trigger(am)}else{if(ap==null){Z.trigger(am)}}if(Q.hoverData.which===3){var ac=new w.Event(ao,{type:"cxtdrag"});if(ah){ah.trigger(ac)}else{Z.trigger(ac)}Q.hoverData.cxtDragged=true}else{if(Q.hoverData.dragging){ae=true;if(Z.panningEnabled()){var X={x:al[0]*Z.zoom(),y:al[1]*Z.zoom()};Z.panBy(X)}ad=Q.projectIntoViewport(ao.pageX,ao.pageY)
}else{if(ai[4]==1&&(ah==null||ah.isEdge())&&(!Z.boxSelectionEnabled()||+new Date-Q.hoverData.downTime>=o)&&(Math.abs(ai[3]-ai[1])+Math.abs(ai[2]-ai[0])<4)&&Z.panningEnabled()){Q.hoverData.dragging=true;ai[4]=0}else{if(Z.boxSelectionEnabled()&&Math.pow(ai[2]-ai[0],2)+Math.pow(ai[3]-ai[1],2)>7&&ai[4]){clearTimeout(Q.bgActiveTimeout)}if(ah&&ah.isEdge()&&ah.active()){ah.unactivate()}if(ap!=ag){if(ag){ag.trigger(new w.Event(ao,{type:"mouseout"}))}if(ap){ap.trigger(new w.Event(ao,{type:"mouseover"}))}Q.hoverData.last=ap
}if(ah&&ah.isNode()&&Q.nodeIsDraggable(ah)){Q.dragData.didDrag=true;var aq=[];for(var an=0;an<ab.length;an++){if(ab[an]._private.group=="nodes"&&Q.nodeIsDraggable(ab[an])){ab[an]._private.position.x+=al[0];ab[an]._private.position.y+=al[1];aq.push(ab[an])}}(new w.Collection(Z,aq)).trigger(new w.Event(ao,{type:"drag"})).trigger(new w.Event(ao,{type:"position"}));if(ai[2]==ai[0]&&ai[3]==ai[1]){Q.data.canvasNeedsRedraw[F]=true;Q.data.canvasRedrawReason[F].push("Node(s) and edge(s) moved to drag layer")
}Q.data.canvasNeedsRedraw[d]=true;Q.data.canvasRedrawReason[d].push("Nodes dragged")}if(Z.boxSelectionEnabled()){Q.data.canvasNeedsRedraw[C]=true;Q.data.canvasRedrawReason[C].push("Mouse moved, redraw selection box")}ae=true}}}ai[2]=ad[0];ai[3]=ad[1];Q.redraw();if(ae){if(ao.stopPropagation){ao.stopPropagation()}if(ao.preventDefault){ao.preventDefault()}ao.cancelBubble=true;ao.returnValue=false;return false}},false);window.addEventListener("mouseup",function(ar){var al=Q.hoverData.capture;if(!al){return
}Q.hoverData.capture=false;var Y=Q.data.cy;var ad=Q.projectIntoViewport(ar.pageX,ar.pageY);var aj=Q.data.select;var at=Q.findNearestElement(ad[0],ad[1],true);var ak=Q.getCachedNodes();var X=Q.getCachedEdges();var ab=Q.dragData.possibleDragElements;var af=Q.hoverData.down;var aa=ar.shiftKey;Q.data.bgActivePosistion=undefined;clearTimeout(Q.bgActiveTimeout);if(af){af.unactivate()}if(Q.hoverData.which===3){var ac=new w.Event(ar,{type:"cxttapend"});if(af){af.trigger(ac)}else{Y.trigger(ac)}if(!Q.hoverData.cxtDragged){var ai=new w.Event(ar,{type:"cxttap"});
if(af){af.trigger(ai)}else{Y.trigger(ai)}}Q.hoverData.cxtDragged=false;Q.hoverData.which=null}else{if((af==null)&&!Q.dragData.didDrag&&!(Math.pow(aj[2]-aj[0],2)+Math.pow(aj[3]-aj[1],2)>7&&aj[4])&&!Q.hoverData.dragging){Y.$(":selected").unselect();if(ab.length>0){Q.data.canvasNeedsRedraw[F]=true;Q.data.canvasRedrawReason[F].push("De-select")}Q.dragData.possibleDragElements=ab=[]}if(Math.pow(aj[2]-aj[0],2)+Math.pow(aj[3]-aj[1],2)==0){if(at!=null){at.trigger(new w.Event(ar,{type:"click"})).trigger(new w.Event(ar,{type:"tap"})).trigger(new w.Event(ar,{type:"vclick"}))
}else{if(at==null){Y.trigger(new w.Event(ar,{type:"click"})).trigger(new w.Event(ar,{type:"tap"})).trigger(new w.Event(ar,{type:"vclick"}))}}}if(at!=null){at.trigger(new w.Event(ar,{type:"mouseup"})).trigger(new w.Event(ar,{type:"tapend"})).trigger(new w.Event(ar,{type:"vmouseup"}))}else{if(at==null){Y.trigger(new w.Event(ar,{type:"mouseup"})).trigger(new w.Event(ar,{type:"tapend"})).trigger(new w.Event(ar,{type:"vmouseup"}))}}if(at==af&&!Q.dragData.didDrag){if(at!=null&&at._private.selectable){if(!aa){Y.$(":selected").unselect()
}if(at.selected()){at.unselect()}else{at.select()}V(at,false);Q.data.canvasNeedsRedraw[F]=true;Q.data.canvasRedrawReason[F].push("sglslct")}}else{if(at==af){if(at!=null&&at._private.grabbed){var am=Y.$(":grabbed");for(var ap=0;ap<am.length;ap++){var ag=am[ap];ag._private.grabbed=false;var ah=ag._private.edges;for(var ao=0;ao<ah.length;ao++){ah[ao]._private.rscratch.inDragLayer=false}V(ag,false)}var aq=new w.Event(ar,{type:"free"});am.trigger(aq)}}}if(Y.boxSelectionEnabled()&&Math.pow(aj[2]-aj[0],2)+Math.pow(aj[3]-aj[1],2)>7&&aj[4]){if(!aa){Y.$(":selected").unselect()
}var Z=[];var ae=Q.getAllInBox(aj[0],aj[1],aj[2],aj[3]);var an=new w.Event(ar,{type:"select"});for(var ap=0;ap<ae.length;ap++){if(ae[ap]._private.selectable){ab.push(ae[ap]);Z.push(ae[ap])}}(new w.Collection(Y,Z)).select();if(ae.length>0){Q.data.canvasNeedsRedraw[F]=true;Q.data.canvasRedrawReason[F].push("Selection")}}Q.hoverData.dragging=false;if(!aj[4]){var aq=new w.Event(ar,{type:"free"});for(var ap=0;ap<ab.length;ap++){if(ab[ap]._private.group=="nodes"){ab[ap]._private.rscratch.inDragLayer=false;
var ah=ab[ap]._private.edges;for(var ao=0;ao<ah.length;ao++){ah[ao]._private.rscratch.inDragLayer=false}V(ab[ap],false)}else{if(ab[ap]._private.group=="edges"){ab[ap]._private.rscratch.inDragLayer=false}}}if(af){af.trigger(aq)}Q.data.canvasNeedsRedraw[d]=true;Q.data.canvasRedrawReason[d].push("Node/nodes back from drag");Q.data.canvasNeedsRedraw[F]=true;Q.data.canvasRedrawReason[F].push("Node/nodes back from drag")}}aj[4]=0;Q.hoverData.down=null;Q.data.canvasNeedsRedraw[C]=true;Q.data.canvasRedrawReason[C].push("Mouse up, selection box gone");
Q.dragData.didDrag=false;Q.redraw()},false);var L=function(Z){var ab=Q.data.cy;var aa=Q.projectIntoViewport(Z.pageX,Z.pageY);var Y=[aa[0]*ab.zoom()+ab.pan().x,aa[1]*ab.zoom()+ab.pan().y];if(Q.zoomData.freeToZoom){Z.preventDefault();var X=Z.wheelDeltaY/1000||Z.detail/-8.4;if(ab.panningEnabled()&&ab.zoomingEnabled()){ab.zoom({level:ab.zoom()*Math.pow(10,X),position:{x:Y[0],y:Y[1]}})}}};Q.data.container.addEventListener("mousewheel",L,true);Q.data.container.addEventListener("DOMMouseScroll",L,true);
Q.data.container.addEventListener("MozMousePixelScroll",function(X){if(Q.zoomData.freeToZoom){X.preventDefault()}},false);Q.data.container.addEventListener("mousemove",function(X){if(Q.zoomData.lastPointerX&&Q.zoomData.lastPointerX!=X.pageX&&!Q.zoomData.freeToZoom){Q.zoomData.freeToZoom=true}Q.zoomData.lastPointerX=X.pageX},false);Q.data.container.addEventListener("mouseout",function(X){Q.zoomData.freeToZoom=false;Q.zoomData.lastPointerX=null},false);Q.data.container.addEventListener("mouseout",function(X){Q.data.cy.trigger(new w.Event(X,{type:"mouseout"}))
},false);Q.data.container.addEventListener("mouseover",function(X){Q.data.cy.trigger(new w.Event(X,{type:"mouseover"}))},false);var G,M,S,W;var T;var J,I;var K,U;var N=Q.data.container.clientWidth,P=Q.data.container.clientHeight;var i;function H(Y,aa,X,Z){return Math.sqrt((X-Y)*(X-Y)+(Z-aa)*(Z-aa))}Q.data.container.addEventListener("touchstart",function(at){at.preventDefault();Q.touchData.capture=true;Q.data.bgActivePosistion=undefined;var aa=Q.data.cy;var al=Q.getCachedNodes();var Z=Q.getCachedEdges();
var Y=Q.touchData.now;var ap=Q.touchData.earlier;if(at.touches[0]){var ad=Q.projectIntoViewport(at.touches[0].pageX,at.touches[0].pageY);Y[0]=ad[0];Y[1]=ad[1]}if(at.touches[1]){var ad=Q.projectIntoViewport(at.touches[1].pageX,at.touches[1].pageY);Y[2]=ad[0];Y[3]=ad[1]}if(at.touches[2]){var ad=Q.projectIntoViewport(at.touches[2].pageX,at.touches[2].pageY);Y[4]=ad[0];Y[5]=ad[1]}if(at.touches[1]){function ar(av){for(var aw=0;aw<av.length;aw++){av[aw]._private.grabbed=false;av[aw]._private.rscratch.inDragLayer=false;
if(av[aw].active()){av[aw].unactivate()}}}ar(al);ar(Z);var ac=Q.findContainerPageCoords();U=ac[1];K=ac[0];G=at.touches[0].pageX-K;M=at.touches[0].pageY-U;S=at.touches[1].pageX-K;W=at.touches[1].pageY-U;i=0<=G&&G<=N&&0<=S&&S<=N&&0<=M&&M<=P&&0<=W&&W<=P;var ak=aa.pan();var X=aa.zoom();T=H(G,M,S,W);J=[(G+S)/2,(M+W)/2];I=[(J[0]-ak.x)/X,(J[1]-ak.y)/X];if(T<100){var af=Q.findNearestElement(Y[0],Y[1],true);var ae=Q.findNearestElement(Y[2],Y[3],true);var ab=new w.Event(at,{type:"cxttapstart"});if(af&&af.isNode()){af.activate().trigger(ab);
Q.touchData.start=af}else{if(ae&&ae.isNode()){ae.activate().trigger(ab);Q.touchData.start=ae}else{aa.trigger(ab);Q.touchData.start=null}}if(Q.touchData.start){Q.touchData.start._private.grabbed=false}Q.touchData.cxt=true;Q.touchData.cxtDragged=false;Q.data.bgActivePosistion=undefined;Q.redraw();return}}if(at.touches[2]){}else{if(at.touches[1]){}else{if(at.touches[0]){var au=Q.findNearestElement(Y[0],Y[1],true);if(au!=null){au.activate();Q.touchData.start=au;if(au._private.group=="nodes"&&Q.nodeIsDraggable(au)){var ag=Q.dragData.touchDragEles=[];
R(au,ag);au.trigger(new w.Event(at,{type:"grab"}));if(au.selected()){ag=Q.dragData.touchDragEles=[];var ai=aa.$("node:selected");for(var am=0;am<ai.length;am++){var aq=ai[am];if(Q.nodeIsDraggable(aq)){ag.push(aq);aq._private.rscratch.inDragLayer=true;var ah=aq._private.edges;for(var an=0;an<ah.length;an++){ah[an]._private.rscratch.inDragLayer=true}if(aq._private.style.width.value=="auto"||aq._private.style.height.value=="auto"){O(aq,false,ag)}V(aq,true)}}}else{if(au._private.style.width.value=="auto"||au._private.style.height.value=="auto"){O(au,true,ag)
}V(au,true)}}au.trigger(new w.Event(at,{type:"touchstart"})).trigger(new w.Event(at,{type:"tapstart"})).trigger(new w.Event(at,{type:"vmousdown"}))}if(au==null){aa.trigger(new w.Event(at,{type:"touchstart"})).trigger(new w.Event(at,{type:"tapstart"})).trigger(new w.Event(at,{type:"vmousedown"}));Q.data.bgActivePosistion={x:ad[0],y:ad[1]};Q.data.canvasNeedsRedraw[C]=true;Q.data.canvasRedrawReason[C].push("bgactive")}for(var ao=0;ao<Y.length;ao++){ap[ao]=Y[ao];Q.touchData.startPosition[ao]=Y[ao]}Q.touchData.singleTouchMoved=false;
Q.touchData.singleTouchStartTime=l();var aj=setTimeout(function(){if(Q.touchData.singleTouchMoved==false&&l()-Q.touchData.singleTouchStartTime>250){if(Q.touchData.start){Q.touchData.start.trigger(new w.Event(at,{type:"taphold"}))}else{Q.data.cy.trigger(new w.Event(at,{type:"taphold"}));aa.$(":selected").unselect()}}},1000)}}}Q.redraw()},false);window.addEventListener("touchmove",function(aG){var az=Q.data.select;var am=Q.touchData.capture;am&&aG.preventDefault();var ak=Q.data.cy;var av=Q.getCachedNodes();
var ae=Q.getCachedEdges();var ay=Q.touchData.now;var Y=Q.touchData.earlier;if(aG.touches[0]){var ap=Q.projectIntoViewport(aG.touches[0].pageX,aG.touches[0].pageY);ay[0]=ap[0];ay[1]=ap[1]}if(aG.touches[1]){var ap=Q.projectIntoViewport(aG.touches[1].pageX,aG.touches[1].pageY);ay[2]=ap[0];ay[3]=ap[1]}if(aG.touches[2]){var ap=Q.projectIntoViewport(aG.touches[2].pageX,aG.touches[2].pageY);ay[4]=ap[0];ay[5]=ap[1]}var aa=[];for(var aD=0;aD<ay.length;aD++){aa[aD]=ay[aD]-Y[aD]}if(am&&Q.touchData.cxt){var ao=aG.touches[0].pageX-K,ab=aG.touches[0].pageY-U;
var aj=aG.touches[1].pageX-K,X=aG.touches[1].pageY-U;var at=H(ao,ab,aj,X);var aE=at/T;if(aE>=1.5||at>=150){Q.touchData.cxt=false;if(Q.touchData.start){Q.touchData.start.unactivate();Q.touchData.start=null}Q.data.bgActivePosistion=undefined;Q.data.canvasNeedsRedraw[C]=true}}if(am&&Q.touchData.cxt){var Z=new w.Event(aG,{type:"cxtdrag"});Q.data.bgActivePosistion=undefined;Q.data.canvasNeedsRedraw[C]=true;if(Q.touchData.start){Q.touchData.start.trigger(Z)}else{ak.trigger(Z)}if(Q.touchData.start){Q.touchData.start._private.grabbed=false
}Q.touchData.cxtDragged=true}else{if(am&&aG.touches[2]&&ak.boxSelectionEnabled()){Q.data.bgActivePosistion=undefined;clearTimeout(this.threeFingerSelectTimeout);this.lastThreeTouch=+new Date;Q.data.canvasNeedsRedraw[C]=true;Q.data.canvasRedrawReason[C].push("Touch moved, redraw selection box");if(!az||az.length===0||az[0]===undefined){az[0]=(ay[0]+ay[2]+ay[4])/3;az[1]=(ay[1]+ay[3]+ay[5])/3;az[2]=(ay[0]+ay[2]+ay[4])/3+1;az[3]=(ay[1]+ay[3]+ay[5])/3+1}else{az[2]=(ay[0]+ay[2]+ay[4])/3;az[3]=(ay[1]+ay[3]+ay[5])/3
}az[4]=1}else{if(am&&aG.touches[1]&&ak.zoomingEnabled()&&ak.panningEnabled()){Q.data.bgActivePosistion=undefined;var ao=aG.touches[0].pageX-K,ab=aG.touches[0].pageY-U;var aj=aG.touches[1].pageX-K,X=aG.touches[1].pageY-U;var at=H(ao,ab,aj,X);var aE=at/T;if(aE!=1&&i){var aI=ao-G;var aH=ab-M;var au=aj-S;var ar=X-W;var aC=(aI+au)/2;var aA=(aH+ar)/2;var ad=ak.zoom();var ac=ad*aE;var ag=ak.pan();var ax=I[0]*ad+ag.x;var aw=I[1]*ad+ag.y;var af={x:-ac/ad*(ax-ag.x-aC)+ax,y:-ac/ad*(aw-ag.y-aA)+aw};ak._private.zoom=ac;
ak._private.pan=af;ak.trigger("pan zoom").notify("viewport");T=at;G=ao;M=ab;S=aj;W=X;Q.pinching=true}if(aG.touches[0]){var ap=Q.projectIntoViewport(aG.touches[0].pageX,aG.touches[0].pageY);ay[0]=ap[0];ay[1]=ap[1]}if(aG.touches[1]){var ap=Q.projectIntoViewport(aG.touches[1].pageX,aG.touches[1].pageY);ay[2]=ap[0];ay[3]=ap[1]}if(aG.touches[2]){var ap=Q.projectIntoViewport(aG.touches[2].pageX,aG.touches[2].pageY);ay[4]=ap[0];ay[5]=ap[1]}}else{if(aG.touches[0]){var an=Q.touchData.start;var ah=Q.touchData.last;
if(an!=null&&an._private.group=="nodes"&&Q.nodeIsDraggable(an)){var ai=Q.dragData.touchDragEles;for(var aB=0;aB<ai.length;aB++){var al=ai[aB];if(Q.nodeIsDraggable(al)){Q.dragData.didDrag=true;al._private.position.x+=aa[0];al._private.position.y+=aa[1]}}(new w.Collection(ak,ai)).trigger(new w.Event(aG,{type:"drag"})).trigger(new w.Event(aG,{type:"position"}));Q.data.canvasNeedsRedraw[d]=true;Q.data.canvasRedrawReason[d].push("touchdrag node");if(Q.touchData.startPosition[0]==Y[0]&&Q.touchData.startPosition[1]==Y[1]){Q.data.canvasNeedsRedraw[F]=true;
Q.data.canvasRedrawReason[F].push("node drag started")}}if(an!=null){an.trigger(new w.Event(aG,{type:"touchmove"}))}if(an==null){var aq=Q.findNearestElement(ay[0],ay[1],true);if(aq!=null){aq.trigger(new w.Event(aG,{type:"touchmove"}))}if(aq==null){ak.trigger(new w.Event(aG,{type:"touchmove"}))}}if(aq!=ah){if(ah){ah.trigger(new w.Event(aG,{type:"touchout"}))}if(aq){aq.trigger(new w.Event(aG,{type:"touchover"}))}}Q.touchData.last=aq;for(var aF=0;aF<ay.length;aF++){if(ay[aF]&&Q.touchData.startPosition[aF]&&Math.abs(ay[aF]-Q.touchData.startPosition[aF])>4){Q.touchData.singleTouchMoved=true
}}if(am&&(an==null||an.isEdge())&&ak.panningEnabled()){if(an){an.unactivate();if(!Q.data.bgActivePosistion){Q.data.bgActivePosistion={x:ay[0],y:ay[1]}}Q.data.canvasNeedsRedraw[C]=true;Q.data.canvasRedrawReason[C].push("bgactive")}ak.panBy({x:aa[0]*ak.zoom(),y:aa[1]*ak.zoom()});var ap=Q.projectIntoViewport(aG.touches[0].pageX,aG.touches[0].pageY);ay[0]=ap[0];ay[1]=ap[1]}}}}}for(var aD=0;aD<ay.length;aD++){Y[aD]=ay[aD]}Q.redraw()},false);window.addEventListener("touchend",function(ap){var ai=Q.touchData.capture;
if(!ai){return}Q.touchData.capture=false;ap.preventDefault();var af=Q.data.select;var aa=Q.data.cy;var ah=Q.getCachedNodes();var Z=Q.getCachedEdges();var Y=Q.touchData.now;var am=Q.touchData.earlier;var ab=Q.touchData.start;if(ap.touches[0]){var ac=Q.projectIntoViewport(ap.touches[0].pageX,ap.touches[0].pageY);Y[0]=ac[0];Y[1]=ac[1]}if(ap.touches[1]){var ac=Q.projectIntoViewport(ap.touches[1].pageX,ap.touches[1].pageY);Y[2]=ac[0];Y[3]=ac[1]}if(ap.touches[2]){var ac=Q.projectIntoViewport(ap.touches[2].pageX,ap.touches[2].pageY);
Y[4]=ac[0];Y[5]=ac[1]}if(Q.touchData.cxt){ctxTapend=new w.Event(ap,{type:"cxttapend"});if(ab){ab.unactivate();ab.trigger(ctxTapend)}else{aa.trigger(ctxTapend)}if(!Q.touchData.cxtDragged){var ag=new w.Event(ap,{type:"cxttap"});if(ab){ab.trigger(ag)}else{aa.trigger(ag)}}if(Q.touchData.start){Q.touchData.start._private.grabbed=false}Q.touchData.cxt=false;Q.touchData.start=null;Q.redraw();return}var X=+new Date;if(!ap.touches[2]&&aa.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);this.threeFingerSelectTimeout=setTimeout(function(){var aq=[];
var au=Q.getAllInBox(af[0],af[1],af[2],af[3]);af[0]=undefined;af[1]=undefined;af[2]=undefined;af[3]=undefined;af[4]=0;Q.data.canvasNeedsRedraw[C]=true;Q.data.canvasRedrawReason[C].push("Touch moved, redraw selection box");var at=new w.Event(ap,{type:"select"});for(var ar=0;ar<au.length;ar++){if(au[ar]._private.selectable){aq.push(au[ar])}}(new w.Collection(aa,aq)).select();if(au.length>0){Q.data.canvasNeedsRedraw[F]=true;Q.data.canvasRedrawReason[F].push("Selection")}},100)}if(!ap.touches[1]){Q.pinching=false
}var ak=false;if(ab!=null){ab._private.active=false;ak=true;ab.trigger(new w.Event(ap,{type:"unactivate"}))}if(ap.touches[2]){Q.data.bgActivePosistion=undefined}else{if(ap.touches[1]){}else{if(ap.touches[0]){}else{if(!ap.touches[0]){Q.data.bgActivePosistion=undefined;if(ab!=null){if(ab._private.grabbed==true){ab._private.grabbed=false;ab.trigger(new w.Event(ap,{type:"free"}));ab._private.rscratch.inDragLayer=false}var ae=ab._private.edges;for(var al=0;al<ae.length;al++){ae[al]._private.rscratch.inDragLayer=false
}V(ab,false);if(ab.selected()){var ad=aa.$("node:selected");for(var aj=0;aj<ad.length;aj++){var an=ad[aj];an._private.rscratch.inDragLayer=false;var ae=an._private.edges;for(var al=0;al<ae.length;al++){ae[al]._private.rscratch.inDragLayer=false}V(an,false)}}Q.data.canvasNeedsRedraw[d]=true;Q.data.canvasRedrawReason[d].push("touchdrag node end");Q.data.canvasNeedsRedraw[F]=true;Q.data.canvasRedrawReason[F].push("touchdrag node end");ab.trigger(new w.Event(ap,{type:"touchend"})).trigger(new w.Event(ap,{type:"tapend"})).trigger(new w.Event(ap,{type:"vmouseup"}));
Q.touchData.start=null}else{var ao=Q.findNearestElement(Y[0],Y[1],true);if(ao!=null){ao.trigger(new w.Event(ap,{type:"touchend"})).trigger(new w.Event(ap,{type:"tapend"})).trigger(new w.Event(ap,{type:"vmouseup"}))}if(ao==null){aa.trigger(new w.Event(ap,{type:"touchend"})).trigger(new w.Event(ap,{type:"tapend"})).trigger(new w.Event(ap,{type:"vmouseup"}))}}if(ab!=null&&!Q.dragData.didDrag&&ab._private.selectable&&(Math.sqrt(Math.pow(Q.touchData.startPosition[0]-Y[0],2)+Math.pow(Q.touchData.startPosition[1]-Y[1],2)))<6){if(ab.selected()){ab._private.selected=false;
ab.trigger(new w.Event(ap,{type:"unselect"}))}else{ab._private.selected=true;ab.trigger(new w.Event(ap,{type:"select"}))}ak=true;Q.data.canvasNeedsRedraw[F]=true;Q.data.canvasRedrawReason[F].push("sglslct")}if(Q.touchData.singleTouchMoved==false){if(ab){ab.trigger(new w.Event(ap,{type:"tap"})).trigger(new w.Event(ap,{type:"vclick"}))}else{aa.trigger(new w.Event(ap,{type:"tap"})).trigger(new w.Event(ap,{type:"vclick"}))}}Q.touchData.singleTouchMoved=true}}}}for(var al=0;al<Y.length;al++){am[al]=Y[al]
}Q.dragData.didDrag=false;if(ak&&ab){ab.updateStyle(false)}Q.redraw()},false)};z.prototype.init=function(){};z.prototype.getCachedNodes=function(){var i=this.data;var G=this.data.cy;if(i.cache==undefined){i.cache={}}if(i.cache.cachedNodes==undefined){i.cache.cachedNodes=G.nodes()}return i.cache.cachedNodes};z.prototype.updateNodesCache=function(){var i=this.data;var G=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedNodes=G.nodes()};z.prototype.getCachedEdges=function(){var i=this.data;
var G=this.data.cy;if(i.cache==undefined){i.cache={}}if(i.cache.cachedEdges==undefined){i.cache.cachedEdges=G.edges()}return i.cache.cachedEdges};z.prototype.updateEdgesCache=function(){var i=this.data;var G=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedEdges=G.edges()};z.prototype.projectIntoViewport=function(H,i){n=this.data.container;var K=false;var I=this.findContainerPageCoords();var J=I[0];var G=I[1];x=H-J;y=i-G;x-=this.data.cy.pan().x;y-=this.data.cy.pan().y;x/=this.data.cy.zoom();
y/=this.data.cy.zoom();return[x,y]};z.prototype.findContainerPageCoords=function(){var i,L;var I=0;var H=0;var K;K=this.data.container;var J=false;while(K!=null){var G=window.getComputedStyle(K);if(G.getPropertyValue("position").toLowerCase()==="fixed"){I=K.offsetLeft+window.scrollX;H=K.offsetTop+window.scrollY;K=null}else{if(typeof(K.offsetLeft)=="number"){I+=K.offsetLeft;H+=K.offsetTop;if(K==document.body||K==document.header){J=true}if(!J){I-=K.scrollLeft;H-=K.scrollTop}}}if(K){K=K.offsetParent
}}return[I,H]};z.prototype.findNearestElement=function(U,T,I){var P=this.data;var J=this.getCachedNodes();var N=this.getCachedEdges();var Q=[];var V=this.data.cy.zoom();var L=(v?256:32)/V;var S=(v?16:0)/V;for(var O=0;O<J.length;O++){if(p[this.getNodeShape(J[O])].checkPointRough(U,T,J[O]._private.style["border-width"].value,this.getNodeWidth(J[O])+S,this.getNodeHeight(J[O])+S,J[O]._private.position.x,J[O]._private.position.y)&&p[this.getNodeShape(J[O])].checkPoint(U,T,J[O]._private.style["border-width"].value,(this.getNodeWidth(J[O])+S)/2,(this.getNodeHeight(J[O])+S)/2,J[O]._private.position.x,J[O]._private.position.y)){if(I){if(J[O]._private.style.opacity.value!=0&&J[O]._private.style.visibility.value=="visible"){Q.push(J[O])
}}else{Q.push(J[O])}}}var H;for(var O=0;O<N.length;O++){var K=N[O];var M=K._private.rscratch;H=false;if(M.edgeType=="self"){if((this.inBezierVicinity(U,T,M.startX,M.startY,M.cp2ax,M.cp2ay,M.selfEdgeMidX,M.selfEdgeMidY,Math.pow(K._private.style.width.value/2,2))&&(Math.pow(N[O]._private.style.width.value/2,2)+L>this.sqDistanceToQuadraticBezier(U,T,M.startX,M.startY,M.cp2ax,M.cp2ay,M.selfEdgeMidX,M.selfEdgeMidY)))||(this.inBezierVicinity(U,T,M.selfEdgeMidX,M.selfEdgeMidY,M.cp2cx,M.cp2cy,M.endX,M.endY,Math.pow(N[O]._private.style.width.value/2,2))&&(Math.pow(N[O]._private.style.width.value/2,2)+L>this.sqDistanceToQuadraticBezier(U,T,M.selfEdgeMidX,M.selfEdgeMidY,M.cp2cx,M.cp2cy,M.endX,M.endY)))){H=true
}}else{if(M.edgeType=="straight"){if(Math.pow(N[O]._private.style.width.value/2,2)+L>this.sqDistanceToFiniteLine(U,T,M.startX,M.startY,M.endX,M.endY)){H=true}}else{if(M.edgeType=="bezier"){if(this.inBezierVicinity(U,T,M.startX,M.startY,M.cp2x,M.cp2y,M.endX,M.endY,Math.pow(N[O]._private.style.width.value/2,2))&&(Math.pow(N[O]._private.style.width.value/2,2)+L>this.sqDistanceToQuadraticBezier(U,T,M.startX,M.startY,M.cp2x,M.cp2y,M.endX,M.endY))){H=true}}}}if(!Q.length||Q[Q.length-1]!=N[O]){if((b[N[O]._private.style["source-arrow-shape"].value].roughCollide(U,T,N[O]._private.rscratch.arrowStartX,N[O]._private.rscratch.arrowStartY,this.getArrowWidth(N[O]._private.style.width.value),this.getArrowHeight(N[O]._private.style.width.value),[N[O]._private.rscratch.arrowStartX-N[O].source()[0]._private.position.x,N[O]._private.rscratch.arrowStartY-N[O].source()[0]._private.position.y],0)&&b[N[O]._private.style["source-arrow-shape"].value].collide(U,T,N[O]._private.rscratch.arrowStartX,N[O]._private.rscratch.arrowStartY,this.getArrowWidth(N[O]._private.style.width.value),this.getArrowHeight(N[O]._private.style.width.value),[N[O]._private.rscratch.arrowStartX-N[O].source()[0]._private.position.x,N[O]._private.rscratch.arrowStartY-N[O].source()[0]._private.position.y],0))||(b[N[O]._private.style["target-arrow-shape"].value].roughCollide(U,T,N[O]._private.rscratch.arrowEndX,N[O]._private.rscratch.arrowEndY,this.getArrowWidth(N[O]._private.style.width.value),this.getArrowHeight(N[O]._private.style.width.value),[N[O]._private.rscratch.arrowEndX-N[O].target()[0]._private.position.x,N[O]._private.rscratch.arrowEndY-N[O].target()[0]._private.position.y],0)&&b[N[O]._private.style["target-arrow-shape"].value].collide(U,T,N[O]._private.rscratch.arrowEndX,N[O]._private.rscratch.arrowEndY,this.getArrowWidth(N[O]._private.style.width.value),this.getArrowHeight(N[O]._private.style.width.value),[N[O]._private.rscratch.arrowEndX-N[O].target()[0]._private.position.x,N[O]._private.rscratch.arrowEndY-N[O].target()[0]._private.position.y],0))){H=true
}}if(H){if(I){var G=P.cy.getElementById(N[O]._private.data.source);var R=P.cy.getElementById(N[O]._private.data.target);if(N[O]._private.style.opacity.value!=0&&N[O]._private.style.visibility.value=="visible"&&G._private.style.opacity.value!=0&&G._private.style.visibility.value=="visible"&&R._private.style.opacity.value!=0&&R._private.style.visibility.value=="visible"){Q.push(N[O])}}else{Q.push(N[O])}}}Q.sort(function(W,i){var Y=i._private.style["z-index"].value-W._private.style["z-index"].value;
var X=i._private.data.id.localeCompare(W._private.data.id);var Z=(function(ab,aa){if(ab.isEdge()&&aa.isNode()){return 1}else{if(ab.isNode()&&aa.isEdge()){return -1}}return 0})(W,i);return Y||Z||X});if(Q.length>0){return Q[0]}else{return null}};z.prototype.getAllInBox=function(I,S,G,R){var N=this.data;var H=this.getCachedNodes();var L=this.getCachedEdges();var O=[];var Q=Math.min(I,G);var K=Math.max(I,G);var T=Math.min(S,R);var P=Math.max(S,R);I=Q;G=K;S=T;R=P;var J;for(var M=0;M<H.length;M++){if(p[this.getNodeShape(H[M])].intersectBox(I,S,G,R,this.getNodeWidth(H[M]),this.getNodeHeight(H[M]),H[M]._private.position.x,H[M]._private.position.y,H[M]._private.style["border-width"].value/2)){O.push(H[M])
}}for(var M=0;M<L.length;M++){if(L[M]._private.rscratch.edgeType=="self"){if((J=this.boxInBezierVicinity(I,S,G,R,L[M]._private.rscratch.startX,L[M]._private.rscratch.startY,L[M]._private.rscratch.cp2ax,L[M]._private.rscratch.cp2ay,L[M]._private.rscratch.endX,L[M]._private.rscratch.endY,L[M]._private.style.width.value))&&(J==2||(J==1&&this.checkBezierCrossesBox(I,S,G,R,L[M]._private.rscratch.startX,L[M]._private.rscratch.startY,L[M]._private.rscratch.cp2ax,L[M]._private.rscratch.cp2ay,L[M]._private.rscratch.endX,L[M]._private.rscratch.endY,L[M]._private.style.width.value)))||(J=this.boxInBezierVicinity(I,S,G,R,L[M]._private.rscratch.startX,L[M]._private.rscratch.startY,L[M]._private.rscratch.cp2cx,L[M]._private.rscratch.cp2cy,L[M]._private.rscratch.endX,L[M]._private.rscratch.endY,L[M]._private.style.width.value))&&(J==2||(J==1&&this.checkBezierCrossesBox(I,S,G,R,L[M]._private.rscratch.startX,L[M]._private.rscratch.startY,L[M]._private.rscratch.cp2cx,L[M]._private.rscratch.cp2cy,L[M]._private.rscratch.endX,L[M]._private.rscratch.endY,L[M]._private.style.width.value)))){O.push(L[M])
}}if(L[M]._private.rscratch.edgeType=="bezier"&&(J=this.boxInBezierVicinity(I,S,G,R,L[M]._private.rscratch.startX,L[M]._private.rscratch.startY,L[M]._private.rscratch.cp2x,L[M]._private.rscratch.cp2y,L[M]._private.rscratch.endX,L[M]._private.rscratch.endY,L[M]._private.style.width.value))&&(J==2||(J==1&&this.checkBezierCrossesBox(I,S,G,R,L[M]._private.rscratch.startX,L[M]._private.rscratch.startY,L[M]._private.rscratch.cp2x,L[M]._private.rscratch.cp2y,L[M]._private.rscratch.endX,L[M]._private.rscratch.endY,L[M]._private.style.width.value)))){O.push(L[M])
}if(L[M]._private.rscratch.edgeType=="straight"&&(J=this.boxInBezierVicinity(I,S,G,R,L[M]._private.rscratch.startX,L[M]._private.rscratch.startY,L[M]._private.rscratch.startX*0.5+L[M]._private.rscratch.endX*0.5,L[M]._private.rscratch.startY*0.5+L[M]._private.rscratch.endY*0.5,L[M]._private.rscratch.endX,L[M]._private.rscratch.endY,L[M]._private.style.width.value))&&(J==2||(J==1&&this.checkStraightEdgeCrossesBox(I,S,G,R,L[M]._private.rscratch.startX,L[M]._private.rscratch.startY,L[M]._private.rscratch.endX,L[M]._private.rscratch.endY,L[M]._private.style.width.value)))){O.push(L[M])
}}return O};z.prototype.updateAllCompounds=function(J){for(var G=J.length-1;G>=0;G--){if(J[G].isNode()&&(J[G]._private.style.width.value=="auto"||J[G]._private.style.height.value=="auto")&&J[G].children().length>0){var I=J[G];var H=this.calcCompoundBounds(I);I._private.position.x=H.x;I._private.position.y=H.y;I._private.autoWidth=H.width;I._private.autoHeight=H.height}}};z.prototype.calcCompoundBounds=function(M){var L=M.children().not(":removed");var G={x:M._private.position.x,y:M._private.position.y,width:M._private.autoWidth,height:M._private.autoHeight};
if(M._private.style.visibility.value!="visible"){return G}var H=[];for(var O=0;O<L.size();O++){if(L[O]._private.style.visibility.value=="visible"){H.push(L[O])}}if(H.length==0){return G}L=H;var I=this.borderValue(L,"left");var P=this.borderValue(L,"right");var N=this.borderValue(L,"top");var K=this.borderValue(L,"bottom");var S=this.getNodePadding(M);var R=(I-S.left+P+S.right)/2;var Q=(N-S.top+K+S.bottom)/2;var J=(P-I)+S.left+S.right;var T=(K-N)+S.top+S.bottom;G={x:R,y:Q,width:J,height:T};return G
};z.prototype.borderValue=function(I,Q){var M,H;var R=1/0,O=-1/0;var i=this;var P=function(U){var T={};T.x=U._private.position.x;T.y=U._private.position.y;T.width=U.outerWidth();T.height=U.outerHeight();return T};var K=function(U){var V=String(U._private.style.content.value);var W=U._private.style["text-transform"].value;if(W=="none"){}else{if(W=="uppercase"){V=V.toUpperCase()}else{if(W=="lowercase"){V=V.toLowerCase()}}}var T=i.data.canvases[4].getContext("2d");return T.measureText(V).width};var S=function(X){var V={};
var T=i.getNodeWidth(X);var Y=i.getNodeHeight(X);V.height=X._private.style["font-size"].value;V.width=V.height;var W=X._private.style["text-halign"].strValue;if(W=="left"){V.x=X._private.position.x-T/2;V.left=V.x-V.width;V.right=V.x}else{if(W=="right"){V.x=X._private.position.x+T/2;V.left=V.x;V.right=V.x+V.width}else{V.x=X._private.position.x;V.left=V.x-V.width/2;V.right=V.x+V.width/2}}var U=X._private.style["text-valign"].strValue;if(U=="top"){V.y=X._private.position.y-Y/2;V.top=V.y-V.height;V.bottom=V.y
}else{if(U=="bottom"){V.y=X._private.position.y+Y/2;V.top=V.y;V.bottom=V.y+V.height}else{V.y=X._private.position.y;V.top=V.y-V.height/2;V.bottom=V.y+V.height/2}}return V};for(D=0;D<I.length;D++){M=P(I[D]);H=S(I[D]);if(Q=="left"){var G=Math.min(M.x-M.width/2,H.left);if(G<R){R=G}}else{if(Q=="right"){var N=Math.max(M.x+M.width/2,H.right);if(N>O){O=N}}else{if(Q=="top"){var L=Math.min(M.y-M.height/2,H.top);if(L<R){R=L}}else{if(Q=="bottom"){var J=Math.max(M.y+M.height/2,H.bottom);if(J>O){O=J}}}}}}if((Q=="left")||(Q=="top")){return R
}else{return O}};z.prototype.getNodeWidth=function(i){if(i._private.style.width.value=="auto"||i._private.style.height.value=="auto"){return i._private.autoWidth}else{return i._private.style.width.value}};z.prototype.getNodeHeight=function(i){if(i._private.style.width.value=="auto"||i._private.style.height.value=="auto"){return i._private.autoHeight}else{return i._private.style.height.value}};z.prototype.getNodeShape=function(i){return i._private.style.shape.value};z.prototype.getNodePadding=function(H){var J=H._private.style["padding-left"].value;
var G=H._private.style["padding-right"].value;var I=H._private.style["padding-top"].value;var i=H._private.style["padding-bottom"].value;if(isNaN(J)){J=0}if(isNaN(G)){G=0}if(isNaN(I)){I=0}if(isNaN(i)){i=0}return{left:J,right:G,top:I,bottom:i}};z.prototype.matchCanvasSize=function(H){var L=this.data;var K=H.clientWidth;var G=H.clientHeight;var I;for(var J=0;J<e;J++){I=L.canvases[J];if(I.width!==K||I.height!==G){I.width=K;I.height=G}}for(var J=0;J<a;J++){I=L.bufferCanvases[J];if(I.width!==K||I.height!==G){I.width=K;
I.height=G}}};z.prototype.redraw=function(ae,K){var ab=this;if(this.averageRedrawTime===undefined){this.averageRedrawTime=0}var I=1000/60;var V=1000;var ac=this.averageRedrawTime;ac=Math.max(I,ac);ac=Math.min(ac,V);if(this.lastDrawTime===undefined){this.lastDrawTime=0}var G=+new Date;var T=G-this.lastDrawTime;var ag=T>=ac;if(!ae){if(!ag){clearTimeout(this.redrawTimeout);this.redrawTimeout=setTimeout(function(){ab.redraw()},ac);return}this.lastDrawTime=G}var aa=G;var Y=100;var P=this.data.cy;var ai=this.data;
var ad=this.getCachedNodes();var O=this.getCachedEdges();this.matchCanvasSize(ai.container);var Z=[];for(var af=0;af<ad.length;af++){Z.push(ad[af])}for(var af=0;af<O.length;af++){Z.push(O[af])}var R=function(i){if(i._private.group=="nodes"){return i.parents().size()}else{if(i._private.group=="edges"){return Math.max(i.source()[0].parents().size(),i.target()[0].parents().size())}else{return 0}}};if(ai.canvasNeedsRedraw[d]||ai.canvasNeedsRedraw[F]||K){this.findEdgeControlPoints(O);var N=false;for(var af=0;
af<Z.length;af++){if(Z[af].isNode()&&Z[af].isParent()){N=true;break}}var Z=[];for(var af=0;af<ad.length;af++){Z.push(ad[af])}for(var af=0;af<O.length;af++){Z.push(O[af])}Z.sort(function(ak,aj){var i=ak._private.style["z-index"].value-aj._private.style["z-index"].value;var am=0;var al=0;if(N){am=R(ak);al=R(aj)}if(i==0){if(am-al==0){if(ak._private.group=="nodes"&&aj._private.group=="edges"){return 1}else{if(ak._private.group=="edges"&&aj._private.group=="nodes"){return -1}else{return 0}}}else{return am-al
}}return 0});if(N){this.updateAllCompounds(Z)}}var U;var Q;var L;if(ai.canvasNeedsRedraw[F]||K){if(!U||!Q){U=[];Q=[];for(var X=0;X<Z.length;X++){L=Z[X];if(L._private.rscratch.inDragLayer){U.push(L)}else{Q.push(L)}}}var M=ae||ai.canvases[F].getContext("2d");M.setTransform(1,0,0,1,0,0);M.clearRect(0,0,M.canvas.width,M.canvas.height);if(!K){M.translate(P.pan().x,P.pan().y);M.scale(P.zoom(),P.zoom())}for(var X=0;X<Q.length;X++){L=Q[X];if(L._private.group=="nodes"){this.drawNode(M,L)}else{if(L._private.group=="edges"){this.drawEdge(M,L)
}}}for(var X=0;X<Q.length;X++){L=Q[X];if(L._private.group=="nodes"){this.drawNodeText(M,L)}else{if(L._private.group=="edges"){this.drawEdgeText(M,L)}}if(L._private.group=="nodes"){this.drawNode(M,L,true)}else{if(L._private.group=="edges"){this.drawEdge(M,L,true)}}}if(!K){ai.canvasNeedsRedraw[F]=false;ai.canvasRedrawReason[F]=[]}}if(ai.canvasNeedsRedraw[d]||K){if(!U||!Q){U=[];Q=[];for(var X=0;X<Z.length;X++){L=Z[X];if(L._private.rscratch.inDragLayer){U.push(L)}else{Q.push(L)}}}var M=ae||ai.canvases[d].getContext("2d");
if(!K){M.setTransform(1,0,0,1,0,0);M.clearRect(0,0,M.canvas.width,M.canvas.height);M.translate(P.pan().x,P.pan().y);M.scale(P.zoom(),P.zoom())}var L;for(var X=0;X<U.length;X++){L=U[X];if(L._private.group=="nodes"){this.drawNode(M,L)}else{if(L._private.group=="edges"){this.drawEdge(M,L)}}}for(var X=0;X<U.length;X++){L=U[X];if(L._private.group=="nodes"){this.drawNodeText(M,L)}else{if(L._private.group=="edges"){this.drawEdgeText(M,L)}}if(L._private.group=="nodes"){this.drawNode(M,L,true)}else{if(L._private.group=="edges"){this.drawEdge(M,L,true)
}}}if(!K){ai.canvasNeedsRedraw[d]=false;ai.canvasRedrawReason[d]=[]}}if(ai.canvasNeedsRedraw[C]){var M=ae||ai.canvases[C].getContext("2d");if(!K){M.setTransform(1,0,0,1,0,0);M.clearRect(0,0,M.canvas.width,M.canvas.height);M.translate(P.pan().x,P.pan().y);M.scale(P.zoom(),P.zoom())}var J=P.style()._private.coreStyle;if(ai.select[4]==1){var H=ai.cy.zoom();var ah=J["selection-box-border-width"].value/H;M.lineWidth=ah;M.fillStyle="rgba("+J["selection-box-color"].value[0]+","+J["selection-box-color"].value[1]+","+J["selection-box-color"].value[2]+","+J["selection-box-opacity"].value+")";
M.fillRect(ai.select[0],ai.select[1],ai.select[2]-ai.select[0],ai.select[3]-ai.select[1]);if(ah>0){M.strokeStyle="rgba("+J["selection-box-border-color"].value[0]+","+J["selection-box-border-color"].value[1]+","+J["selection-box-border-color"].value[2]+","+J["selection-box-opacity"].value+")";M.strokeRect(ai.select[0],ai.select[1],ai.select[2]-ai.select[0],ai.select[3]-ai.select[1])}}if(ai.bgActivePosistion){var H=ai.cy.zoom();var W=ai.bgActivePosistion;M.fillStyle="rgba("+J["active-bg-color"].value[0]+","+J["active-bg-color"].value[1]+","+J["active-bg-color"].value[2]+","+J["active-bg-opacity"].value+")";
M.beginPath();M.arc(W.x,W.y,J["active-bg-size"].pxValue/H,0,2*Math.PI);M.fill()}if(!K){ai.canvasNeedsRedraw[C]=false;ai.canvasRedrawReason[C]=[]}}var S=+new Date;if(this.averageRedrawTime===undefined){this.averageRedrawTime=S-aa}this.averageRedrawTime=this.averageRedrawTime/2+(S-aa)/2};var k={};var g=30*300;z.prototype.getCachedImage=function(G,H){if(k[G]&&k[G].image){k[G].keepTime=g;return k[G].image}var i=k[G];if(i==undefined){k[G]=new Object();k[G].image=new Image();k[G].image.onload=H;k[G].image.src=G;
k[G].keepTime=g;i=k[G]}return i.image};z.prototype.swapCachedImage=function(G){if(k[G]){if(k[G].image&&k[G].image.complete){var H=k[G].image;var i=document.createElement("canvas");i.width=H.width;i.height=H.height;i.getContext("2d").drawImage(H,0,0);k[G].image=i;k[G].swappedWithCanvas=true;return i}else{return null}}else{return null}};z.prototype.updateImageCaches=function(){for(var i in k){if(k[i].keepTime<=0){if(k[i].image!=undefined){k[i].image.src=undefined;k[i].image=undefined}k[i]=undefined
}else{k[i]-=1}}};z.prototype.drawImage=function(i,M,L,J,I,N,H){H.widthScale=0.5;H.heightScale=0.5;H.rotate=N;var K;var G;canvas.drawImage(H,M,L)};z.prototype.drawEdge=function(H,J,K){var L,P;L=J.source()[0];P=J.target()[0];if(J._private.style.visibility.value!="visible"||L._private.style.visibility.value!="visible"||P._private.style.visibility.value!="visible"){return}var T=J._private.style["overlay-padding"].value;var R=J._private.style["overlay-opacity"].value;var S=J._private.style["overlay-color"].value;
if(K){H.strokeStyle="rgba( "+S[0]+", "+S[1]+", "+S[2]+", "+R+" )";H.lineCap="round";if(J._private.rscratch.edgeType=="self"){H.lineCap="butt"}}else{H.strokeStyle="rgba("+J._private.style["line-color"].value[0]+","+J._private.style["line-color"].value[1]+","+J._private.style["line-color"].value[2]+","+J._private.style.opacity.value+")"}if(J._private.style.width.value<=0){return}var Q=J._private.style.width.value+(K?2*T:0);var N=K?"solid":J._private.style["line-style"].value;H.lineWidth=Q;this.findEndpoints(J);
if(J._private.rscratch.edgeType=="self"){var i=J._private.rscratch;this.drawStyledEdge(J,H,[i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY],N,Q);this.drawStyledEdge(J,H,[i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY],N,Q)}else{if(J._private.rscratch.edgeType=="straight"){var I=P._private.position.x-L._private.position.x;var G=P._private.position.y-L._private.position.y;var O=J._private.rscratch.endX-J._private.rscratch.startX;var M=J._private.rscratch.endY-J._private.rscratch.startY;
if(I*O+G*M<0){J._private.rscratch.straightEdgeTooShort=true}else{var i=J._private.rscratch;this.drawStyledEdge(J,H,[i.startX,i.startY,i.endX,i.endY],N,Q);J._private.rscratch.straightEdgeTooShort=false}}else{var i=J._private.rscratch;this.drawStyledEdge(J,H,[i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY],N,Q)}}if(J._private.rscratch.noArrowPlacement!==true&&J._private.rscratch.startX!==undefined){this.drawArrowheads(H,J,K)}};var u=function(O,K,I){var H=Math.sqrt(Math.pow(O[4]-O[0],2)+Math.pow(O[5]-O[1],2));
H+=Math.sqrt(Math.pow((O[4]+O[0])/2-O[2],2)+Math.pow((O[5]+O[1])/2-O[3],2));var N=Math.ceil(H/K);var G=H/K;var L;if(N>0){L=new Array(N*2)}else{return null}for(var J=0;J<N;J++){var M=J/N;L[J*2]=O[0]*(1-M)*(1-M)+2*(O[2])*(1-M)*M+O[4]*(M)*(M);L[J*2+1]=O[1]*(1-M)*(1-M)+2*(O[3])*(1-M)*M+O[5]*(M)*(M)}return L};var t=function(O,K,I){var H=Math.sqrt(Math.pow(O[2]-O[0],2)+Math.pow(O[3]-O[1],2));var N=Math.ceil(H/K);var L;if(N>0){L=new Array(N*2)}else{return null}var G=[O[2]-O[0],O[3]-O[1]];for(var J=0;J<N;
J++){var M=J/N;L[J*2]=G[0]*M+O[0];L[J*2+1]=G[1]*M+O[1]}return L};var s=function(H,i,G){pt1=_genpts(H,i);pt2=_genpts(H,G)};z.prototype.createBuffer=function(G,H){var i=document.createElement("canvas");i.width=G;i.height=H;return[i,i.getContext("2d")]};z.prototype.drawStyledEdge=function(M,I,Z,J,S){var G=this.data.cy.zoom();function Y(ac,ab,aa,i){return(1-i)*(1-i)*ac+2*(1-i)*i*ab+i*i*aa}if(M._private.rstyle.bezierPts===undefined){M._private.rstyle.bezierPts=[]}var U=M._private.rstyle.bezierPts.length;
if(M.isLoop()){if(U>=12){M._private.rstyle.bezierPts=[]}else{}}else{M._private.rstyle.bezierPts=[]}var P=M._private.rstyle.bezierPts;if(Z.length===6){P.push({x:Y(Z[0],Z[2],Z[4],0.05),y:Y(Z[1],Z[3],Z[5],0.05)});P.push({x:Y(Z[0],Z[2],Z[4],0.25),y:Y(Z[1],Z[3],Z[5],0.25)});P.push({x:Y(Z[0],Z[2],Z[4],0.35),y:Y(Z[1],Z[3],Z[5],0.35)});P.push({x:Y(Z[0],Z[2],Z[4],0.65),y:Y(Z[1],Z[3],Z[5],0.65)});P.push({x:Y(Z[0],Z[2],Z[4],0.75),y:Y(Z[1],Z[3],Z[5],0.75)});P.push({x:Y(Z[0],Z[2],Z[4],0.95),y:Y(Z[1],Z[3],Z[5],0.95)})
}if(J=="solid"){I.beginPath();I.moveTo(Z[0],Z[1]);if(Z.length==3*2){I.quadraticCurveTo(Z[2],Z[3],Z[4],Z[5])}else{I.lineTo(Z[2],Z[3])}I.stroke()}else{if(J=="dotted"){var R;if(Z.length==3*2){R=u(Z,16,true)}else{R=t(Z,16,true)}if(!R){return}var L=Math.max(S*1.6,3.4)*G;var K=L*2,O=L*2;K=Math.max(K,1);O=Math.max(O,1);var V=this.createBuffer(K,O);var T=V[1];T.setTransform(1,0,0,1,0,0);T.clearRect(0,0,K,O);T.fillStyle=I.strokeStyle;T.beginPath();T.arc(K/2,O/2,L*0.5,0,Math.PI*2,false);T.fill();I.beginPath();
I.save();for(var W=0;W<R.length/2;W++){I.drawImage(V[0],R[W*2]-K/2/G,R[W*2+1]-O/2/G,K/G,O/G)}I.restore()}else{if(J=="dashed"){var R;if(Z.length==3*2){R=u(Z,14,true)}else{R=t(Z,14,true)}if(!R){return}var K=S*2*G;var O=7.8*G;K=Math.max(K,1);O=Math.max(O,1);var V=this.createBuffer(K,O);var T=V[1];T.setTransform(1,0,0,1,0,0);T.clearRect(0,0,K,O);if(I.strokeStyle){T.strokeStyle=I.strokeStyle}T.lineWidth=S*cy.zoom();T.beginPath();T.moveTo(K/2,O*0.2);T.lineTo(K/2,O*0.8);T.stroke();I.save();var H=false;var N,X;
if(Z.length==2*2){N=[Z[2]-Z[0],Z[3]-R[1]];X=Math.acos((N[0]*0+N[1]*-1)/Math.sqrt(N[0]*N[0]+N[1]*N[1]));if(N[0]<0){X=-X+2*Math.PI}}else{if(Z.length==3*2){H=true}}for(var W=0;W<R.length/2;W++){var Q=W/(Math.max(R.length/2-1,1));if(H){N=[2*(1-Q)*(Z[2]-Z[0])+2*Q*(Z[4]-Z[2]),2*(1-Q)*(Z[3]-Z[1])+2*Q*(Z[5]-Z[3])];X=Math.acos((N[0]*0+N[1]*-1)/Math.sqrt(N[0]*N[0]+N[1]*N[1]));if(N[0]<0){X=-X+2*Math.PI}}I.translate(R[W*2],R[W*2+1]);I.rotate(X);I.translate(-K/2/G,-O/2/G);I.drawImage(V[0],0,0,K/G,O/G);I.translate(K/2/G,O/2/G);
I.rotate(-X);I.translate(-R[W*2],-R[W*2+1])}I.restore()}else{this.drawStyledEdge(M,I,Z,"solid",S)}}}};z.prototype.drawEdgeText=function(I,L){if(L._private.style.visibility.value!="visible"){return}I.textAlign="center";I.textBaseline="middle";var G,i;var K,J;if(L._private.rscratch.edgeType=="self"){K=L._private.rscratch.selfEdgeMidX;J=L._private.rscratch.selfEdgeMidY}else{if(L._private.rscratch.edgeType=="straight"){K=(L._private.rscratch.startX+L._private.rscratch.endX)/2;J=(L._private.rscratch.startY+L._private.rscratch.endY)/2
}else{if(L._private.rscratch.edgeType=="bezier"){K=0.25*L._private.rscratch.startX+2*0.5*0.5*L._private.rscratch.cp2x+(0.5*0.5)*L._private.rscratch.endX;J=Math.pow(1-0.5,2)*L._private.rscratch.startY+2*(1-0.5)*0.5*L._private.rscratch.cp2y+(0.5*0.5)*L._private.rscratch.endY}}}G=K;i=J;var H=L._private.rstyle;H.labelX=G;H.labelY=i;this.drawText(I,L,G,i)};z.prototype.drawNode=function(I,K,J){var O,H;if(K._private.style.visibility.value!="visible"){return}O=this.getNodeWidth(K);H=this.getNodeHeight(K);
if(J===undefined||!J){I.fillStyle="rgba("+K._private.style["background-color"].value[0]+","+K._private.style["background-color"].value[1]+","+K._private.style["background-color"].value[2]+","+(K._private.style["background-opacity"].value*K._private.style.opacity.value)+")";I.strokeStyle="rgba("+K._private.style["border-color"].value[0]+","+K._private.style["border-color"].value[1]+","+K._private.style["border-color"].value[2]+","+(K._private.style["border-opacity"].value*K._private.style.opacity.value)+")";
var G=K._private.style["background-image"].value[2]||K._private.style["background-image"].value[1];if(G!=undefined){var i=this;var L=this.getCachedImage(G,function(){i.data.canvasNeedsRedraw[F]=true;i.data.canvasRedrawReason[F].push("image finished load");i.data.canvasNeedsRedraw[d]=true;i.data.canvasRedrawReason[d].push("image finished load");i.swapCachedImage(G);i.redraw()});if(L.complete==false){p[i.getNodeShape(K)].drawPath(I,K._private.position.x,K._private.position.y,O,H);I.stroke();I.fillStyle="#555555";
I.fill()}else{this.drawInscribedImage(I,L,K)}}else{p[this.getNodeShape(K)].draw(I,K._private.position.x,K._private.position.y,O,H)}I.lineWidth=K._private.style["border-width"].pxValue;if(K._private.style["border-width"].value>0){I.stroke()}}else{var P=K._private.style["overlay-padding"].value;var M=K._private.style["overlay-opacity"].value;var N=K._private.style["overlay-color"].value;if(M>0){I.fillStyle="rgba( "+N[0]+", "+N[1]+", "+N[2]+", "+M+" )";p[this.getNodeShape(K)].draw(I,K._private.position.x,K._private.position.y,O+P*2,H+P*2)
}}};z.prototype.drawInscribedImage=function(G,L,J){var N=this.data.cy._private.zoom;var I=J._private.position.x;var H=J._private.position.y;var M=this.getNodeWidth(J);var i=this.getNodeHeight(J);G.save();p[r.getNodeShape(J)].drawPath(G,I,H,M,i);G.clip();var K=[L.width,L.height];G.drawImage(L,I-K[0]/2,H-K[1]/2,K[0],K[1]);G.restore();G.stroke()};z.prototype.drawNodeText=function(J,L){if(L._private.style.visibility.value!="visible"){return}var H,i;var G=this.getNodeWidth(L);var M=this.getNodeHeight(L);
var K=L._private.style["text-halign"].strValue;if(K=="left"){J.textAlign="right";H=L._private.position.x-G/2}else{if(K=="right"){J.textAlign="left";H=L._private.position.x+G/2}else{if(K=="center"){J.textAlign="center";H=L._private.position.x}else{J.textAlign="center";H=L._private.position.x}}}var I=L._private.style["text-valign"].strValue;if(I=="top"){J.textBaseline="bottom";i=L._private.position.y-M/2}else{if(I=="bottom"){J.textBaseline="top";i=L._private.position.y+M/2}else{if(I=="middle"||I=="center"){J.textBaseline="middle";
i=L._private.position.y}else{J.textBaseline="middle";i=L._private.position.y}}}this.drawText(J,L,H,i)};z.prototype.drawText=function(i,J,L,K){var O=J._private.style["font-style"].strValue;var I=J._private.style["font-size"].value+"px";var Q=J._private.style["font-family"].strValue;var N=J._private.style["font-variant"].strValue;var G=J._private.style["font-weight"].strValue;i.font=O+" "+G+" "+I+" "+Q;var P=String(J._private.style.content.value);var H=J._private.style["text-transform"].value;if(H=="none"){}else{if(H=="uppercase"){P=P.toUpperCase()
}else{if(H=="lowercase"){P=P.toLowerCase()}}}i.lineJoin="round";i.fillStyle="rgba("+J._private.style.color.value[0]+","+J._private.style.color.value[1]+","+J._private.style.color.value[2]+","+(J._private.style["text-opacity"].value*J._private.style.opacity.value)+")";i.strokeStyle="rgba("+J._private.style["text-outline-color"].value[0]+","+J._private.style["text-outline-color"].value[1]+","+J._private.style["text-outline-color"].value[2]+","+(J._private.style["text-opacity"].value*J._private.style.opacity.value)+")";
if(P!=undefined){var M=2*J._private.style["text-outline-width"].value;if(M>0){i.lineWidth=M;i.strokeText(P,L,K)}if(isNaN(L)){L=0}if(isNaN(K)){K=0}i.fillText(""+P,L,K);J._private.rstyle.labelWidth=i.measureText(P).width}};z.prototype.drawBackground=function(H,G,i,I,J){};z.prototype.findEdgeControlPoints=function(O){var U={};var M=this.data.cy;var V=[];var R;for(var P=0;P<O.length;P++){R=O[P]._private.data.source>O[P]._private.data.target?O[P]._private.data.target+"-"+O[P]._private.data.source:O[P]._private.data.source+"-"+O[P]._private.data.target;
if(U[R]==undefined){U[R]=[]}U[R].push(O[P]);V.push(R)}var H,N;for(var J=0;J<V.length;J++){R=V[J];H=M.getElementById(U[R][0]._private.data.source);N=M.getElementById(U[R][0]._private.data.target);var T=(H._private.position.x+N._private.position.x)/2;var S=(H._private.position.y+N._private.position.y)/2;var I,G;if(U[R].length>1){I=N._private.position.y-H._private.position.y;G=H._private.position.x-N._private.position.x;var Q=Math.sqrt(I*I+G*G);I/=Q;G/=Q}var K;for(var P=0;P<U[R].length;P++){K=U[R][P];
if(H._private.data.id==N._private.data.id){var W=K._private.style["control-point-step-size"].pxValue;K._private.rscratch.edgeType="self";K._private.rscratch.cp2ax=H._private.position.x;K._private.rscratch.cp2ay=H._private.position.y-(1+Math.pow(this.getNodeHeight(H),1.12)/100)*W*(P/3+1);K._private.rscratch.cp2cx=H._private.position.x-(1+Math.pow(this.getNodeWidth(H),1.12)/100)*W*(P/3+1);K._private.rscratch.cp2cy=H._private.position.y;K._private.rscratch.selfEdgeMidX=(K._private.rscratch.cp2ax+K._private.rscratch.cp2cx)/2;
K._private.rscratch.selfEdgeMidY=(K._private.rscratch.cp2ay+K._private.rscratch.cp2cy)/2}else{if(U[R].length%2==1&&P==Math.floor(U[R].length/2)){K._private.rscratch.edgeType="straight"}else{var W=K._private.style["control-point-step-size"].value;var L=(0.5-U[R].length/2+P)*W;K._private.rscratch.edgeType="bezier";K._private.rscratch.cp2x=T+I*L;K._private.rscratch.cp2y=S+G*L}}}}return U};z.prototype.findEndpoints=function(I){var K;var i=I.source()[0];var O=I.target()[0];var T=Math.max(this.getNodeWidth(i),this.getNodeHeight(i));
var J=Math.max(this.getNodeWidth(O),this.getNodeHeight(O));T=0;J/=2;var H=[I.source().position().x,I.source().position().y];var L=[I.target().position().x,I.target().position().y];if(I._private.rscratch.edgeType=="self"){var Q=[I._private.rscratch.cp2cx,I._private.rscratch.cp2cy];K=p[this.getNodeShape(O)].intersectLine(O._private.position.x,O._private.position.y,this.getNodeWidth(O),this.getNodeHeight(O),Q[0],Q[1],O._private.style["border-width"].value/2);var G=this.shortenIntersection(K,Q,b[I._private.style["target-arrow-shape"].value].spacing(I));
var P=this.shortenIntersection(K,Q,b[I._private.style["target-arrow-shape"].value].gap(I));I._private.rscratch.endX=P[0];I._private.rscratch.endY=P[1];I._private.rscratch.arrowEndX=G[0];I._private.rscratch.arrowEndY=G[1];var Q=[I._private.rscratch.cp2ax,I._private.rscratch.cp2ay];K=p[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),Q[0],Q[1],i._private.style["border-width"].value/2);var M=this.shortenIntersection(K,Q,b[I._private.style["source-arrow-shape"].value].spacing(I));
var N=this.shortenIntersection(K,Q,b[I._private.style["source-arrow-shape"].value].gap(I));I._private.rscratch.startX=N[0];I._private.rscratch.startY=N[1];I._private.rscratch.arrowStartX=M[0];I._private.rscratch.arrowStartY=M[1]}else{if(I._private.rscratch.edgeType=="straight"){K=p[this.getNodeShape(O)].intersectLine(O._private.position.x,O._private.position.y,this.getNodeWidth(O),this.getNodeHeight(O),i.position().x,i.position().y,O._private.style["border-width"].value/2);if(K.length==0){I._private.rscratch.noArrowPlacement=true
}else{I._private.rscratch.noArrowPlacement=false}var G=this.shortenIntersection(K,[i.position().x,i.position().y],b[I._private.style["target-arrow-shape"].value].spacing(I));var P=this.shortenIntersection(K,[i.position().x,i.position().y],b[I._private.style["target-arrow-shape"].value].gap(I));I._private.rscratch.endX=P[0];I._private.rscratch.endY=P[1];I._private.rscratch.arrowEndX=G[0];I._private.rscratch.arrowEndY=G[1];K=p[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),O.position().x,O.position().y,i._private.style["border-width"].value/2);
if(K.length==0){I._private.rscratch.noArrowPlacement=true}else{I._private.rscratch.noArrowPlacement=false}var M=this.shortenIntersection(K,[O.position().x,O.position().y],b[I._private.style["source-arrow-shape"].value].spacing(I));var N=this.shortenIntersection(K,[O.position().x,O.position().y],b[I._private.style["source-arrow-shape"].value].gap(I));I._private.rscratch.startX=N[0];I._private.rscratch.startY=N[1];I._private.rscratch.arrowStartX=M[0];I._private.rscratch.arrowStartY=M[1]}else{if(I._private.rscratch.edgeType=="bezier"){var Q=[I._private.rscratch.cp2x,I._private.rscratch.cp2y];
var S=H[0]*0.25+L[0]*0.25+Q[0]*0.5;var R=H[1]*0.25+L[1]*0.25+Q[1]*0.5;K=p[this.getNodeShape(O)].intersectLine(O._private.position.x,O._private.position.y,this.getNodeWidth(O),this.getNodeHeight(O),Q[0],Q[1],O._private.style["border-width"].value/2);var G=this.shortenIntersection(K,Q,b[I._private.style["target-arrow-shape"].value].spacing(I));var P=this.shortenIntersection(K,Q,b[I._private.style["target-arrow-shape"].value].gap(I));I._private.rscratch.endX=P[0];I._private.rscratch.endY=P[1];I._private.rscratch.arrowEndX=G[0];
I._private.rscratch.arrowEndY=G[1];K=p[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),Q[0],Q[1],i._private.style["border-width"].value/2);var M=this.shortenIntersection(K,Q,b[I._private.style["source-arrow-shape"].value].spacing(I));var N=this.shortenIntersection(K,Q,b[I._private.style["source-arrow-shape"].value].gap(I));I._private.rscratch.startX=N[0];I._private.rscratch.startY=N[1];I._private.rscratch.arrowStartX=M[0];
I._private.rscratch.arrowStartY=M[1]}else{if(I._private.rscratch.isArcEdge){return}}}}};z.prototype.findEdges=function(K){var H=this.getCachedEdges();var J={};var G=[];for(var I=0;I<K.length;I++){J[K[I]._private.data.id]=K[I]}for(var I=0;I<H.length;I++){if(J[H[I]._private.data.source]||J[H[I]._private.data.target]){G.push(H[I])}}return G};z.prototype.intersectLineEllipse=function(P,O,L,K,I,G){var H=L-P;var i=K-O;H/=I;i/=G;var M=Math.sqrt(H*H+i*i);var J=M-1;if(J<0){return[]}var N=J/M;return[(L-P)*N+P,(K-O)*N+O]
};z.prototype.findCircleNearPoint=function(J,I,K,O,N){var G=O-J;var i=N-I;var H=Math.sqrt(G*G+i*i);var M=G/H;var L=i/H;return[J+M*K,I+L*K]};z.prototype.findMaxSqDistanceToOrigin=function(J){var G=0.000001;var I;for(var H=0;H<J.length/2;H++){I=J[H*2]*J[H*2]+J[H*2+1]*J[H*2+1];if(I>G){G=I}}return G};z.prototype.finiteLinesIntersect=function(K,R,I,P,G,O,S,M,Q){var L=(S-G)*(R-O)-(M-O)*(K-G);var N=(I-K)*(R-O)-(P-R)*(K-G);var J=(M-O)*(I-K)-(S-G)*(P-R);if(J!=0){var H=L/J;var i=N/J;if(0<=H&&H<=1&&0<=i&&i<=1){return[K+H*(I-K),R+H*(P-R)]
}else{if(!Q){return[]}else{return[K+H*(I-K),R+H*(P-R)]}}}else{if(L==0||N==0){if([K,I,S].sort()[1]==S){return[S,M]}if([K,I,G].sort()[1]==G){return[G,O]}if([G,S,I].sort()[1]==I){return[I,P]}return[]}else{return[]}}};z.prototype.boxIntersectEllipse=function(H,Q,i,O,P,G,T,L,J){if(i<H){var I=H;H=i;i=I}if(O<Q){var R=Q;Q=O;O=R}var N=[L-G/2-P,J];var S=[L+G/2+P,J];var K=[L,J+T/2+P];var M=[L,J-T/2-P];if(i<N[0]){return false}if(H>S[0]){return false}if(O<M[1]){return false}if(Q>K[1]){return false}if(H<=N[0]&&N[0]<=i&&Q<=N[1]&&N[1]<=O){return true
}if(H<=S[0]&&S[0]<=i&&Q<=S[1]&&S[1]<=O){return true}if(H<=K[0]&&K[0]<=i&&Q<=K[1]&&K[1]<=O){return true}if(H<=M[0]&&M[0]<=i&&Q<=M[1]&&M[1]<=O){return true}H=(H-L)/(G+P);i=(i-L)/(G+P);Q=(Q-J)/(T+P);O=(O-J)/(T+P);if(H*H+Q*Q<=1){return true}if(i*i+Q*Q<=1){return true}if(i*i+O*O<=1){return true}if(H*H+O*O<=1){return true}return false};z.prototype.boxIntersectPolygon=function(W,K,U,I,L,R,Q,O,M,Y,P){if(U<W){var V=W;W=U;U=V}if(I<K){var J=K;K=I;I=J}var N=new Array(L.length);var X=Math.asin(Y[1]/(Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1])));
if(Y[0]<0){X=X+Math.PI/2}else{X=-X-Math.PI/2}var H=Math.cos(-X);var G=Math.sin(-X);for(var T=0;T<N.length/2;T++){N[T*2]=R*(L[T*2]*H-L[T*2+1]*G);N[T*2+1]=Q*(L[T*2+1]*H+L[T*2]*G);N[T*2]+=O;N[T*2+1]+=M}var S;if(P>0){var Z=B.expandPolygon(N,-P);S=B.joinLines(Z)}else{S=N}for(var T=0;T<N.length/2;T++){if(W<=N[T*2]&&N[T*2]<=U){if(K<=N[T*2+1]&&N[T*2+1]<=I){return true}}}if(B.pointInsidePolygon(W,K,S,0,0,1,1,0,Y)){return true}else{if(B.pointInsidePolygon(W,I,S,0,0,1,1,0,Y)){return true}else{if(B.pointInsidePolygon(U,I,S,0,0,1,1,0,Y)){return true
}else{if(B.pointInsidePolygon(U,K,S,0,0,1,1,0,Y)){return true}}}}return false};z.prototype.polygonIntersectLine=function(M,L,G,J,H,P,O,N){var X=[];var K;var I=new Array(G.length);for(var T=0;T<I.length/2;T++){I[T*2]=G[T*2]*P+J;I[T*2+1]=G[T*2+1]*O+H}var S;if(N>0){var W=B.expandPolygon(I,-N);S=B.joinLines(W)}else{S=I}var R,Q,V,U;for(var T=0;T<S.length/2;T++){R=S[T*2];Q=S[T*2+1];if(T<S.length/2-1){V=S[(T+1)*2];U=S[(T+1)*2+1]}else{V=S[0];U=S[1]}K=this.finiteLinesIntersect(M,L,J,H,R,Q,V,U);if(K.length!=0){X.push(K[0],K[1])
}}return X};z.prototype.shortenIntersection=function(K,J,H){var i=[K[0]-J[0],K[1]-J[1]];var I=Math.sqrt(i[0]*i[0]+i[1]*i[1]);var G=(I-H)/I;if(G<0){return[]}else{return[J[0]+G*i[0],J[1]+G*i[1]]}};b.arrow={_points:[-0.15,-0.3,0,0,0.15,-0.3],collide:function(L,I,H,G,i,N,J,K){var M=b.arrow._points;return c.pointInsidePolygon(L,I,M,H,G,i,N,J,K)},roughCollide:function(G,M,L,I,H,i,K,J){if(typeof(b.arrow._farthestPointSqDistance)=="undefined"){b.arrow._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.arrow._points)
}return c.checkInBoundingCircle(G,M,b.arrow._farthestPointSqDistance,0,H,i,L,I)},draw:function(H){var I=b.arrow._points;for(var G=0;G<I.length/2;G++){H.lineTo(I[G*2],I[G*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.triangle=b.arrow;b.none={collide:function(G,M,L,I,H,i,K,J){return false},roughCollide:function(G,M,L,I,H,i,K,J){return false},draw:function(i){},spacing:function(i){return 0},gap:function(i){return 0}};b.circle={_baseRadius:0.15,collide:function(O,L,I,H,i,R,M,N){if(i!=R){var G=Math.asin(M[1]/(Math.sqrt(M[0]*M[0]+M[1]*M[1])));
var Q=Math.cos(-G);var K=Math.sin(-G);var J=[O*Q-L*K,L*Q+O*K];var P=(R+N)/(i+N);L/=P;H/=P;return(Math.pow(I-O,2)+Math.pow(H-L,2)<=Math.pow((i+N)*b.circle._baseRadius,2))}else{return(Math.pow(I-O,2)+Math.pow(H-L,2)<=Math.pow((i+N)*b.circle._baseRadius,2))}},roughCollide:function(G,M,L,I,H,i,K,J){return true},draw:function(i){i.arc(0,0,b.circle._baseRadius,0,Math.PI*2,false)},spacing:function(i){return c.getArrowWidth(i._private.style.width.value)*b.circle._baseRadius},gap:function(i){return i._private.style.width.value*2
}};b.inhibitor={_points:[-0.25,0,-0.25,-0.1,0.25,-0.1,0.25,0],collide:function(L,I,H,G,i,N,J,K){var M=b.inhibitor._points;return c.pointInsidePolygon(L,I,M,H,G,i,N,J,K)},roughCollide:function(G,M,L,I,H,i,K,J){if(typeof(b.inhibitor._farthestPointSqDistance)=="undefined"){b.inhibitor._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.inhibitor._points)}return c.checkInBoundingCircle(G,M,b.inhibitor._farthestPointSqDistance,0,H,i,L,I)},draw:function(H){var I=b.inhibitor._points;for(var G=0;G<I.length/2;
G++){H.lineTo(I[G*2],I[G*2+1])}},spacing:function(i){return 4},gap:function(i){return 4}};b.square={_points:[-0.12,0,0.12,0,0.12,-0.24,-0.12,-0.24],collide:function(L,I,H,G,i,N,J,K){var M=b.square._points;return c.pointInsidePolygon(L,I,M,H,G,i,N,J,K)},roughCollide:function(G,M,L,I,H,i,K,J){if(typeof(b.square._farthestPointSqDistance)=="undefined"){b.square._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.square._points)}return c.checkInBoundingCircle(G,M,b.square._farthestPointSqDistance,0,H,i,L,I)
},draw:function(H){var I=b.square._points;for(var G=0;G<I.length/2;G++){H.lineTo(I[G*2],I[G*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.diamond={_points:[-0.14,-0.14,0,-0.28,0.14,-0.14,0,0],collide:function(L,I,H,G,i,N,J,K){var M=b.diamond._points;return c.pointInsidePolygon(L,I,M,H,G,i,N,J,K)},roughCollide:function(G,M,L,I,H,i,K,J){if(typeof(b.diamond._farthestPointSqDistance)=="undefined"){b.diamond._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.diamond._points)
}return c.checkInBoundingCircle(G,M,b.diamond._farthestPointSqDistance,0,H,i,L,I)},draw:function(i){i.lineTo(-0.14,-0.14);i.lineTo(0,-0.28);i.lineTo(0.14,-0.14);i.lineTo(0,0)},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.tee=b.inhibitor;z.prototype.getArrowWidth=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};z.prototype.getArrowHeight=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};z.prototype.drawArrowheads=function(G,I,J){if(J){return}var H,i;
var L=I._private.rscratch.arrowStartX;var K=I._private.rscratch.arrowStartY;H=L-I.source().position().x;i=K-I.source().position().y;G.fillStyle="rgba("+I._private.style["source-arrow-color"].value[0]+","+I._private.style["source-arrow-color"].value[1]+","+I._private.style["source-arrow-color"].value[2]+","+I._private.style.opacity.value+")";G.lineWidth=I._private.style.width.value;this.drawArrowShape(G,I._private.style["source-arrow-shape"].value,L,K,H,i);var N=I._private.rscratch.arrowEndX;var M=I._private.rscratch.arrowEndY;
H=N-I.target().position().x;i=M-I.target().position().y;G.fillStyle="rgba("+I._private.style["target-arrow-color"].value[0]+","+I._private.style["target-arrow-color"].value[1]+","+I._private.style["target-arrow-color"].value[2]+","+I._private.style.opacity.value+")";G.lineWidth=I._private.style.width.value;this.drawArrowShape(G,I._private.style["target-arrow-shape"].value,N,M,H,i)};z.prototype.drawArrowShape=function(K,G,i,M,J,H){var L=Math.asin(H/(Math.sqrt(J*J+H*H)));if(J<0){L=L+Math.PI/2}else{L=-(Math.PI/2+L)
}K.save();K.translate(i,M);K.moveTo(0,0);K.rotate(-L);var I=this.getArrowWidth(K.lineWidth);K.scale(I,I);K.beginPath();b[G].draw(K);K.closePath();K.fill();K.restore()};var j=function(H,G){var M=1/H*2*Math.PI;var K=H%2==0?Math.PI/2+M/2:Math.PI/2;K+=G;var O=new Array(H*2);var I;for(var J=0;J<H;J++){I=J*M+K;O[2*J]=Math.cos(I);O[2*J+1]=Math.sin(-I)}var Q=0;var P=0;for(var J=0;J<O.length/2;J++){if(Math.abs(O[2*J]>Q)){Q=Math.abs(O[2*J])}if(Math.abs(O[2*J+1]>P)){P=Math.abs(O[2*J+1])}}var L=0.0005;var N=Math.max(Q,P);
for(var J=0;J<O.length/2;J++){if(N>L){O[2*J]*=(1/N);O[2*J+1]*=(1/N)}}return O};var B=c;p.ellipse={draw:function(G,J,I,H,i){p.ellipse.drawPath(G,J,I,H,i);G.fill()},drawPath:function(G,J,I,H,i){G.beginPath();G.save();G.translate(J,I);G.scale(H/2,i/2);G.arc(0,0,1,0,Math.PI*2,false);G.closePath();G.restore()},intersectLine:function(K,J,I,H,G,M,L){var i=c.intersectLineEllipse(G,M,K,J,I/2+L,H/2+L);return i},intersectBox:function(H,M,i,K,G,N,J,I,L){return z.prototype.boxIntersectEllipse(H,M,i,K,L,G,N,J,I)
},checkPointRough:function(G,L,K,H,i,J,I){return true},checkPoint:function(G,L,K,H,i,J,I){G-=J;L-=I;G/=(H+K);L/=(i+K);return(Math.pow(G,2)+Math.pow(L,2)<=1)}};p.triangle={points:j(3,0),draw:function(G,J,I,H,i){B.drawPolygon(G,J,I,H,i,p.triangle.points)},drawPath:function(G,J,I,H,i){B.drawPolygonPath(G,J,I,H,i,p.triangle.points)},intersectLine:function(J,I,H,G,i,L,K){return B.polygonIntersectLine(i,L,p.triangle.points,J,I,H/2,G/2,K)},intersectBox:function(H,M,i,K,G,O,J,I,L){var N=p.triangle.points;
return B.boxIntersectPolygon(H,M,i,K,N,G,O,J,I,[0,-1],L)},checkPointRough:function(G,L,K,H,i,J,I){return B.checkInBoundingBox(G,L,p.triangle.points,K,H,i,J,I)},checkPoint:function(G,L,K,H,i,J,I){return B.pointInsidePolygon(G,L,p.triangle.points,J,I,H,i,[0,-1],K)}};p.square={points:j(4,0),draw:function(G,J,I,H,i){B.drawPolygon(G,J,I,H,i,p.square.points)},drawPath:function(G,J,I,H,i){B.drawPolygonPath(G,J,I,H,i,p.square.points)},intersectLine:function(J,I,H,G,i,L,K){return B.polygonIntersectLine(i,L,p.square.points,J,I,H/2,G/2,K)
},intersectBox:function(H,M,i,K,G,O,J,I,L){var N=p.square.points;return B.boxIntersectPolygon(H,M,i,K,N,G,O,J,I,[0,-1],L)},checkPointRough:function(G,L,K,H,i,J,I){return B.checkInBoundingBox(G,L,p.square.points,K,H,i,J,I)},checkPoint:function(G,L,K,H,i,J,I){return B.pointInsidePolygon(G,L,p.square.points,J,I,H,i,[0,-1],K)}};p.rectangle=p.square;p.rectangle.intersectBox=p.ellipse.intersectBox;p.octogon={};p.roundrectangle=p.square;p.roundrectangle2={roundness:4.99,draw:function(H,G,i){if(G<=roundness*2){return
}B.drawPolygon(H._private.position.x,H._private.position.y,G,i,nodeSapes.roundrectangle2.points)},intersectLine:function(I,H,G,i,J){return B.findPolygonIntersection(I,H,G,i,J,p.square.points)},intersectBox:function(H,M,i,K,G,O,J,I,L){var N=p.square.points}};p.pentagon={points:j(5,0),draw:function(G,J,I,H,i){B.drawPolygon(G,J,I,H,i,p.pentagon.points)},drawPath:function(G,J,I,H,i){B.drawPolygonPath(G,J,I,H,i,p.pentagon.points)},intersectLine:function(J,I,H,G,i,L,K){return B.polygonIntersectLine(i,L,p.pentagon.points,J,I,H/2,G/2,K)
},intersectBox:function(H,M,i,K,G,O,J,I,L){var N=p.pentagon.points;return B.boxIntersectPolygon(H,M,i,K,N,G,O,J,I,[0,-1],L)},checkPointRough:function(G,L,K,H,i,J,I){return B.checkInBoundingBox(G,L,p.pentagon.points,K,H,i,J,I)},checkPoint:function(G,L,K,H,i,J,I){return B.pointInsidePolygon(G,L,p.pentagon.points,J,I,H,i,[0,-1],K)}};p.hexagon={points:j(6,0),draw:function(G,J,I,H,i){B.drawPolygon(G,J,I,H,i,p.hexagon.points)},drawPath:function(G,J,I,H,i){B.drawPolygonPath(G,J,I,H,i,p.hexagon.points)},intersectLine:function(J,I,H,G,i,L,K){return B.polygonIntersectLine(i,L,p.hexagon.points,J,I,H/2,G/2,K)
},intersectBox:function(H,M,i,K,G,O,J,I,L){var N=p.hexagon.points;return B.boxIntersectPolygon(H,M,i,K,N,G,O,J,I,[0,-1],L)},checkPointRough:function(G,L,K,H,i,J,I){return B.checkInBoundingBox(G,L,p.hexagon.points,K,H,i,J,I)},checkPoint:function(G,L,K,H,i,J,I){return B.pointInsidePolygon(G,L,p.hexagon.points,J,I,H,i,[0,-1],K)}};p.heptagon={points:j(7,0),draw:function(G,J,I,H,i){B.drawPolygon(G,J,I,H,i,p.heptagon.points)},drawPath:function(G,J,I,H,i){B.drawPolygonPath(G,J,I,H,i,p.heptagon.points)},intersectLine:function(J,I,H,G,i,L,K){return B.polygonIntersectLine(i,L,p.heptagon.points,J,I,H/2,G/2,K)
},intersectBox:function(H,M,i,K,G,O,J,I,L){var N=p.heptagon.points;return B.boxIntersectPolygon(H,M,i,K,N,G,O,J,I,[0,-1],L)},checkPointRough:function(G,L,K,H,i,J,I){return B.checkInBoundingBox(G,L,p.heptagon.points,K,H,i,J,I)},checkPoint:function(G,L,K,H,i,J,I){return B.pointInsidePolygon(G,L,p.heptagon.points,J,I,H,i,[0,-1],K)}};p.octagon={points:j(8,0),draw:function(G,J,I,H,i){B.drawPolygon(G,J,I,H,i,p.octagon.points)},drawPath:function(G,J,I,H,i){B.drawPolygonPath(G,J,I,H,i,p.octagon.points)},intersectLine:function(J,I,H,G,i,L,K){return B.polygonIntersectLine(i,L,p.octagon.points,J,I,H/2,G/2,K)
},intersectBox:function(H,M,i,K,G,O,J,I,L){var N=p.octagon.points;return B.boxIntersectPolygon(H,M,i,K,N,G,O,J,I,[0,-1],L)},checkPointRough:function(G,L,K,H,i,J,I){return B.checkInBoundingBox(G,L,p.octagon.points,K,H,i,J,I)},checkPoint:function(G,L,K,H,i,J,I){return B.pointInsidePolygon(G,L,p.octagon.points,J,I,H,i,[0,-1],K)}};var h=new Array(20);var f=j(5,0);var E=j(5,Math.PI/5);var m=0.5*(3-Math.sqrt(5));m*=1.57;for(var D=0;D<E.length/2;D++){E[D*2]*=m;E[D*2+1]*=m}for(var D=0;D<20/4;D++){h[D*4]=f[D*2];
h[D*4+1]=f[D*2+1];h[D*4+2]=E[D*2];h[D*4+3]=E[D*2+1]}p.star5={points:h,draw:function(G,J,I,H,i){B.drawPolygon(G,J,I,H,i,p.star5.points)},drawPath:function(G,J,I,H,i){B.drawPolygonPath(G,J,I,H,i,p.star5.points)},intersectLine:function(J,I,H,G,i,L,K){return B.polygonIntersectLine(i,L,p.star5.points,J,I,H/2,G/2,K)},intersectBox:function(H,M,i,K,G,O,J,I,L){var N=p.star5.points;return B.boxIntersectPolygon(H,M,i,K,N,G,O,J,I,[0,-1],L)},checkPointRough:function(G,L,K,H,i,J,I){return B.checkInBoundingBox(G,L,p.star5.points,K,H,i,J,I)
},checkPoint:function(G,L,K,H,i,J,I){return B.pointInsidePolygon(G,L,p.star5.points,J,I,H,i,[0,-1],K)}};z.prototype.expandPolygon=function(S,I){var J=new Array(S.length*2);var R,Q,P,O;for(var M=0;M<S.length/2;M++){R=S[M*2];Q=S[M*2+1];if(M<S.length/2-1){P=S[(M+1)*2];O=S[(M+1)*2+1]}else{P=S[0];O=S[1]}var N=(O-Q);var L=-(P-R);var K=Math.sqrt(N*N+L*L);var H=N/K;var G=L/K;J[M*4]=R+H*I;J[M*4+1]=Q+G*I;J[M*4+2]=P+H*I;J[M*4+3]=O+G*I}return J};z.prototype.joinLines=function(P){var O=new Array(P.length/2);var R,Q,N,M;
var K,J,I,H;for(var L=0;L<P.length/4;L++){R=P[L*4];Q=P[L*4+1];N=P[L*4+2];M=P[L*4+3];if(L<P.length/4-1){K=P[(L+1)*4];J=P[(L+1)*4+1];I=P[(L+1)*4+2];H=P[(L+1)*4+3]}else{K=P[0];J=P[1];I=P[2];H=P[3]}var G=this.finiteLinesIntersect(R,Q,N,M,K,J,I,H,true);O[L*2]=G[0];O[L*2+1]=G[1]}return O};z.prototype.pointInsidePolygon=function(R,P,L,O,M,V,U,ab,T){var N=new Array(L.length);var aa=Math.asin(ab[1]/(Math.sqrt(ab[0]*ab[0]+ab[1]*ab[1])));if(ab[0]<0){aa=aa+Math.PI/2}else{aa=-aa-Math.PI/2}var I=Math.cos(-aa);
var G=Math.sin(-aa);for(var X=0;X<N.length/2;X++){N[X*2]=V*(L[X*2]*I-L[X*2+1]*G);N[X*2+1]=U*(L[X*2+1]*I+L[X*2]*G);N[X*2]+=O;N[X*2+1]+=M}var W;if(T>0){var ac=B.expandPolygon(N,-T);W=B.joinLines(ac)}else{W=N}var Z,K,Y,J;var H;var Q=0;var S=0;for(var X=0;X<W.length/2;X++){Z=W[X*2];K=W[X*2+1];if(X+1<W.length/2){Y=W[(X+1)*2];J=W[(X+1)*2+1]}else{Y=W[(X+1-W.length/2)*2];J=W[(X+1-W.length/2)*2+1]}if(Z==R&&Y==R){}else{if((Z>=R&&R>=Y)||(Z<=R&&R<=Y)){H=(R-Z)/(Y-Z)*(J-K)+K;if(H>P){Q++}if(H<P){S++}}else{continue
}}}if(Q%2==0){return false}else{return true}};z.prototype.drawPolygonPath=function(J,H,M,L,G,K){J.save();J.translate(H,M);J.beginPath();J.scale(L/2,G/2);J.moveTo(K[0],K[1]);for(var I=1;I<K.length/2;I++){J.lineTo(K[I*2],K[I*2+1])}J.closePath();J.restore()};z.prototype.drawPolygon=function(H,G,K,J,i,I){this.drawPolygonPath(H,G,K,J,i,I);H.fill()};z.prototype.checkInBoundingCircle=function(G,M,H,L,I,i,K,J){G=(G-K)/(I+L);M=(M-J)/(i+L);return(G*G+M*M)<=H};z.prototype.checkInBoundingBox=function(Q,O,R,P,I,S,M,L){var K=R[0],J=R[1];
var H=R[0],G=R[1];for(var N=1;N<R.length/2;N++){if(R[N*2]<K){K=R[N*2]}else{if(R[N*2]>H){H=R[N*2]}}if(R[N*2+1]<J){J=R[N*2+1]}else{if(R[N*2+1]>G){G=R[N*2+1]}}}Q-=M;O-=L;Q/=I;O/=S;if(Q<K){return false}else{if(Q>H){return false}}if(O<J){return false}else{if(O>G){return false}}return true};z.prototype.boxInBezierVicinity=function(Q,M,W,N,S,L,R,K,O,I,P){var X=Math.min(Q,W)-P;var U=Math.min(M,N)-P;var V=Math.max(Q,W)+P;var T=Math.max(M,N)+P;if(S>=X&&S<=V&&L>=U&&L<=T){return 2}else{if(O>=X&&O<=V&&I>=U&&I<=T){return 2
}else{if(R>=X&&R<=V&&K>=U&&K<=T){return 1}}}var J=Math.min(S,R,O);var H=Math.min(L,K,I);var G=Math.max(S,R,O);var i=Math.max(L,K,I);if(J>V||G<X||H>T||i<U){return 0}return 1};z.prototype.checkStraightEdgeCrossesBox=function(T,N,aa,Q,V,J,U,G,S){var ab=Math.min(T,aa)-S;var Y=Math.min(N,Q)-S;var Z=Math.max(T,aa)+S;var X=Math.max(N,Q)+S;var K=U-V;var P=V;var W;var H=G-J;var O=J;var R;if(Math.abs(K)<0.0001){return(V>=ab&&V<=Z&&Math.min(J,G)<=Y&&Math.max(J,G)>=X)}var i=(ab-P)/K;if(i>0&&i<=1){W=H*i+O;if(W>=Y&&W<=X){return true
}}var M=(Z-P)/K;if(M>0&&M<=1){W=H*M+O;if(W>=Y&&W<=X){return true}}var I=(Y-O)/H;if(I>0&&I<=1){R=K*I+P;if(R>=ab&&R<=Z){return true}}var L=(X-O)/H;if(L>0&&L<=1){R=K*L+P;if(R>=ab&&R<=Z){return true}}return false};z.prototype.checkBezierCrossesBox=function(Y,K,al,aa,S,av,O,ar,M,ao,G){var U=Math.min(Y,al)-G;var R=Math.min(K,aa)-G;var au=Math.max(Y,al)+G;var aq=Math.max(K,aa)+G;if(S>=U&&S<=au&&av>=R&&av<=aq){return true}else{if(M>=U&&M<=au&&ao>=R&&ao<=aq){return true}}var X=S-2*O+M;var J=-2*S+2*O;var ah=S;
var ab=[];if(Math.abs(X)<0.0001){var am=(U-S)/J;var Z=(au-S)/J;ab.push(am,Z)}else{var ae=J*J-4*X*(ah-U);var V,T;if(ae>0){var af=Math.sqrt(ae);V=(-J+af)/(2*X);T=(-J-af)/(2*X);ab.push(V,T)}var ad=J*J-4*X*(ah-au);var Q,N;if(ad>0){var af=Math.sqrt(ad);Q=(-J+af)/(2*X);N=(-J-af)/(2*X);ab.push(Q,N)}}ab.sort(function(ax,aw){return ax-aw});var W=av-2*ar+ao;var H=-2*av+2*ar;var ag=av;var ak=[];if(Math.abs(W)<0.0001){var I=(R-av)/H;var ai=(aq-av)/H;ak.push(I,ai)}else{var P=H*H-4*W*(ag-R);var i,at;if(P>0){var af=Math.sqrt(P);
i=(-H+af)/(2*W);at=(-H-af)/(2*W);ak.push(i,at)}var L=H*H-4*W*(ag-aq);var ap,an;if(L>0){var af=Math.sqrt(L);ap=(-H+af)/(2*W);an=(-H-af)/(2*W);ak.push(ap,an)}}ak.sort(function(ax,aw){return ax-aw});for(var ac=0;ac<ab.length;ac+=2){for(var aj=1;aj<ak.length;aj+=2){if(ab[ac]<ak[aj]&&ak[aj]>=0&&ab[ac]<=1&&ab[ac+1]>ak[aj-1]&&ak[aj-1]<=1&&ab[ac+1]>=0){return true}}}return false};z.prototype.inBezierVicinity=function(L,K,V,H,U,G,T,i,aa){var N=0.25*V+0.5*U+0.25*T;var M=0.25*H+0.5*G+0.25*i;var Q,P,Y,W;var J,I,O;
var Z=function(ac,ai,ad,ab,ah,ag,ae,af){J=(ag-ab)*(ac-ad)+(ad-ah)*(ai-ab);I=J*J;sideSquared=(ag-ab)*(ag-ab)+(ad-ah)*(ad-ah);if(af){if(J>0){return false}}else{if(J<0){return false}}return(I/sideSquared>ae)};var S=(N+U)/2;var R=(M+G)/2;var X=true;if(Z(S,R,V,H,U,G,0,X)){X=!X}return(!Z(L,K,V,H,U,G,aa,X)&&!Z(L,K,U,G,T,i,aa,X)&&!Z(L,K,T,i,V,H,aa,X))};z.prototype.solveCubic=function(N,M,L,K,R){M/=N;L/=N;K/=N;var P,G,i,I,Q,O,H,J;G=(3*L-(M*M))/9;i=-(27*K)+M*(9*L-2*(M*M));i/=54;P=G*G*G+i*i;R[1]=0;H=(M/3);if(P>0){Q=i+Math.sqrt(P);
Q=((Q<0)?-Math.pow(-Q,(1/3)):Math.pow(Q,(1/3)));O=i-Math.sqrt(P);O=((O<0)?-Math.pow(-O,(1/3)):Math.pow(O,(1/3)));R[0]=-H+Q+O;H+=(Q+O)/2;R[4]=R[2]=-H;H=Math.sqrt(3)*(-O+Q)/2;R[3]=H;R[5]=-H;return}R[5]=R[3]=0;if(P==0){J=((i<0)?-Math.pow(-i,(1/3)):Math.pow(i,(1/3)));R[0]=-H+2*J;R[4]=R[2]=-(J+H);return}G=-G;I=G*G*G;I=Math.acos(i/Math.sqrt(I));J=2*Math.sqrt(G);R[0]=-H+J*Math.cos(I/3);R[2]=-H+J*Math.cos((I+2*Math.PI)/3);R[4]=-H+J*Math.cos((I+4*Math.PI)/3);return};z.prototype.sqDistanceToQuadraticBezier=function(Q,P,V,K,U,J,T,I){var ab=1*V*V-4*V*U+2*V*T+4*U*U-4*U*T+T*T+K*K-4*K*J+2*K*I+4*J*J-4*J*I+I*I;
var aa=1*9*V*U-3*V*V-3*V*T-6*U*U+3*U*T+9*K*J-3*K*K-3*K*I-6*J*J+3*J*I;var Y=1*3*V*V-6*V*U+V*T-V*Q+2*U*U+2*U*Q-T*Q+3*K*K-6*K*J+K*I-K*P+2*J*J+2*J*P-I*P;var X=1*V*U-V*V+V*Q-U*Q+K*J-K*K+K*P-J*P;A("coefficients: "+ab/ab+", "+aa/ab+", "+Y/ab+", "+X/ab);var L=[];this.solveCubic(ab,aa,Y,X,L);var G=1e-7;var Z=[];for(var M=0;M<6;M+=2){if(Math.abs(L[M+1])<G&&L[M]>=0&&L[M]<=1){Z.push(L[M])}}Z.push(1);Z.push(0);var H=-1;var W;var O,N,R;for(var S=0;S<Z.length;S++){O=Math.pow(1-Z[S],2)*V+2*(1-Z[S])*Z[S]*U+Z[S]*Z[S]*T;
N=Math.pow(1-Z[S],2)*K+2*(1-Z[S])*Z[S]*J+Z[S]*Z[S]*I;R=Math.pow(O-Q,2)+Math.pow(N-P,2);A("distance for param "+Z[S]+": "+Math.sqrt(R));if(H>=0){if(R<H){H=R;W=Z[S]}}else{H=R;W=Z[S]}}A("given: ( "+Q+", "+P+"), ( "+V+", "+K+"), ( "+U+", "+J+"), ( "+T+", "+I+")");A("roots: "+L);A("params: "+Z);A("closest param: "+W);return H};z.prototype.sqDistanceToFiniteLine=function(N,K,G,M,i,L){var H=[N-G,K-M];var Q=[i-G,L-M];var I=Q[0]*Q[0]+Q[1]*Q[1];var P=H[0]*H[0]+H[1]*H[1];var O=H[0]*Q[0]+H[1]*Q[1];var J=O*O/I;
if(O<0){return P}if(J>I){return(N-i)*(N-i)+(K-L)*(K-L)}return(P-J)};var A=function(){};w("renderer","canvas",z)})(cytoscape);(function(a){var b={ready:function(){},stop:function(){}};function c(d){this.options=a.util.extend(true,{},b,d)}c.prototype.run=function(){var d=this.options;var e=d.cy;e.nodes().positions(function(){return{x:0,y:0}});e.one("layoutready",d.ready);e.trigger("layoutready");e.one("layoutstop",d.stop);e.trigger("layoutstop")};c.prototype.stop=function(){var d=this.options;cy.one("layoutstop",d.stop);
cy.trigger("layoutstop")};a("layout","null",c)})(cytoscape);(function(a){var c={ready:undefined,stop:undefined,fit:true};function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var h=this.options;var j=h.cy;var g=j.nodes();var f=j.edges();var e=j.container();var i=e.clientWidth;var d=e.clientHeight;g.positions(function(l,k){if(k.locked()){return false}return{x:Math.round(Math.random()*i),y:Math.round(Math.random()*d)}});j.one("layoutready",h.ready);j.trigger("layoutready");
if(h.fit){j.fit()}j.one("layoutstop",h.stop);j.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","random",b)})(cytoscape);(function(a){var c={fit:true,rows:undefined,columns:undefined,ready:undefined,stop:undefined};function b(d){this.options=a.util.extend({},c,d)}b.prototype.run=function(){var A=options=this.options;var g=A.cy;var v=g.nodes();var f=g.edges();var p=g.container();var u=p.clientWidth;var t=p.clientHeight;if(t==0||u==0){v.positions(function(){return{x:0,y:0}})}else{var h=v.size();
var m=Math.sqrt(h*t/u);var l=Math.round(m);var o=Math.round(u/t*m);function k(C){if(C==undefined){return Math.min(l,o)}else{var B=Math.min(l,o);if(B==l){l=C}else{o=C}}}function d(C){if(C==undefined){return Math.max(l,o)}else{var B=Math.max(l,o);if(B==l){l=C}else{o=C}}}if(options.rows!=null&&options.columns!=null){l=options.rows;o=options.columns}else{if(options.rows!=null&&options.columns==null){l=options.rows;o=Math.ceil(h/l)}else{if(options.rows==null&&options.columns!=null){o=options.columns;l=Math.ceil(h/o)
}else{if(o*l>h){var z=k();var s=d();if((z-1)*s>=h){k(z-1)}else{if((s-1)*z>=h){d(s-1)}}}else{while(o*l<h){var z=k();var s=d();if((s+1)*z>=h){d(s+1)}else{k(z+1)}}}}}}var w=u/o;var e=t/l;var j=0;var i=0;v.positions(function(D,C){if(C.locked()){return false}var B=i*w+w/2;var E=j*e+e/2;i++;if(i>=o){i=0;j++}return{x:B,y:E}})}if(A.fit){g.reset()}g.one("layoutready",A.ready);g.trigger("layoutready");g.one("layoutstop",A.stop);g.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","grid",b)})(cytoscape);
(function(a){var c={fit:true,ready:undefined,stop:undefined,positions:undefined,zoom:undefined,pan:undefined};function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var g=this.options;var i=g.cy;var f=i.nodes();var e=i.edges();var d=i.container();function h(j){if(g.positions==null){return null}if(g.positions[j._private.data.id]==null){return null}return g.positions[j._private.data.id]}f.positions(function(k,l){var j=h(l);if(l.locked()||j==null){return false}return j});if(g.pan!=null){i.pan(g.pan)
}if(g.zoom!=null){i.zoom(g.zoom)}i.one("layoutready",g.ready);i.trigger("layoutready");if(g.fit){i.fit()}i.one("layoutstop",g.stop);i.trigger("layoutstop")};a("layout","preset",b);a("core","presetLayout",function(){var f=this;var d={};var e={};f.nodes().each(function(g,h){e[h.data("id")]=h.position()});d.positions=e;d.name="preset";d.zoom=f.zoom();d.pan=f.pan();return d})})(cytoscape);(function(a){var b={liveUpdate:true,ready:undefined,stop:undefined,maxSimulationTime:4000,fit:true,padding:[50,50,50,50],ungrabifyWhileSimulating:true,repulsion:undefined,stiffness:undefined,friction:undefined,gravity:true,fps:undefined,precision:undefined,nodeMass:undefined,edgeLength:undefined,stepSize:1,stableEnergy:function(d){var f=d;
return(f.max<=0.5)||(f.mean<=0.3)}};function c(d){this.options=a.util.extend({},b,d)}c.prototype.run=function(){var k=this.options;var j=k.cy;var z=j.nodes();var i=j.edges();var s=j.container();var w=s.clientWidth;var u=s.clientHeight;if(j.nodes().size()<=1){if(k.fit){j.reset()}j.nodes().position({x:Math.round(w/2),y:Math.round(u/2)});j.one("layoutstop",k.stop);j.trigger("layoutstop");j.one("layoutstop",k.stop);j.trigger("layoutstop");return}var m=this.system=arbor.ParticleSystem(k.repulsion,k.stiffness,k.friction,k.gravity,k.fps,k.dt,k.precision);
this.system=m;if(k.liveUpdate&&k.fit){j.reset()}var v=250;var g;var p=false;var f=+new Date;var t={init:function(B){},redraw:function(){var C=m.energy();if(k.stableEnergy!=null&&C!=null&&C.n>0&&k.stableEnergy(C)){m.stop();return}clearTimeout(g);g=setTimeout(A,v);var D=[];m.eachNode(function(J,E){var I=J.name;var G=J.data;var F=G.element;if(F==null){return}var H=F._private.position;if(!F.locked()&&!F.grabbed()){H.x=E.x;H.y=E.y;D.push(F)}});var B=(+new Date-f)>=16;if(k.liveUpdate&&D.length>0&&B){new a.Collection(j,D).rtrigger("position");
f=+new Date}if(!p){p=true;j.one("layoutready",k.ready);j.trigger("layoutready")}}};m.renderer=t;m.screenSize(w,u);m.screenPadding(k.padding[0],k.padding[1],k.padding[2],k.padding[3]);m.screenStep(k.stepSize);function o(B,C){if(C==null){return undefined}else{if(typeof C==typeof function(){}){return C.apply(B,[B._private.data,{nodes:z.length,edges:i.length,element:B}])}else{return C}}}function d(F){var I=F.x;var G=F.y;var J=w;var D=u;var C=-2;var K=2;var H=-2;var B=2;var E=4;return{x:I/J*E+C,y:G/D*E+K}
}var l=function(C){grabbed=this;var D=m.fromScreen(this.position());var B=arbor.Point(D.x,D.y);this.scratch().arbor.p=B;switch(C.type){case"grab":this.scratch().arbor.fixed=true;break;case"dragstop":this.scratch().arbor.fixed=false;this.scratch().arbor.tempMass=1000;break}};z.bind("grab drag dragstop",l);z.each(function(D,E){var G=this._private.data.id;var C=o(this,k.nodeMass);var B=this._private.locked;var F=d({x:E.position().x,y:E.position().y});this.scratch().arbor=m.addNode(G,{element:this,mass:C,fixed:B,x:B?F.x:undefined,y:B?F.y:undefined})
});i.each(function(){var E=this.id();var C=this.source().id();var D=this.target().id();var B=o(this,k.edgeLength);this.scratch().arbor=m.addEdge(C,D,{length:B})});function h(B){if(k.fit){j.fit()}B()}var e=z.filter(":grabbable");if(k.ungrabifyWhileSimulating){e.ungrabify()}var A=function(){if($.browser.msie){h(function(){B()})}else{B()}function B(){if(!k.liveUpdate){if(k.fit){j.reset()}j.nodes().rtrigger("position")}z.unbind("grab drag dragstop",l);if(k.ungrabifyWhileSimulating){e.grabify()}j.one("layoutstop",k.stop);
j.trigger("layoutstop")}};m.start();setTimeout(function(){m.stop()},k.maxSimulationTime)};c.prototype.stop=function(){if(this.system!=null){system.stop()}};a("layout","arbor",c)})(cytoscape);